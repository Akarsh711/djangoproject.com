{"parents": [{"link": "../../", "title": "Using Django"}, {"link": "../", "title": "Internationalization and localization"}], "prev": {"link": "../translation/", "title": "Translation"}, "next": {"link": "../timezones/", "title": "Time zones"}, "title": "Format localization", "meta": null, "body": "<div class=\"section\" id=\"s-format-localization\">\n<span id=\"format-localization\"></span><h1>Format localization<a class=\"headerlink\" href=\"#format-localization\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<div class=\"section\" id=\"s-overview\">\n<span id=\"overview\"></span><h2>Overview<a class=\"headerlink\" href=\"#overview\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Django\u2019s formatting system is capable of displaying dates, times and numbers in\ntemplates using the format specified for the current\n<a class=\"reference internal\" href=\"../#term-locale-name\"><span class=\"xref std std-term\">locale</span></a>. It also handles localized input in forms.</p>\n<p>Two users accessing the same content may see dates, times and numbers formatted\nin different ways, depending on the formats for their current locale.</p>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">To enable number formatting with thousand separators, it is necessary to\nset <a class=\"reference internal\" href=\"../../../ref/settings/#std-setting-USE_THOUSAND_SEPARATOR\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">USE_THOUSAND_SEPARATOR</span> <span class=\"pre\">=</span> <span class=\"pre\">True</span></code></a> in\nyour settings file. Alternatively, you could use <a class=\"reference internal\" href=\"../../../ref/contrib/humanize/#std-templatefilter-intcomma\"><code class=\"xref std std-tfilter docutils literal notranslate\"><span class=\"pre\">intcomma</span></code></a> to\nformat numbers in your template.</p>\n</div>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">There is a related <a class=\"reference internal\" href=\"../../../ref/settings/#std-setting-USE_I18N\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">USE_I18N</span></code></a> setting that controls if Django\nshould activate translation. See <a class=\"reference internal\" href=\"../translation/\"><span class=\"doc\">Translation</span></a> for more\ndetails.</p>\n</div>\n</div>\n<div class=\"section\" id=\"s-locale-aware-input-in-forms\">\n<span id=\"locale-aware-input-in-forms\"></span><h2>Locale aware input in forms<a class=\"headerlink\" href=\"#locale-aware-input-in-forms\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>When formatting is enabled, Django can use localized formats when parsing dates,\ntimes and numbers in forms. That means it tries different formats for different\nlocales when guessing the format used by the user when inputting data on forms.</p>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p class=\"last\">Django uses different formats for displaying data to those it uses for\nparsing data. Most notably, the formats for parsing dates can\u2019t use the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">%a</span></code> (abbreviated weekday name), <code class=\"docutils literal notranslate\"><span class=\"pre\">%A</span></code> (full weekday name),\n<code class=\"docutils literal notranslate\"><span class=\"pre\">%b</span></code> (abbreviated month name), <code class=\"docutils literal notranslate\"><span class=\"pre\">%B</span></code> (full month name),\nor <code class=\"docutils literal notranslate\"><span class=\"pre\">%p</span></code> (AM/PM).</p>\n</div>\n<p>To enable a form field to localize input and output data use its <code class=\"docutils literal notranslate\"><span class=\"pre\">localize</span></code>\nargument:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">class</span> <span class=\"nc\">CashRegisterForm</span><span class=\"p\">(</span><span class=\"n\">forms</span><span class=\"o\">.</span><span class=\"n\">Form</span><span class=\"p\">):</span>\n    <span class=\"n\">product</span> <span class=\"o\">=</span> <span class=\"n\">forms</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">()</span>\n    <span class=\"n\">revenue</span> <span class=\"o\">=</span> <span class=\"n\">forms</span><span class=\"o\">.</span><span class=\"n\">DecimalField</span><span class=\"p\">(</span><span class=\"n\">max_digits</span><span class=\"o\">=</span><span class=\"mi\">4</span><span class=\"p\">,</span> <span class=\"n\">decimal_places</span><span class=\"o\">=</span><span class=\"mi\">2</span><span class=\"p\">,</span> <span class=\"n\">localize</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"s-controlling-localization-in-templates\">\n<span id=\"s-topic-l10n-templates\"></span><span id=\"controlling-localization-in-templates\"></span><span id=\"topic-l10n-templates\"></span><h2>Controlling localization in templates<a class=\"headerlink\" href=\"#controlling-localization-in-templates\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Django tries to use a locale specific format whenever it outputs a value in a\ntemplate.</p>\n<p>However, it may not always be appropriate to use localized values \u2013\nfor example, if you\u2019re outputting JavaScript or XML that is designed\nto be machine-readable, you will always want unlocalized values. You\nmay also want to use localization in selected templates, rather than\nusing localization everywhere.</p>\n<p>To allow for fine control over the use of localization, Django\nprovides the <code class=\"docutils literal notranslate\"><span class=\"pre\">l10n</span></code> template library that contains the following\ntags and filters.</p>\n<div class=\"section\" id=\"s-template-tags\">\n<span id=\"template-tags\"></span><h3>Template tags<a class=\"headerlink\" href=\"#template-tags\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<div class=\"section\" id=\"s-localize\">\n<span id=\"s-std-templatetag-localize\"></span><span id=\"s-std:templatetag-localize\"></span><span id=\"localize\"></span><span id=\"std-templatetag-localize\"></span><span id=\"std:templatetag-localize\"></span><h4><code class=\"docutils literal notranslate\"><span class=\"pre\">localize</span></code><a class=\"headerlink\" href=\"#localize\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<p>Enables or disables localization of template variables in the\ncontained block.</p>\n<p>To activate or deactivate localization for a template block, use:</p>\n<div class=\"highlight-html+django notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cp\">{%</span> <span class=\"k\">load</span> <span class=\"nv\">l10n</span> <span class=\"cp\">%}</span>\n\n<span class=\"cp\">{%</span> <span class=\"k\">localize</span> <span class=\"nv\">on</span> <span class=\"cp\">%}</span>\n    <span class=\"cp\">{{</span> <span class=\"nv\">value</span> <span class=\"cp\">}}</span>\n<span class=\"cp\">{%</span> <span class=\"k\">endlocalize</span> <span class=\"cp\">%}</span>\n\n<span class=\"cp\">{%</span> <span class=\"k\">localize</span> <span class=\"nv\">off</span> <span class=\"cp\">%}</span>\n    <span class=\"cp\">{{</span> <span class=\"nv\">value</span> <span class=\"cp\">}}</span>\n<span class=\"cp\">{%</span> <span class=\"k\">endlocalize</span> <span class=\"cp\">%}</span>\n</pre></div>\n</div>\n<p>See <a class=\"reference internal\" href=\"#std-templatefilter-localize\"><code class=\"xref std std-tfilter docutils literal notranslate\"><span class=\"pre\">localize</span></code></a> and <a class=\"reference internal\" href=\"#std-templatefilter-unlocalize\"><code class=\"xref std std-tfilter docutils literal notranslate\"><span class=\"pre\">unlocalize</span></code></a> for template filters that will\ndo the same job on a per-variable basis.</p>\n</div>\n</div>\n<div class=\"section\" id=\"s-template-filters\">\n<span id=\"template-filters\"></span><h3>Template filters<a class=\"headerlink\" href=\"#template-filters\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<div class=\"section\" id=\"s-std-templatefilter-localize\">\n<span id=\"s-std:templatefilter-localize\"></span><span id=\"s-id1\"></span><span id=\"std-templatefilter-localize\"></span><span id=\"std:templatefilter-localize\"></span><span id=\"id1\"></span><h4><code class=\"docutils literal notranslate\"><span class=\"pre\">localize</span></code><a class=\"headerlink\" href=\"#std-templatefilter-localize\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<p>Forces localization of a single value.</p>\n<p>For example:</p>\n<div class=\"highlight-html+django notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cp\">{%</span> <span class=\"k\">load</span> <span class=\"nv\">l10n</span> <span class=\"cp\">%}</span>\n\n<span class=\"cp\">{{</span> <span class=\"nv\">value</span><span class=\"o\">|</span><span class=\"nf\">localize</span> <span class=\"cp\">}}</span>\n</pre></div>\n</div>\n<p>To disable localization on a single value, use <a class=\"reference internal\" href=\"#std-templatefilter-unlocalize\"><code class=\"xref std std-tfilter docutils literal notranslate\"><span class=\"pre\">unlocalize</span></code></a>. To control\nlocalization over a large section of a template, use the <a class=\"reference internal\" href=\"#std-templatetag-localize\"><code class=\"xref std std-ttag docutils literal notranslate\"><span class=\"pre\">localize</span></code></a> template\ntag.</p>\n</div>\n<div class=\"section\" id=\"s-unlocalize\">\n<span id=\"s-std-templatefilter-unlocalize\"></span><span id=\"s-std:templatefilter-unlocalize\"></span><span id=\"unlocalize\"></span><span id=\"std-templatefilter-unlocalize\"></span><span id=\"std:templatefilter-unlocalize\"></span><h4><code class=\"docutils literal notranslate\"><span class=\"pre\">unlocalize</span></code><a class=\"headerlink\" href=\"#unlocalize\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<p>Forces a single value to be printed without localization.</p>\n<p>For example:</p>\n<div class=\"highlight-html+django notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cp\">{%</span> <span class=\"k\">load</span> <span class=\"nv\">l10n</span> <span class=\"cp\">%}</span>\n\n<span class=\"cp\">{{</span> <span class=\"nv\">value</span><span class=\"o\">|</span><span class=\"nf\">unlocalize</span> <span class=\"cp\">}}</span>\n</pre></div>\n</div>\n<p>To force localization of a single value, use <a class=\"reference internal\" href=\"#std-templatefilter-localize\"><code class=\"xref std std-tfilter docutils literal notranslate\"><span class=\"pre\">localize</span></code></a>. To\ncontrol localization over a large section of a template, use the\n<a class=\"reference internal\" href=\"#std-templatetag-localize\"><code class=\"xref std std-ttag docutils literal notranslate\"><span class=\"pre\">localize</span></code></a> template tag.</p>\n<p>Returns a string representation for unlocalized numbers  (<code class=\"docutils literal notranslate\"><span class=\"pre\">int</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">float</span></code>,\nor <code class=\"docutils literal notranslate\"><span class=\"pre\">Decimal</span></code>).</p>\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"s-creating-custom-format-files\">\n<span id=\"s-custom-format-files\"></span><span id=\"creating-custom-format-files\"></span><span id=\"custom-format-files\"></span><h2>Creating custom format files<a class=\"headerlink\" href=\"#creating-custom-format-files\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Django provides format definitions for many locales, but sometimes you might\nwant to create your own, because a format file doesn\u2019t exist for your locale,\nor because you want to overwrite some of the values.</p>\n<p>To use custom formats, specify the path where you\u2019ll place format files\nfirst.  To do that, set your <a class=\"reference internal\" href=\"../../../ref/settings/#std-setting-FORMAT_MODULE_PATH\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">FORMAT_MODULE_PATH</span></code></a> setting to the\npackage where format files will exist, for instance:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">FORMAT_MODULE_PATH</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"s2\">&quot;mysite.formats&quot;</span><span class=\"p\">,</span>\n    <span class=\"s2\">&quot;some_app.formats&quot;</span><span class=\"p\">,</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>Files are not placed directly in this directory, but in a directory named as\nthe locale, and must be named <code class=\"docutils literal notranslate\"><span class=\"pre\">formats.py</span></code>. Be careful not to put sensitive\ninformation in these files as values inside can be exposed if you pass the\nstring to <code class=\"docutils literal notranslate\"><span class=\"pre\">django.utils.formats.get_format()</span></code> (used by the <a class=\"reference internal\" href=\"../../../ref/templates/builtins/#std-templatefilter-date\"><code class=\"xref std std-tfilter docutils literal notranslate\"><span class=\"pre\">date</span></code></a>\ntemplate filter).</p>\n<p>To customize the English formats, a structure like this would be needed:</p>\n<div class=\"highlight-text notranslate\"><div class=\"highlight\"><pre><span></span>mysite/\n    formats/\n        __init__.py\n        en/\n            __init__.py\n            formats.py\n</pre></div>\n</div>\n<p>where <code class=\"file docutils literal notranslate\"><span class=\"pre\">formats.py</span></code> contains custom format definitions. For example:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">THOUSAND_SEPARATOR</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;</span><span class=\"se\">\\xa0</span><span class=\"s2\">&quot;</span>\n</pre></div>\n</div>\n<p>to use a non-breaking space (Unicode <code class=\"docutils literal notranslate\"><span class=\"pre\">00A0</span></code>) as a thousand separator,\ninstead of the default for English, a comma.</p>\n</div>\n<div class=\"section\" id=\"s-limitations-of-the-provided-locale-formats\">\n<span id=\"limitations-of-the-provided-locale-formats\"></span><h2>Limitations of the provided locale formats<a class=\"headerlink\" href=\"#limitations-of-the-provided-locale-formats\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Some locales use context-sensitive formats for numbers, which Django\u2019s\nlocalization system cannot handle automatically.</p>\n<div class=\"section\" id=\"s-switzerland-german\">\n<span id=\"switzerland-german\"></span><h3>Switzerland (German)<a class=\"headerlink\" href=\"#switzerland-german\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The Swiss number formatting depends on the type of number that is being\nformatted. For monetary values, a comma is used as the thousand separator and\na decimal point for the decimal separator. For all other numbers, a comma is\nused as decimal separator and a space as thousand separator. The locale format\nprovided by Django uses the generic separators, a comma for decimal and a space\nfor thousand separators.</p>\n</div>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["topics/i18n/timezones", "Time zones", "N", "next"], ["topics/i18n/translation", "Translation", "P", "previous"]], "sourcename": "topics/i18n/formatting.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Format localization</a><ul>\n<li><a class=\"reference internal\" href=\"#overview\">Overview</a></li>\n<li><a class=\"reference internal\" href=\"#locale-aware-input-in-forms\">Locale aware input in forms</a></li>\n<li><a class=\"reference internal\" href=\"#controlling-localization-in-templates\">Controlling localization in templates</a><ul>\n<li><a class=\"reference internal\" href=\"#template-tags\">Template tags</a><ul>\n<li><a class=\"reference internal\" href=\"#localize\"><code class=\"docutils literal notranslate\"><span class=\"pre\">localize</span></code></a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#template-filters\">Template filters</a><ul>\n<li><a class=\"reference internal\" href=\"#std-templatefilter-localize\"><code class=\"docutils literal notranslate\"><span class=\"pre\">localize</span></code></a></li>\n<li><a class=\"reference internal\" href=\"#unlocalize\"><code class=\"docutils literal notranslate\"><span class=\"pre\">unlocalize</span></code></a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#creating-custom-format-files\">Creating custom format files</a></li>\n<li><a class=\"reference internal\" href=\"#limitations-of-the-provided-locale-formats\">Limitations of the provided locale formats</a><ul>\n<li><a class=\"reference internal\" href=\"#switzerland-german\">Switzerland (German)</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".txt", "current_page_name": "topics/i18n/formatting", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}
