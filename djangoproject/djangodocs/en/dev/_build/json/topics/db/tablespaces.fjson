{"parents": [{"link": "../../", "title": "Using Django"}, {"link": "../", "title": "Models and databases"}], "prev": {"link": "../multi-db/", "title": "Multiple databases"}, "next": {"link": "../optimization/", "title": "Database access optimization"}, "title": "Tablespaces", "meta": {}, "body": "<div class=\"section\" id=\"s-tablespaces\">\n<span id=\"tablespaces\"></span><h1>Tablespaces<a class=\"headerlink\" href=\"#tablespaces\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>A common paradigm for optimizing performance in database systems is the use of\n<a class=\"reference external\" href=\"https://en.wikipedia.org/wiki/Tablespace\">tablespaces</a> to organize disk layout.</p>\n<div class=\"admonition warning\">\n<p class=\"first admonition-title\">Warning</p>\n<p class=\"last\">Django does not create the tablespaces for you. Please refer to your\ndatabase engine\u2019s documentation for details on creating and managing\ntablespaces.</p>\n</div>\n<div class=\"section\" id=\"s-declaring-tablespaces-for-tables\">\n<span id=\"declaring-tablespaces-for-tables\"></span><h2>Declaring tablespaces for tables<a class=\"headerlink\" href=\"#declaring-tablespaces-for-tables\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>A tablespace can be specified for the table generated by a model by supplying\nthe <a class=\"reference internal\" href=\"../../../ref/models/options/#django.db.models.Options.db_tablespace\" title=\"django.db.models.Options.db_tablespace\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">db_tablespace</span></code></a> option inside the model\u2019s\n<code class=\"docutils literal notranslate\"><span class=\"pre\">class</span> <span class=\"pre\">Meta</span></code>. This option also affects tables automatically created for\n<a class=\"reference internal\" href=\"../../../ref/models/fields/#django.db.models.ManyToManyField\" title=\"django.db.models.ManyToManyField\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">ManyToManyField</span></code></a>s in the model.</p>\n<p>You can use the <a class=\"reference internal\" href=\"../../../ref/settings/#std-setting-DEFAULT_TABLESPACE\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">DEFAULT_TABLESPACE</span></code></a> setting to specify a default value\nfor <a class=\"reference internal\" href=\"../../../ref/models/options/#django.db.models.Options.db_tablespace\" title=\"django.db.models.Options.db_tablespace\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">db_tablespace</span></code></a>. This is useful for setting\na tablespace for the built-in Django apps and other applications whose code you\ncannot control.</p>\n</div>\n<div class=\"section\" id=\"s-declaring-tablespaces-for-indexes\">\n<span id=\"declaring-tablespaces-for-indexes\"></span><h2>Declaring tablespaces for indexes<a class=\"headerlink\" href=\"#declaring-tablespaces-for-indexes\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>You can pass the <a class=\"reference internal\" href=\"../../../ref/models/indexes/#django.db.models.Index.db_tablespace\" title=\"django.db.models.Index.db_tablespace\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">db_tablespace</span></code></a> option to an\n<code class=\"docutils literal notranslate\"><span class=\"pre\">Index</span></code> constructor to specify the name of a tablespace to use for the index.\nFor single field indexes, you can pass the\n<a class=\"reference internal\" href=\"../../../ref/models/fields/#django.db.models.Field.db_tablespace\" title=\"django.db.models.Field.db_tablespace\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">db_tablespace</span></code></a> option to a <code class=\"docutils literal notranslate\"><span class=\"pre\">Field</span></code> constructor\nto specify an alternate tablespace for the field\u2019s column index. If the column\ndoesn\u2019t have an index, the option is ignored.</p>\n<p>You can use the <a class=\"reference internal\" href=\"../../../ref/settings/#std-setting-DEFAULT_INDEX_TABLESPACE\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">DEFAULT_INDEX_TABLESPACE</span></code></a> setting to specify\na default value for <a class=\"reference internal\" href=\"../../../ref/models/fields/#django.db.models.Field.db_tablespace\" title=\"django.db.models.Field.db_tablespace\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">db_tablespace</span></code></a>.</p>\n<p>If <a class=\"reference internal\" href=\"../../../ref/models/fields/#django.db.models.Field.db_tablespace\" title=\"django.db.models.Field.db_tablespace\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">db_tablespace</span></code></a> isn\u2019t specified and you didn\u2019t\nset <a class=\"reference internal\" href=\"../../../ref/settings/#std-setting-DEFAULT_INDEX_TABLESPACE\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">DEFAULT_INDEX_TABLESPACE</span></code></a>, the index is created in the same\ntablespace as the tables.</p>\n</div>\n<div class=\"section\" id=\"s-an-example\">\n<span id=\"an-example\"></span><h2>An example<a class=\"headerlink\" href=\"#an-example\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">class</span> <span class=\"nc\">TablespaceExample</span><span class=\"p\">(</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Model</span><span class=\"p\">):</span>\n    <span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">30</span><span class=\"p\">,</span> <span class=\"n\">db_index</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">,</span> <span class=\"n\">db_tablespace</span><span class=\"o\">=</span><span class=\"s2\">&quot;indexes&quot;</span><span class=\"p\">)</span>\n    <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">255</span><span class=\"p\">,</span> <span class=\"n\">db_index</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n    <span class=\"n\">shortcut</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">CharField</span><span class=\"p\">(</span><span class=\"n\">max_length</span><span class=\"o\">=</span><span class=\"mi\">7</span><span class=\"p\">)</span>\n    <span class=\"n\">edges</span> <span class=\"o\">=</span> <span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">ManyToManyField</span><span class=\"p\">(</span><span class=\"n\">to</span><span class=\"o\">=</span><span class=\"s2\">&quot;self&quot;</span><span class=\"p\">,</span> <span class=\"n\">db_tablespace</span><span class=\"o\">=</span><span class=\"s2\">&quot;indexes&quot;</span><span class=\"p\">)</span>\n\n    <span class=\"k\">class</span> <span class=\"nc\">Meta</span><span class=\"p\">:</span>\n        <span class=\"n\">db_tablespace</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;tables&quot;</span>\n        <span class=\"n\">indexes</span> <span class=\"o\">=</span> <span class=\"p\">[</span><span class=\"n\">models</span><span class=\"o\">.</span><span class=\"n\">Index</span><span class=\"p\">(</span><span class=\"n\">fields</span><span class=\"o\">=</span><span class=\"p\">[</span><span class=\"s2\">&quot;shortcut&quot;</span><span class=\"p\">],</span> <span class=\"n\">db_tablespace</span><span class=\"o\">=</span><span class=\"s2\">&quot;other_indexes&quot;</span><span class=\"p\">)]</span>\n</pre></div>\n</div>\n<p>In this example, the tables generated by the <code class=\"docutils literal notranslate\"><span class=\"pre\">TablespaceExample</span></code> model (i.e.\nthe model table and the many-to-many table) would be stored in the <code class=\"docutils literal notranslate\"><span class=\"pre\">tables</span></code>\ntablespace. The index for the name field and the indexes on the many-to-many\ntable would be stored in the <code class=\"docutils literal notranslate\"><span class=\"pre\">indexes</span></code> tablespace. The <code class=\"docutils literal notranslate\"><span class=\"pre\">data</span></code> field would\nalso generate an index, but no tablespace for it is specified, so it would be\nstored in the model tablespace <code class=\"docutils literal notranslate\"><span class=\"pre\">tables</span></code> by default. The index for the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">shortcut</span></code> field would be stored in the <code class=\"docutils literal notranslate\"><span class=\"pre\">other_indexes</span></code> tablespace.</p>\n</div>\n<div class=\"section\" id=\"s-database-support\">\n<span id=\"database-support\"></span><h2>Database support<a class=\"headerlink\" href=\"#database-support\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>PostgreSQL and Oracle support tablespaces. SQLite, MariaDB and MySQL don\u2019t.</p>\n<p>When you use a backend that lacks support for tablespaces, Django ignores all\ntablespace-related options.</p>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["topics/db/optimization", "Database access optimization", "N", "next"], ["topics/db/multi-db", "Multiple databases", "P", "previous"]], "sourcename": "topics/db/tablespaces.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Tablespaces</a><ul>\n<li><a class=\"reference internal\" href=\"#declaring-tablespaces-for-tables\">Declaring tablespaces for tables</a></li>\n<li><a class=\"reference internal\" href=\"#declaring-tablespaces-for-indexes\">Declaring tablespaces for indexes</a></li>\n<li><a class=\"reference internal\" href=\"#an-example\">An example</a></li>\n<li><a class=\"reference internal\" href=\"#database-support\">Database support</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".txt", "current_page_name": "topics/db/tablespaces", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}