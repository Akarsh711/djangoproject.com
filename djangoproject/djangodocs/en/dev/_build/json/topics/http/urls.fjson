{"parents": [{"link": "../../", "title": "Using Django"}, {"link": "../", "title": "Handling HTTP requests"}], "prev": {"link": "../", "title": "Handling HTTP requests"}, "next": {"link": "../views/", "title": "Writing views"}, "title": "URL dispatcher", "meta": {}, "body": "<div class=\"section\" id=\"s-url-dispatcher\">\n<span id=\"url-dispatcher\"></span><h1>URL dispatcher<a class=\"headerlink\" href=\"#url-dispatcher\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>A clean, elegant URL scheme is an important detail in a high-quality web\napplication. Django lets you design URLs however you want, with no framework\nlimitations.</p>\n<p>See <a class=\"reference external\" href=\"https://www.w3.org/Provider/Style/URI\">Cool URIs don\u2019t change</a>, by World Wide Web creator Tim Berners-Lee, for\nexcellent arguments on why URLs should be clean and usable.</p>\n<div class=\"section\" id=\"s-overview\">\n<span id=\"overview\"></span><h2>Overview<a class=\"headerlink\" href=\"#overview\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>To design URLs for an app, you create a Python module informally called a\n<strong>URLconf</strong> (URL configuration). This module is pure Python code and is a\nmapping between URL path expressions to Python functions (your views).</p>\n<p>This mapping can be as short or as long as needed. It can reference other\nmappings. And, because it\u2019s pure Python code, it can be constructed\ndynamically.</p>\n<p>Django also provides a way to translate URLs according to the active\nlanguage. See the <a class=\"reference internal\" href=\"../../i18n/translation/#url-internationalization\"><span class=\"std std-ref\">internationalization documentation</span></a> for more information.</p>\n</div>\n<div class=\"section\" id=\"s-how-django-processes-a-request\">\n<span id=\"s-id1\"></span><span id=\"how-django-processes-a-request\"></span><span id=\"id1\"></span><h2>How Django processes a request<a class=\"headerlink\" href=\"#how-django-processes-a-request\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>When a user requests a page from your Django-powered site, this is the\nalgorithm the system follows to determine which Python code to execute:</p>\n<ol class=\"arabic simple\">\n<li>Django determines the root URLconf module to use. Ordinarily,\nthis is the value of the <a class=\"reference internal\" href=\"../../../ref/settings/#std-setting-ROOT_URLCONF\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">ROOT_URLCONF</span></code></a> setting, but if the incoming\n<code class=\"docutils literal notranslate\"><span class=\"pre\">HttpRequest</span></code> object has a <a class=\"reference internal\" href=\"../../../ref/request-response/#django.http.HttpRequest.urlconf\" title=\"django.http.HttpRequest.urlconf\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">urlconf</span></code></a>\nattribute (set by middleware), its value will be used in place of the\n<a class=\"reference internal\" href=\"../../../ref/settings/#std-setting-ROOT_URLCONF\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">ROOT_URLCONF</span></code></a> setting.</li>\n<li>Django loads that Python module and looks for the variable\n<code class=\"docutils literal notranslate\"><span class=\"pre\">urlpatterns</span></code>. This should be a <a class=\"reference external\" href=\"https://docs.python.org/3/glossary.html#term-sequence\" title=\"(in Python v3.11)\"><span class=\"xref std std-term\">sequence</span></a> of\n<a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.path\" title=\"django.urls.path\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">django.urls.path()</span></code></a> and/or <a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.re_path\" title=\"django.urls.re_path\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">django.urls.re_path()</span></code></a> instances.</li>\n<li>Django runs through each URL pattern, in order, and stops at the first\none that matches the requested URL, matching against\n<a class=\"reference internal\" href=\"../../../ref/request-response/#django.http.HttpRequest.path_info\" title=\"django.http.HttpRequest.path_info\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">path_info</span></code></a>.</li>\n<li>Once one of the URL patterns matches, Django imports and calls the given\nview, which is a Python function (or a <a class=\"reference internal\" href=\"../../class-based-views/\"><span class=\"doc\">class-based view</span></a>). The view gets passed the following\narguments:<ul>\n<li>An instance of <a class=\"reference internal\" href=\"../../../ref/request-response/#django.http.HttpRequest\" title=\"django.http.HttpRequest\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">HttpRequest</span></code></a>.</li>\n<li>If the matched URL pattern contained no named groups, then the\nmatches from the regular expression are provided as positional arguments.</li>\n<li>The keyword arguments are made up of any named parts matched by the\npath expression that are provided, overridden by any arguments specified\nin the optional <code class=\"docutils literal notranslate\"><span class=\"pre\">kwargs</span></code> argument to <a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.path\" title=\"django.urls.path\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">django.urls.path()</span></code></a> or\n<a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.re_path\" title=\"django.urls.re_path\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">django.urls.re_path()</span></code></a>.</li>\n</ul>\n</li>\n<li>If no URL pattern matches, or if an exception is raised during any\npoint in this process, Django invokes an appropriate\nerror-handling view. See <a class=\"reference internal\" href=\"#error-handling\">Error handling</a> below.</li>\n</ol>\n</div>\n<div class=\"section\" id=\"s-example\">\n<span id=\"example\"></span><h2>Example<a class=\"headerlink\" href=\"#example\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Here\u2019s a sample URLconf:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">path</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">views</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;articles/2003/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">special_case_2003</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;articles/&lt;int:year&gt;/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">year_archive</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;articles/&lt;int:year&gt;/&lt;int:month&gt;/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">month_archive</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;articles/&lt;int:year&gt;/&lt;int:month&gt;/&lt;slug:slug&gt;/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">article_detail</span><span class=\"p\">),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>Notes:</p>\n<ul class=\"simple\">\n<li>To capture a value from the URL, use angle brackets.</li>\n<li>Captured values can optionally include a converter type. For example, use\n<code class=\"docutils literal notranslate\"><span class=\"pre\">&lt;int:name&gt;</span></code> to capture an integer parameter. If a converter isn\u2019t included,\nany string, excluding a <code class=\"docutils literal notranslate\"><span class=\"pre\">/</span></code> character, is matched.</li>\n<li>There\u2019s no need to add a leading slash, because every URL has that. For\nexample, it\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">articles</span></code>, not <code class=\"docutils literal notranslate\"><span class=\"pre\">/articles</span></code>.</li>\n</ul>\n<p>Example requests:</p>\n<ul class=\"simple\">\n<li>A request to <code class=\"docutils literal notranslate\"><span class=\"pre\">/articles/2005/03/</span></code> would match the third entry in the\nlist. Django would call the function\n<code class=\"docutils literal notranslate\"><span class=\"pre\">views.month_archive(request,</span> <span class=\"pre\">year=2005,</span> <span class=\"pre\">month=3)</span></code>.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">/articles/2003/</span></code> would match the first pattern in the list, not the\nsecond one, because the patterns are tested in order, and the first one\nis the first test to pass. Feel free to exploit the ordering to insert\nspecial cases like this. Here, Django would call the function\n<code class=\"docutils literal notranslate\"><span class=\"pre\">views.special_case_2003(request)</span></code></li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">/articles/2003</span></code> would not match any of these patterns, because each\npattern requires that the URL end with a slash.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">/articles/2003/03/building-a-django-site/</span></code> would match the final\npattern. Django would call the function\n<code class=\"docutils literal notranslate\"><span class=\"pre\">views.article_detail(request,</span> <span class=\"pre\">year=2003,</span> <span class=\"pre\">month=3,</span> <span class=\"pre\">slug=&quot;building-a-django-site&quot;)</span></code>.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-path-converters\">\n<span id=\"path-converters\"></span><h2>Path converters<a class=\"headerlink\" href=\"#path-converters\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The following path converters are available by default:</p>\n<ul class=\"simple\">\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">str</span></code> - Matches any non-empty string, excluding the path separator, <code class=\"docutils literal notranslate\"><span class=\"pre\">'/'</span></code>.\nThis is the default if a converter isn\u2019t included in the expression.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">int</span></code> - Matches zero or any positive integer. Returns an <code class=\"docutils literal notranslate\"><span class=\"pre\">int</span></code>.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">slug</span></code> - Matches any slug string consisting of ASCII letters or numbers,\nplus the hyphen and underscore characters. For example,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">building-your-1st-django-site</span></code>.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">uuid</span></code> - Matches a formatted UUID. To prevent multiple URLs from mapping to\nthe same page, dashes must be included and letters must be lowercase. For\nexample, <code class=\"docutils literal notranslate\"><span class=\"pre\">075194d3-6885-417e-a8a8-6c931e272f00</span></code>. Returns a\n<a class=\"reference external\" href=\"https://docs.python.org/3/library/uuid.html#uuid.UUID\" title=\"(in Python v3.11)\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">UUID</span></code></a> instance.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">path</span></code> - Matches any non-empty string, including the path separator,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">'/'</span></code>. This allows you to match against a complete URL path rather than\na segment of a URL path as with <code class=\"docutils literal notranslate\"><span class=\"pre\">str</span></code>.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-registering-custom-path-converters\">\n<span id=\"s-id2\"></span><span id=\"registering-custom-path-converters\"></span><span id=\"id2\"></span><h2>Registering custom path converters<a class=\"headerlink\" href=\"#registering-custom-path-converters\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>For more complex matching requirements, you can define your own path converters.</p>\n<p>A converter is a class that includes the following:</p>\n<ul class=\"simple\">\n<li>A <code class=\"docutils literal notranslate\"><span class=\"pre\">regex</span></code> class attribute, as a string.</li>\n<li>A <code class=\"docutils literal notranslate\"><span class=\"pre\">to_python(self,</span> <span class=\"pre\">value)</span></code> method, which handles converting the matched\nstring into the type that should be passed to the view function. It should\nraise <code class=\"docutils literal notranslate\"><span class=\"pre\">ValueError</span></code> if it can\u2019t convert the given value. A <code class=\"docutils literal notranslate\"><span class=\"pre\">ValueError</span></code> is\ninterpreted as no match and as a consequence a 404 response is sent to the\nuser unless another URL pattern matches.</li>\n<li>A <code class=\"docutils literal notranslate\"><span class=\"pre\">to_url(self,</span> <span class=\"pre\">value)</span></code> method, which handles converting the Python type\ninto a string to be used in the URL. It should raise <code class=\"docutils literal notranslate\"><span class=\"pre\">ValueError</span></code> if it\ncan\u2019t convert the given value. A <code class=\"docutils literal notranslate\"><span class=\"pre\">ValueError</span></code> is interpreted as no match\nand as a consequence <a class=\"reference internal\" href=\"../../../ref/urlresolvers/#django.urls.reverse\" title=\"django.urls.reverse\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">reverse()</span></code></a> will raise\n<a class=\"reference internal\" href=\"../../../ref/exceptions/#django.urls.NoReverseMatch\" title=\"django.urls.NoReverseMatch\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">NoReverseMatch</span></code></a> unless another URL pattern matches.</li>\n</ul>\n<p>For example:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"k\">class</span> <span class=\"nc\">FourDigitYearConverter</span><span class=\"p\">:</span>\n    <span class=\"n\">regex</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;[0-9]</span><span class=\"si\">{4}</span><span class=\"s2\">&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">to_python</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"nb\">int</span><span class=\"p\">(</span><span class=\"n\">value</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">to_url</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">value</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"s2\">&quot;</span><span class=\"si\">%04d</span><span class=\"s2\">&quot;</span> <span class=\"o\">%</span> <span class=\"n\">value</span>\n</pre></div>\n</div>\n<p>Register custom converter classes in your URLconf using\n<a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.register_converter\" title=\"django.urls.register_converter\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">register_converter()</span></code></a>:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">path</span><span class=\"p\">,</span> <span class=\"n\">register_converter</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">converters</span><span class=\"p\">,</span> <span class=\"n\">views</span>\n\n<span class=\"n\">register_converter</span><span class=\"p\">(</span><span class=\"n\">converters</span><span class=\"o\">.</span><span class=\"n\">FourDigitYearConverter</span><span class=\"p\">,</span> <span class=\"s2\">&quot;yyyy&quot;</span><span class=\"p\">)</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;articles/2003/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">special_case_2003</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;articles/&lt;yyyy:year&gt;/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">year_archive</span><span class=\"p\">),</span>\n    <span class=\"o\">...</span><span class=\"p\">,</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"s-using-regular-expressions\">\n<span id=\"using-regular-expressions\"></span><h2>Using regular expressions<a class=\"headerlink\" href=\"#using-regular-expressions\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>If the paths and converters syntax isn\u2019t sufficient for defining your URL\npatterns, you can also use regular expressions. To do so, use\n<a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.re_path\" title=\"django.urls.re_path\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">re_path()</span></code></a> instead of <a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.path\" title=\"django.urls.path\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">path()</span></code></a>.</p>\n<p>In Python regular expressions, the syntax for named regular expression groups\nis <code class=\"docutils literal notranslate\"><span class=\"pre\">(?P&lt;name&gt;pattern)</span></code>, where <code class=\"docutils literal notranslate\"><span class=\"pre\">name</span></code> is the name of the group and\n<code class=\"docutils literal notranslate\"><span class=\"pre\">pattern</span></code> is some pattern to match.</p>\n<p>Here\u2019s the example URLconf from earlier, rewritten using regular expressions:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">path</span><span class=\"p\">,</span> <span class=\"n\">re_path</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">views</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;articles/2003/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">special_case_2003</span><span class=\"p\">),</span>\n    <span class=\"n\">re_path</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s2\">&quot;^articles/(?P&lt;year&gt;[0-9]</span><span class=\"si\">{4}</span><span class=\"s2\">)/$&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">year_archive</span><span class=\"p\">),</span>\n    <span class=\"n\">re_path</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s2\">&quot;^articles/(?P&lt;year&gt;[0-9]</span><span class=\"si\">{4}</span><span class=\"s2\">)/(?P&lt;month&gt;[0-9]</span><span class=\"si\">{2}</span><span class=\"s2\">)/$&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">month_archive</span><span class=\"p\">),</span>\n    <span class=\"n\">re_path</span><span class=\"p\">(</span>\n        <span class=\"sa\">r</span><span class=\"s2\">&quot;^articles/(?P&lt;year&gt;[0-9]</span><span class=\"si\">{4}</span><span class=\"s2\">)/(?P&lt;month&gt;[0-9]</span><span class=\"si\">{2}</span><span class=\"s2\">)/(?P&lt;slug&gt;[\\w-]+)/$&quot;</span><span class=\"p\">,</span>\n        <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">article_detail</span><span class=\"p\">,</span>\n    <span class=\"p\">),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>This accomplishes roughly the same thing as the previous example, except:</p>\n<ul class=\"simple\">\n<li>The exact URLs that will match are slightly more constrained. For example,\nthe year 10000 will no longer match since the year integers are constrained\nto be exactly four digits long.</li>\n<li>Each captured argument is sent to the view as a string, regardless of what\nsort of match the regular expression makes.</li>\n</ul>\n<p>When switching from using <a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.path\" title=\"django.urls.path\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">path()</span></code></a> to\n<a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.re_path\" title=\"django.urls.re_path\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">re_path()</span></code></a> or vice versa, it\u2019s particularly important to be\naware that the type of the view arguments may change, and so you may need to\nadapt your views.</p>\n<div class=\"section\" id=\"s-using-unnamed-regular-expression-groups\">\n<span id=\"using-unnamed-regular-expression-groups\"></span><h3>Using unnamed regular expression groups<a class=\"headerlink\" href=\"#using-unnamed-regular-expression-groups\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>As well as the named group syntax, e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">(?P&lt;year&gt;[0-9]{4})</span></code>, you can\nalso use the shorter unnamed group, e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">([0-9]{4})</span></code>.</p>\n<p>This usage isn\u2019t particularly recommended as it makes it easier to accidentally\nintroduce errors between the intended meaning of a match and the arguments\nof the view.</p>\n<p>In either case, using only one style within a given regex is recommended. When\nboth styles are mixed, any unnamed groups are ignored and only named groups are\npassed to the view function.</p>\n</div>\n<div class=\"section\" id=\"s-nested-arguments\">\n<span id=\"nested-arguments\"></span><h3>Nested arguments<a class=\"headerlink\" href=\"#nested-arguments\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Regular expressions allow nested arguments, and Django will resolve them and\npass them to the view. When reversing, Django will try to fill in all outer\ncaptured arguments, ignoring any nested captured arguments. Consider the\nfollowing URL patterns which optionally take a page argument:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">re_path</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">re_path</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s2\">&quot;^blog/(page-([0-9]+)/)?$&quot;</span><span class=\"p\">,</span> <span class=\"n\">blog_articles</span><span class=\"p\">),</span>  <span class=\"c1\"># bad</span>\n    <span class=\"n\">re_path</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s2\">&quot;^comments/(?:page-(?P&lt;page_number&gt;[0-9]+)/)?$&quot;</span><span class=\"p\">,</span> <span class=\"n\">comments</span><span class=\"p\">),</span>  <span class=\"c1\"># good</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>Both patterns use nested arguments and will resolve: for example,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">blog/page-2/</span></code> will result in a match to <code class=\"docutils literal notranslate\"><span class=\"pre\">blog_articles</span></code> with two\npositional arguments: <code class=\"docutils literal notranslate\"><span class=\"pre\">page-2/</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">2</span></code>. The second pattern for\n<code class=\"docutils literal notranslate\"><span class=\"pre\">comments</span></code> will match <code class=\"docutils literal notranslate\"><span class=\"pre\">comments/page-2/</span></code> with keyword argument\n<code class=\"docutils literal notranslate\"><span class=\"pre\">page_number</span></code> set to 2. The outer argument in this case is a non-capturing\nargument <code class=\"docutils literal notranslate\"><span class=\"pre\">(?:...)</span></code>.</p>\n<p>The <code class=\"docutils literal notranslate\"><span class=\"pre\">blog_articles</span></code> view needs the outermost captured argument to be reversed,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">page-2/</span></code> or no arguments in this case, while <code class=\"docutils literal notranslate\"><span class=\"pre\">comments</span></code> can be reversed\nwith either no arguments or a value for <code class=\"docutils literal notranslate\"><span class=\"pre\">page_number</span></code>.</p>\n<p>Nested captured arguments create a strong coupling between the view arguments\nand the URL as illustrated by <code class=\"docutils literal notranslate\"><span class=\"pre\">blog_articles</span></code>: the view receives part of the\nURL (<code class=\"docutils literal notranslate\"><span class=\"pre\">page-2/</span></code>) instead of only the value the view is interested in. This\ncoupling is even more pronounced when reversing, since to reverse the view we\nneed to pass the piece of URL instead of the page number.</p>\n<p>As a rule of thumb, only capture the values the view needs to work with and\nuse non-capturing arguments when the regular expression needs an argument but\nthe view ignores it.</p>\n</div>\n</div>\n<div class=\"section\" id=\"s-what-the-urlconf-searches-against\">\n<span id=\"what-the-urlconf-searches-against\"></span><h2>What the URLconf searches against<a class=\"headerlink\" href=\"#what-the-urlconf-searches-against\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The URLconf searches against the requested URL, as a normal Python string. This\ndoes not include GET or POST parameters, or the domain name.</p>\n<p>For example, in a request to <code class=\"docutils literal notranslate\"><span class=\"pre\">https://www.example.com/myapp/</span></code>, the URLconf\nwill look for <code class=\"docutils literal notranslate\"><span class=\"pre\">myapp/</span></code>.</p>\n<p>In a request to <code class=\"docutils literal notranslate\"><span class=\"pre\">https://www.example.com/myapp/?page=3</span></code>, the URLconf will look\nfor <code class=\"docutils literal notranslate\"><span class=\"pre\">myapp/</span></code>.</p>\n<p>The URLconf doesn\u2019t look at the request method. In other words, all request\nmethods \u2013 <code class=\"docutils literal notranslate\"><span class=\"pre\">POST</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">GET</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">HEAD</span></code>, etc. \u2013 will be routed to the same\nfunction for the same URL.</p>\n</div>\n<div class=\"section\" id=\"s-specifying-defaults-for-view-arguments\">\n<span id=\"specifying-defaults-for-view-arguments\"></span><h2>Specifying defaults for view arguments<a class=\"headerlink\" href=\"#specifying-defaults-for-view-arguments\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>A convenient trick is to specify default parameters for your views\u2019 arguments.\nHere\u2019s an example URLconf and view:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># URLconf</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">path</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">views</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;blog/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">page</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;blog/page&lt;int:num&gt;/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">page</span><span class=\"p\">),</span>\n<span class=\"p\">]</span>\n\n\n<span class=\"c1\"># View (in blog/views.py)</span>\n<span class=\"k\">def</span> <span class=\"nf\">page</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"n\">num</span><span class=\"o\">=</span><span class=\"mi\">1</span><span class=\"p\">):</span>\n    <span class=\"c1\"># Output the appropriate page of blog entries, according to num.</span>\n    <span class=\"o\">...</span>\n</pre></div>\n</div>\n<p>In the above example, both URL patterns point to the same view \u2013\n<code class=\"docutils literal notranslate\"><span class=\"pre\">views.page</span></code> \u2013 but the first pattern doesn\u2019t capture anything from the\nURL. If the first pattern matches, the <code class=\"docutils literal notranslate\"><span class=\"pre\">page()</span></code> function will use its\ndefault argument for <code class=\"docutils literal notranslate\"><span class=\"pre\">num</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">1</span></code>. If the second pattern matches,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">page()</span></code> will use whatever <code class=\"docutils literal notranslate\"><span class=\"pre\">num</span></code> value was captured.</p>\n</div>\n<div class=\"section\" id=\"s-performance\">\n<span id=\"performance\"></span><h2>Performance<a class=\"headerlink\" href=\"#performance\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Django processes regular expressions in the <code class=\"docutils literal notranslate\"><span class=\"pre\">urlpatterns</span></code> list which is\ncompiled the first time it\u2019s accessed. Subsequent requests use the cached\nconfiguration via the URL resolver.</p>\n</div>\n<div class=\"section\" id=\"s-syntax-of-the-urlpatterns-variable\">\n<span id=\"syntax-of-the-urlpatterns-variable\"></span><h2>Syntax of the <code class=\"docutils literal notranslate\"><span class=\"pre\">urlpatterns</span></code> variable<a class=\"headerlink\" href=\"#syntax-of-the-urlpatterns-variable\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">urlpatterns</span></code> should be a <a class=\"reference external\" href=\"https://docs.python.org/3/glossary.html#term-sequence\" title=\"(in Python v3.11)\"><span class=\"xref std std-term\">sequence</span></a> of <a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.path\" title=\"django.urls.path\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">path()</span></code></a>\nand/or <a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.re_path\" title=\"django.urls.re_path\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">re_path()</span></code></a> instances.</p>\n</div>\n<div class=\"section\" id=\"s-error-handling\">\n<span id=\"error-handling\"></span><h2>Error handling<a class=\"headerlink\" href=\"#error-handling\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>When Django can\u2019t find a match for the requested URL, or when an exception is\nraised, Django invokes an error-handling view.</p>\n<p>The views to use for these cases are specified by four variables. Their\ndefault values should suffice for most projects, but further customization is\npossible by overriding their default values.</p>\n<p>See the documentation on <a class=\"reference internal\" href=\"../views/#customizing-error-views\"><span class=\"std std-ref\">customizing error views</span></a> for the full details.</p>\n<p>Such values can be set in your root URLconf. Setting these variables in any\nother URLconf will have no effect.</p>\n<p>Values must be callables, or strings representing the full Python import path\nto the view that should be called to handle the error condition at hand.</p>\n<p>The variables are:</p>\n<ul class=\"simple\">\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">handler400</span></code> \u2013 See <a class=\"reference internal\" href=\"../../../ref/urls/#django.conf.urls.handler400\" title=\"django.conf.urls.handler400\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">django.conf.urls.handler400</span></code></a>.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">handler403</span></code> \u2013 See <a class=\"reference internal\" href=\"../../../ref/urls/#django.conf.urls.handler403\" title=\"django.conf.urls.handler403\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">django.conf.urls.handler403</span></code></a>.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">handler404</span></code> \u2013 See <a class=\"reference internal\" href=\"../../../ref/urls/#django.conf.urls.handler404\" title=\"django.conf.urls.handler404\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">django.conf.urls.handler404</span></code></a>.</li>\n<li><code class=\"docutils literal notranslate\"><span class=\"pre\">handler500</span></code> \u2013 See <a class=\"reference internal\" href=\"../../../ref/urls/#django.conf.urls.handler500\" title=\"django.conf.urls.handler500\"><code class=\"xref py py-data docutils literal notranslate\"><span class=\"pre\">django.conf.urls.handler500</span></code></a>.</li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-including-other-urlconfs\">\n<span id=\"s-id3\"></span><span id=\"including-other-urlconfs\"></span><span id=\"id3\"></span><h2>Including other URLconfs<a class=\"headerlink\" href=\"#including-other-urlconfs\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>At any point, your <code class=\"docutils literal notranslate\"><span class=\"pre\">urlpatterns</span></code> can \u201cinclude\u201d other URLconf modules. This\nessentially \u201croots\u201d a set of URLs below other ones.</p>\n<p>For example, here\u2019s an excerpt of the URLconf for the <a class=\"reference external\" href=\"https://www.djangoproject.com/\">Django website</a>\nitself. It includes a number of other URLconfs:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">include</span><span class=\"p\">,</span> <span class=\"n\">path</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"c1\"># ... snip ...</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;community/&quot;</span><span class=\"p\">,</span> <span class=\"n\">include</span><span class=\"p\">(</span><span class=\"s2\">&quot;aggregator.urls&quot;</span><span class=\"p\">)),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;contact/&quot;</span><span class=\"p\">,</span> <span class=\"n\">include</span><span class=\"p\">(</span><span class=\"s2\">&quot;contact.urls&quot;</span><span class=\"p\">)),</span>\n    <span class=\"c1\"># ... snip ...</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>Whenever Django encounters <a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.include\" title=\"django.urls.include\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">include()</span></code></a>, it chops off\nwhatever part of the URL matched up to that point and sends the remaining\nstring to the included URLconf for further processing.</p>\n<p>Another possibility is to include additional URL patterns by using a list of\n<a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.path\" title=\"django.urls.path\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">path()</span></code></a> instances. For example, consider this URLconf:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">include</span><span class=\"p\">,</span> <span class=\"n\">path</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">apps.main</span> <span class=\"kn\">import</span> <span class=\"n\">views</span> <span class=\"k\">as</span> <span class=\"n\">main_views</span>\n<span class=\"kn\">from</span> <span class=\"nn\">credit</span> <span class=\"kn\">import</span> <span class=\"n\">views</span> <span class=\"k\">as</span> <span class=\"n\">credit_views</span>\n\n<span class=\"n\">extra_patterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;reports/&quot;</span><span class=\"p\">,</span> <span class=\"n\">credit_views</span><span class=\"o\">.</span><span class=\"n\">report</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;reports/&lt;int:id&gt;/&quot;</span><span class=\"p\">,</span> <span class=\"n\">credit_views</span><span class=\"o\">.</span><span class=\"n\">report</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;charge/&quot;</span><span class=\"p\">,</span> <span class=\"n\">credit_views</span><span class=\"o\">.</span><span class=\"n\">charge</span><span class=\"p\">),</span>\n<span class=\"p\">]</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span> <span class=\"n\">main_views</span><span class=\"o\">.</span><span class=\"n\">homepage</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;help/&quot;</span><span class=\"p\">,</span> <span class=\"n\">include</span><span class=\"p\">(</span><span class=\"s2\">&quot;apps.help.urls&quot;</span><span class=\"p\">)),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;credit/&quot;</span><span class=\"p\">,</span> <span class=\"n\">include</span><span class=\"p\">(</span><span class=\"n\">extra_patterns</span><span class=\"p\">)),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>In this example, the <code class=\"docutils literal notranslate\"><span class=\"pre\">/credit/reports/</span></code> URL will be handled by the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">credit_views.report()</span></code> Django view.</p>\n<p>This can be used to remove redundancy from URLconfs where a single pattern\nprefix is used repeatedly. For example, consider this URLconf:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">path</span>\n<span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">views</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;&lt;page_slug&gt;-&lt;page_id&gt;/history/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">history</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;&lt;page_slug&gt;-&lt;page_id&gt;/edit/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">edit</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;&lt;page_slug&gt;-&lt;page_id&gt;/discuss/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">discuss</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;&lt;page_slug&gt;-&lt;page_id&gt;/permissions/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">permissions</span><span class=\"p\">),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>We can improve this by stating the common path prefix only once and grouping\nthe suffixes that differ:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">include</span><span class=\"p\">,</span> <span class=\"n\">path</span>\n<span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">views</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span>\n        <span class=\"s2\">&quot;&lt;page_slug&gt;-&lt;page_id&gt;/&quot;</span><span class=\"p\">,</span>\n        <span class=\"n\">include</span><span class=\"p\">(</span>\n            <span class=\"p\">[</span>\n                <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;history/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">history</span><span class=\"p\">),</span>\n                <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;edit/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">edit</span><span class=\"p\">),</span>\n                <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;discuss/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">discuss</span><span class=\"p\">),</span>\n                <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;permissions/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">permissions</span><span class=\"p\">),</span>\n            <span class=\"p\">]</span>\n        <span class=\"p\">),</span>\n    <span class=\"p\">),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<div class=\"section\" id=\"s-captured-parameters\">\n<span id=\"captured-parameters\"></span><h3>Captured parameters<a class=\"headerlink\" href=\"#captured-parameters\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>An included URLconf receives any captured parameters from parent URLconfs, so\nthe following example is valid:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># In settings/urls/main.py</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">include</span><span class=\"p\">,</span> <span class=\"n\">path</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;&lt;username&gt;/blog/&quot;</span><span class=\"p\">,</span> <span class=\"n\">include</span><span class=\"p\">(</span><span class=\"s2\">&quot;foo.urls.blog&quot;</span><span class=\"p\">)),</span>\n<span class=\"p\">]</span>\n\n<span class=\"c1\"># In foo/urls/blog.py</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">path</span>\n<span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">views</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">blog</span><span class=\"o\">.</span><span class=\"n\">index</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;archive/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">blog</span><span class=\"o\">.</span><span class=\"n\">archive</span><span class=\"p\">),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>In the above example, the captured <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;username&quot;</span></code> variable is passed to the\nincluded URLconf, as expected.</p>\n</div>\n</div>\n<div class=\"section\" id=\"s-passing-extra-options-to-view-functions\">\n<span id=\"s-views-extra-options\"></span><span id=\"passing-extra-options-to-view-functions\"></span><span id=\"views-extra-options\"></span><h2>Passing extra options to view functions<a class=\"headerlink\" href=\"#passing-extra-options-to-view-functions\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>URLconfs have a hook that lets you pass extra arguments to your view functions,\nas a Python dictionary.</p>\n<p>The <a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.path\" title=\"django.urls.path\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">path()</span></code></a> function can take an optional third argument\nwhich should be a dictionary of extra keyword arguments to pass to the view\nfunction.</p>\n<p>For example:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">path</span>\n<span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">views</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;blog/&lt;int:year&gt;/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">year_archive</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s2\">&quot;foo&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;bar&quot;</span><span class=\"p\">}),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>In this example, for a request to <code class=\"docutils literal notranslate\"><span class=\"pre\">/blog/2005/</span></code>, Django will call\n<code class=\"docutils literal notranslate\"><span class=\"pre\">views.year_archive(request,</span> <span class=\"pre\">year=2005,</span> <span class=\"pre\">foo='bar')</span></code>.</p>\n<p>This technique is used in the\n<a class=\"reference internal\" href=\"../../../ref/contrib/syndication/\"><span class=\"doc\">syndication framework</span></a> to pass metadata and\noptions to views.</p>\n<div class=\"admonition-dealing-with-conflicts admonition\">\n<p class=\"first admonition-title\">Dealing with conflicts</p>\n<p class=\"last\">It\u2019s possible to have a URL pattern which captures named keyword arguments,\nand also passes arguments with the same names in its dictionary of extra\narguments. When this happens, the arguments in the dictionary will be used\ninstead of the arguments captured in the URL.</p>\n</div>\n<div class=\"section\" id=\"s-passing-extra-options-to-include\">\n<span id=\"passing-extra-options-to-include\"></span><h3>Passing extra options to <code class=\"docutils literal notranslate\"><span class=\"pre\">include()</span></code><a class=\"headerlink\" href=\"#passing-extra-options-to-include\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Similarly, you can pass extra options to <a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.include\" title=\"django.urls.include\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">include()</span></code></a> and\neach line in the included URLconf will be passed the extra options.</p>\n<p>For example, these two URLconf sets are functionally identical:</p>\n<p>Set one:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># main.py</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">include</span><span class=\"p\">,</span> <span class=\"n\">path</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;blog/&quot;</span><span class=\"p\">,</span> <span class=\"n\">include</span><span class=\"p\">(</span><span class=\"s2\">&quot;inner&quot;</span><span class=\"p\">),</span> <span class=\"p\">{</span><span class=\"s2\">&quot;blog_id&quot;</span><span class=\"p\">:</span> <span class=\"mi\">3</span><span class=\"p\">}),</span>\n<span class=\"p\">]</span>\n\n<span class=\"c1\"># inner.py</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">path</span>\n<span class=\"kn\">from</span> <span class=\"nn\">mysite</span> <span class=\"kn\">import</span> <span class=\"n\">views</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;archive/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">archive</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;about/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">about</span><span class=\"p\">),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>Set two:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"c1\"># main.py</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">include</span><span class=\"p\">,</span> <span class=\"n\">path</span>\n<span class=\"kn\">from</span> <span class=\"nn\">mysite</span> <span class=\"kn\">import</span> <span class=\"n\">views</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;blog/&quot;</span><span class=\"p\">,</span> <span class=\"n\">include</span><span class=\"p\">(</span><span class=\"s2\">&quot;inner&quot;</span><span class=\"p\">)),</span>\n<span class=\"p\">]</span>\n\n<span class=\"c1\"># inner.py</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">path</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;archive/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">archive</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s2\">&quot;blog_id&quot;</span><span class=\"p\">:</span> <span class=\"mi\">3</span><span class=\"p\">}),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;about/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">about</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s2\">&quot;blog_id&quot;</span><span class=\"p\">:</span> <span class=\"mi\">3</span><span class=\"p\">}),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>Note that extra options will <em>always</em> be passed to <em>every</em> line in the included\nURLconf, regardless of whether the line\u2019s view actually accepts those options\nas valid. For this reason, this technique is only useful if you\u2019re certain that\nevery view in the included URLconf accepts the extra options you\u2019re passing.</p>\n</div>\n</div>\n<div class=\"section\" id=\"s-reverse-resolution-of-urls\">\n<span id=\"reverse-resolution-of-urls\"></span><h2>Reverse resolution of URLs<a class=\"headerlink\" href=\"#reverse-resolution-of-urls\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>A common need when working on a Django project is the possibility to obtain URLs\nin their final forms either for embedding in generated content (views and assets\nURLs, URLs shown to the user, etc.) or for handling of the navigation flow on\nthe server side (redirections, etc.)</p>\n<p>It is strongly desirable to avoid hard-coding these URLs (a laborious,\nnon-scalable and error-prone strategy). Equally dangerous is devising ad-hoc\nmechanisms to generate URLs that are parallel to the design described by the\nURLconf, which can result in the production of URLs that become stale over time.</p>\n<p>In other words, what\u2019s needed is a DRY mechanism. Among other advantages it\nwould allow evolution of the URL design without having to go over all the\nproject source code to search and replace outdated URLs.</p>\n<p>The primary piece of information we have available to get a URL is an\nidentification (e.g. the name) of the view in charge of handling it. Other\npieces of information that necessarily must participate in the lookup of the\nright URL are the types (positional, keyword) and values of the view arguments.</p>\n<p>Django provides a solution such that the URL mapper is the only repository of\nthe URL design. You feed it with your URLconf and then it can be used in both\ndirections:</p>\n<ul class=\"simple\">\n<li>Starting with a URL requested by the user/browser, it calls the right Django\nview providing any arguments it might need with their values as extracted from\nthe URL.</li>\n<li>Starting with the identification of the corresponding Django view plus the\nvalues of arguments that would be passed to it, obtain the associated URL.</li>\n</ul>\n<p>The first one is the usage we\u2019ve been discussing in the previous sections. The\nsecond one is what is known as <em>reverse resolution of URLs</em>, <em>reverse URL\nmatching</em>, <em>reverse URL lookup</em>, or simply <em>URL reversing</em>.</p>\n<p>Django provides tools for performing URL reversing that match the different\nlayers where URLs are needed:</p>\n<ul class=\"simple\">\n<li>In templates: Using the <a class=\"reference internal\" href=\"../../../ref/templates/builtins/#std-templatetag-url\"><code class=\"xref std std-ttag docutils literal notranslate\"><span class=\"pre\">url</span></code></a> template tag.</li>\n<li>In Python code: Using the <a class=\"reference internal\" href=\"../../../ref/urlresolvers/#django.urls.reverse\" title=\"django.urls.reverse\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">reverse()</span></code></a> function.</li>\n<li>In higher level code related to handling of URLs of Django model instances:\nThe <a class=\"reference internal\" href=\"../../../ref/models/instances/#django.db.models.Model.get_absolute_url\" title=\"django.db.models.Model.get_absolute_url\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">get_absolute_url()</span></code></a> method.</li>\n</ul>\n<div class=\"section\" id=\"s-examples\">\n<span id=\"examples\"></span><h3>Examples<a class=\"headerlink\" href=\"#examples\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Consider again this URLconf entry:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">path</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">views</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"c1\"># ...</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;articles/&lt;int:year&gt;/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">year_archive</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;news-year-archive&quot;</span><span class=\"p\">),</span>\n    <span class=\"c1\"># ...</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>According to this design, the URL for the archive corresponding to year <em>nnnn</em>\nis <code class=\"docutils literal notranslate\"><span class=\"pre\">/articles/&lt;nnnn&gt;/</span></code>.</p>\n<p>You can obtain these in template code by using:</p>\n<div class=\"highlight-html+django notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"p\">&lt;</span><span class=\"nt\">a</span> <span class=\"na\">href</span><span class=\"o\">=</span><span class=\"s\">&quot;</span><span class=\"cp\">{%</span> <span class=\"k\">url</span> <span class=\"s1\">&#39;news-year-archive&#39;</span> <span class=\"m\">2012</span> <span class=\"cp\">%}</span><span class=\"s\">&quot;</span><span class=\"p\">&gt;</span>2012 Archive<span class=\"p\">&lt;/</span><span class=\"nt\">a</span><span class=\"p\">&gt;</span>\n<span class=\"c\">{# Or with the year in a template context variable: #}</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">ul</span><span class=\"p\">&gt;</span>\n<span class=\"cp\">{%</span> <span class=\"k\">for</span> <span class=\"nv\">yearvar</span> <span class=\"k\">in</span> <span class=\"nv\">year_list</span> <span class=\"cp\">%}</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">a</span> <span class=\"na\">href</span><span class=\"o\">=</span><span class=\"s\">&quot;</span><span class=\"cp\">{%</span> <span class=\"k\">url</span> <span class=\"s1\">&#39;news-year-archive&#39;</span> <span class=\"nv\">yearvar</span> <span class=\"cp\">%}</span><span class=\"s\">&quot;</span><span class=\"p\">&gt;</span><span class=\"cp\">{{</span> <span class=\"nv\">yearvar</span> <span class=\"cp\">}}</span> Archive<span class=\"p\">&lt;/</span><span class=\"nt\">a</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n<span class=\"cp\">{%</span> <span class=\"k\">endfor</span> <span class=\"cp\">%}</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;</span>\n</pre></div>\n</div>\n<p>Or in Python code:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.http</span> <span class=\"kn\">import</span> <span class=\"n\">HttpResponseRedirect</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">reverse</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">redirect_to_year</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">):</span>\n    <span class=\"c1\"># ...</span>\n    <span class=\"n\">year</span> <span class=\"o\">=</span> <span class=\"mi\">2006</span>\n    <span class=\"c1\"># ...</span>\n    <span class=\"k\">return</span> <span class=\"n\">HttpResponseRedirect</span><span class=\"p\">(</span><span class=\"n\">reverse</span><span class=\"p\">(</span><span class=\"s2\">&quot;news-year-archive&quot;</span><span class=\"p\">,</span> <span class=\"n\">args</span><span class=\"o\">=</span><span class=\"p\">(</span><span class=\"n\">year</span><span class=\"p\">,)))</span>\n</pre></div>\n</div>\n<p>If, for some reason, it was decided that the URLs where content for yearly\narticle archives are published at should be changed then you would only need to\nchange the entry in the URLconf.</p>\n<p>In some scenarios where views are of a generic nature, a many-to-one\nrelationship might exist between URLs and views. For these cases the view name\nisn\u2019t a good enough identifier for it when comes the time of reversing\nURLs. Read the next section to know about the solution Django provides for this.</p>\n</div>\n</div>\n<div class=\"section\" id=\"s-naming-url-patterns\">\n<span id=\"s-id4\"></span><span id=\"naming-url-patterns\"></span><span id=\"id4\"></span><h2>Naming URL patterns<a class=\"headerlink\" href=\"#naming-url-patterns\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>In order to perform URL reversing, you\u2019ll need to use <strong>named URL patterns</strong>\nas done in the examples above. The string used for the URL name can contain any\ncharacters you like. You are not restricted to valid Python names.</p>\n<p>When naming URL patterns, choose names that are unlikely to clash with other\napplications\u2019 choice of names. If you call your URL pattern <code class=\"docutils literal notranslate\"><span class=\"pre\">comment</span></code>\nand another application does the same thing, the URL that\n<a class=\"reference internal\" href=\"../../../ref/urlresolvers/#django.urls.reverse\" title=\"django.urls.reverse\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">reverse()</span></code></a> finds depends on whichever pattern is last in\nyour project\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">urlpatterns</span></code> list.</p>\n<p>Putting a prefix on your URL names, perhaps derived from the application\nname (such as <code class=\"docutils literal notranslate\"><span class=\"pre\">myapp-comment</span></code> instead of <code class=\"docutils literal notranslate\"><span class=\"pre\">comment</span></code>), decreases the chance\nof collision.</p>\n<p>You can deliberately choose the <em>same URL name</em> as another application if you\nwant to override a view. For example, a common use case is to override the\n<a class=\"reference internal\" href=\"../../auth/default/#django.contrib.auth.views.LoginView\" title=\"django.contrib.auth.views.LoginView\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">LoginView</span></code></a>. Parts of Django and most\nthird-party apps assume that this view has a URL pattern with the name\n<code class=\"docutils literal notranslate\"><span class=\"pre\">login</span></code>. If you have a custom login view and give its URL the name <code class=\"docutils literal notranslate\"><span class=\"pre\">login</span></code>,\n<a class=\"reference internal\" href=\"../../../ref/urlresolvers/#django.urls.reverse\" title=\"django.urls.reverse\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">reverse()</span></code></a> will find your custom view as long as it\u2019s in\n<code class=\"docutils literal notranslate\"><span class=\"pre\">urlpatterns</span></code> after <code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.auth.urls</span></code> is included (if that\u2019s\nincluded at all).</p>\n<p>You may also use the same name for multiple URL patterns if they differ in\ntheir arguments. In addition to the URL name, <a class=\"reference internal\" href=\"../../../ref/urlresolvers/#django.urls.reverse\" title=\"django.urls.reverse\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">reverse()</span></code></a>\nmatches the number of arguments and the names of the keyword arguments. Path\nconverters can also raise <code class=\"docutils literal notranslate\"><span class=\"pre\">ValueError</span></code> to indicate no match, see\n<a class=\"reference internal\" href=\"#registering-custom-path-converters\"><span class=\"std std-ref\">Registering custom path converters</span></a> for details.</p>\n</div>\n<div class=\"section\" id=\"s-url-namespaces\">\n<span id=\"s-topics-http-defining-url-namespaces\"></span><span id=\"url-namespaces\"></span><span id=\"topics-http-defining-url-namespaces\"></span><h2>URL namespaces<a class=\"headerlink\" href=\"#url-namespaces\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<div class=\"section\" id=\"s-introduction\">\n<span id=\"introduction\"></span><h3>Introduction<a class=\"headerlink\" href=\"#introduction\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>URL namespaces allow you to uniquely reverse <a class=\"reference internal\" href=\"#naming-url-patterns\"><span class=\"std std-ref\">named URL patterns</span></a> even if different applications use the same URL names.\nIt\u2019s a good practice for third-party apps to always use namespaced URLs (as we\ndid in the tutorial). Similarly, it also allows you to reverse URLs if multiple\ninstances of an application are deployed. In other words, since multiple\ninstances of a single application will share named URLs, namespaces provide a\nway to tell these named URLs apart.</p>\n<p>Django applications that make proper use of URL namespacing can be deployed\nmore than once for a particular site. For example <a class=\"reference internal\" href=\"../../../ref/contrib/admin/#module-django.contrib.admin\" title=\"django.contrib.admin: Django's admin site.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.contrib.admin</span></code></a>\nhas an <a class=\"reference internal\" href=\"../../../ref/contrib/admin/#django.contrib.admin.AdminSite\" title=\"django.contrib.admin.AdminSite\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">AdminSite</span></code></a> class which allows you to\n<a class=\"reference internal\" href=\"../../../ref/contrib/admin/#multiple-admin-sites\"><span class=\"std std-ref\">deploy more than one instance of the admin</span></a>.  In a\nlater example, we\u2019ll discuss the idea of deploying the polls application from\nthe tutorial in two different locations so we can serve the same functionality\nto two different audiences (authors and publishers).</p>\n<p>A URL namespace comes in two parts, both of which are strings:</p>\n<dl class=\"glossary docutils\">\n<dt id=\"term-application-namespace\">application namespace<a class=\"headerlink\" href=\"#term-application-namespace\" title=\"Permalink to this term\">\u00b6</a></dt><dd>This describes the name of the application that is being deployed. Every\ninstance of a single application will have the same application namespace.\nFor example, Django\u2019s admin application has the somewhat predictable\napplication namespace of <code class=\"docutils literal notranslate\"><span class=\"pre\">'admin'</span></code>.</dd>\n<dt id=\"term-instance-namespace\">instance namespace<a class=\"headerlink\" href=\"#term-instance-namespace\" title=\"Permalink to this term\">\u00b6</a></dt><dd>This identifies a specific instance of an application. Instance namespaces\nshould be unique across your entire project. However, an instance namespace\ncan be the same as the application namespace. This is used to specify a\ndefault instance of an application. For example, the default Django admin\ninstance has an instance namespace of <code class=\"docutils literal notranslate\"><span class=\"pre\">'admin'</span></code>.</dd>\n</dl>\n<p>Namespaced URLs are specified using the <code class=\"docutils literal notranslate\"><span class=\"pre\">':'</span></code> operator. For example, the main\nindex page of the admin application is referenced using <code class=\"docutils literal notranslate\"><span class=\"pre\">'admin:index'</span></code>. This\nindicates a namespace of <code class=\"docutils literal notranslate\"><span class=\"pre\">'admin'</span></code>, and a named URL of <code class=\"docutils literal notranslate\"><span class=\"pre\">'index'</span></code>.</p>\n<p>Namespaces can also be nested. The named URL <code class=\"docutils literal notranslate\"><span class=\"pre\">'sports:polls:index'</span></code> would\nlook for a pattern named <code class=\"docutils literal notranslate\"><span class=\"pre\">'index'</span></code> in the namespace <code class=\"docutils literal notranslate\"><span class=\"pre\">'polls'</span></code> that is itself\ndefined within the top-level namespace <code class=\"docutils literal notranslate\"><span class=\"pre\">'sports'</span></code>.</p>\n</div>\n<div class=\"section\" id=\"s-reversing-namespaced-urls\">\n<span id=\"s-topics-http-reversing-url-namespaces\"></span><span id=\"reversing-namespaced-urls\"></span><span id=\"topics-http-reversing-url-namespaces\"></span><h3>Reversing namespaced URLs<a class=\"headerlink\" href=\"#reversing-namespaced-urls\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>When given a namespaced URL (e.g. <code class=\"docutils literal notranslate\"><span class=\"pre\">'polls:index'</span></code>) to resolve, Django splits\nthe fully qualified name into parts and then tries the following lookup:</p>\n<ol class=\"arabic\">\n<li><p class=\"first\">First, Django looks for a matching <a class=\"reference internal\" href=\"#term-application-namespace\"><span class=\"xref std std-term\">application namespace</span></a> (in this\nexample, <code class=\"docutils literal notranslate\"><span class=\"pre\">'polls'</span></code>). This will yield a list of instances of that\napplication.</p>\n</li>\n<li><p class=\"first\">If there is a current application defined, Django finds and returns the URL\nresolver for that instance. The current application can be specified with\nthe <code class=\"docutils literal notranslate\"><span class=\"pre\">current_app</span></code> argument to the <a class=\"reference internal\" href=\"../../../ref/urlresolvers/#django.urls.reverse\" title=\"django.urls.reverse\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">reverse()</span></code></a>\nfunction.</p>\n<p>The <a class=\"reference internal\" href=\"../../../ref/templates/builtins/#std-templatetag-url\"><code class=\"xref std std-ttag docutils literal notranslate\"><span class=\"pre\">url</span></code></a> template tag uses the namespace of the currently resolved\nview as the current application in a\n<a class=\"reference internal\" href=\"../../../ref/templates/api/#django.template.RequestContext\" title=\"django.template.RequestContext\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">RequestContext</span></code></a>. You can override this default by\nsetting the current application on the <a class=\"reference internal\" href=\"../../../ref/request-response/#django.http.HttpRequest.current_app\" title=\"django.http.HttpRequest.current_app\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">request.current_app</span></code></a> attribute.</p>\n</li>\n<li><p class=\"first\">If there is no current application, Django looks for a default\napplication instance. The default application instance is the instance\nthat has an <a class=\"reference internal\" href=\"#term-instance-namespace\"><span class=\"xref std std-term\">instance namespace</span></a> matching the <a class=\"reference internal\" href=\"#term-application-namespace\"><span class=\"xref std std-term\">application\nnamespace</span></a> (in this example, an instance of <code class=\"docutils literal notranslate\"><span class=\"pre\">polls</span></code> called <code class=\"docutils literal notranslate\"><span class=\"pre\">'polls'</span></code>).</p>\n</li>\n<li><p class=\"first\">If there is no default application instance, Django will pick the last\ndeployed instance of the application, whatever its instance name may be.</p>\n</li>\n<li><p class=\"first\">If the provided namespace doesn\u2019t match an <a class=\"reference internal\" href=\"#term-application-namespace\"><span class=\"xref std std-term\">application namespace</span></a> in\nstep 1, Django will attempt a direct lookup of the namespace as an\n<a class=\"reference internal\" href=\"#term-instance-namespace\"><span class=\"xref std std-term\">instance namespace</span></a>.</p>\n</li>\n</ol>\n<p>If there are nested namespaces, these steps are repeated for each part of the\nnamespace until only the view name is unresolved. The view name will then be\nresolved into a URL in the namespace that has been found.</p>\n<div class=\"section\" id=\"s-id5\">\n<span id=\"id5\"></span><h4>Example<a class=\"headerlink\" href=\"#id5\" title=\"Permalink to this headline\">\u00b6</a></h4>\n<p>To show this resolution strategy in action, consider an example of two instances\nof the <code class=\"docutils literal notranslate\"><span class=\"pre\">polls</span></code> application from the tutorial: one called <code class=\"docutils literal notranslate\"><span class=\"pre\">'author-polls'</span></code>\nand one called <code class=\"docutils literal notranslate\"><span class=\"pre\">'publisher-polls'</span></code>. Assume we have enhanced that application\nso that it takes the instance namespace into consideration when creating and\ndisplaying polls.</p>\n<div class=\"literal-block-wrapper docutils container\" id=\"id6\">\n<div class=\"code-block-caption\"><span class=\"caption-text\"><code class=\"docutils literal notranslate\"><span class=\"pre\">urls.py</span></code></span><a class=\"headerlink\" href=\"#id6\" title=\"Permalink to this code\">\u00b6</a></div>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">include</span><span class=\"p\">,</span> <span class=\"n\">path</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;author-polls/&quot;</span><span class=\"p\">,</span> <span class=\"n\">include</span><span class=\"p\">(</span><span class=\"s2\">&quot;polls.urls&quot;</span><span class=\"p\">,</span> <span class=\"n\">namespace</span><span class=\"o\">=</span><span class=\"s2\">&quot;author-polls&quot;</span><span class=\"p\">)),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;publisher-polls/&quot;</span><span class=\"p\">,</span> <span class=\"n\">include</span><span class=\"p\">(</span><span class=\"s2\">&quot;polls.urls&quot;</span><span class=\"p\">,</span> <span class=\"n\">namespace</span><span class=\"o\">=</span><span class=\"s2\">&quot;publisher-polls&quot;</span><span class=\"p\">)),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n</div>\n<div class=\"literal-block-wrapper docutils container\" id=\"id7\">\n<div class=\"code-block-caption\"><span class=\"caption-text\"><code class=\"docutils literal notranslate\"><span class=\"pre\">polls/urls.py</span></code></span><a class=\"headerlink\" href=\"#id7\" title=\"Permalink to this code\">\u00b6</a></div>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">path</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">views</span>\n\n<span class=\"n\">app_name</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;polls&quot;</span>\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">IndexView</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;index&quot;</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;&lt;int:pk&gt;/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">DetailView</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;detail&quot;</span><span class=\"p\">),</span>\n    <span class=\"o\">...</span><span class=\"p\">,</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n</div>\n<p>Using this setup, the following lookups are possible:</p>\n<ul>\n<li><p class=\"first\">If one of the instances is current - say, if we were rendering the detail page\nin the instance <code class=\"docutils literal notranslate\"><span class=\"pre\">'author-polls'</span></code> - <code class=\"docutils literal notranslate\"><span class=\"pre\">'polls:index'</span></code> will resolve to the\nindex page of the <code class=\"docutils literal notranslate\"><span class=\"pre\">'author-polls'</span></code> instance; i.e. both of the following will\nresult in <code class=\"docutils literal notranslate\"><span class=\"pre\">&quot;/author-polls/&quot;</span></code>.</p>\n<p>In the method of a class-based view:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">reverse</span><span class=\"p\">(</span><span class=\"s2\">&quot;polls:index&quot;</span><span class=\"p\">,</span> <span class=\"n\">current_app</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">request</span><span class=\"o\">.</span><span class=\"n\">resolver_match</span><span class=\"o\">.</span><span class=\"n\">namespace</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>and in the template:</p>\n<div class=\"highlight-html+django notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cp\">{%</span> <span class=\"k\">url</span> <span class=\"s1\">&#39;polls:index&#39;</span> <span class=\"cp\">%}</span>\n</pre></div>\n</div>\n</li>\n<li><p class=\"first\">If there is no current instance - say, if we were rendering a page\nsomewhere else on the site - <code class=\"docutils literal notranslate\"><span class=\"pre\">'polls:index'</span></code> will resolve to the last\nregistered instance of <code class=\"docutils literal notranslate\"><span class=\"pre\">polls</span></code>. Since there is no default instance\n(instance namespace of <code class=\"docutils literal notranslate\"><span class=\"pre\">'polls'</span></code>), the last instance of <code class=\"docutils literal notranslate\"><span class=\"pre\">polls</span></code> that is\nregistered will be used. This would be <code class=\"docutils literal notranslate\"><span class=\"pre\">'publisher-polls'</span></code> since it\u2019s\ndeclared last in the <code class=\"docutils literal notranslate\"><span class=\"pre\">urlpatterns</span></code>.</p>\n</li>\n<li><p class=\"first\"><code class=\"docutils literal notranslate\"><span class=\"pre\">'author-polls:index'</span></code> will always resolve to the index page of the instance\n<code class=\"docutils literal notranslate\"><span class=\"pre\">'author-polls'</span></code> (and likewise for <code class=\"docutils literal notranslate\"><span class=\"pre\">'publisher-polls'</span></code>) .</p>\n</li>\n</ul>\n<p>If there were also a default instance - i.e., an instance named <code class=\"docutils literal notranslate\"><span class=\"pre\">'polls'</span></code> -\nthe only change from above would be in the case where there is no current\ninstance (the second item in the list above). In this case <code class=\"docutils literal notranslate\"><span class=\"pre\">'polls:index'</span></code>\nwould resolve to the index page of the default instance instead of the instance\ndeclared last in <code class=\"docutils literal notranslate\"><span class=\"pre\">urlpatterns</span></code>.</p>\n</div>\n</div>\n<div class=\"section\" id=\"s-url-namespaces-and-included-urlconfs\">\n<span id=\"s-namespaces-and-include\"></span><span id=\"url-namespaces-and-included-urlconfs\"></span><span id=\"namespaces-and-include\"></span><h3>URL namespaces and included URLconfs<a class=\"headerlink\" href=\"#url-namespaces-and-included-urlconfs\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Application namespaces of included URLconfs can be specified in two ways.</p>\n<p>Firstly, you can set an <code class=\"docutils literal notranslate\"><span class=\"pre\">app_name</span></code> attribute in the included URLconf module,\nat the same level as the <code class=\"docutils literal notranslate\"><span class=\"pre\">urlpatterns</span></code> attribute. You have to pass the actual\nmodule, or a string reference to the module, to <a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.include\" title=\"django.urls.include\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">include()</span></code></a>,\nnot the list of <code class=\"docutils literal notranslate\"><span class=\"pre\">urlpatterns</span></code> itself.</p>\n<div class=\"literal-block-wrapper docutils container\" id=\"id8\">\n<div class=\"code-block-caption\"><span class=\"caption-text\"><code class=\"docutils literal notranslate\"><span class=\"pre\">polls/urls.py</span></code></span><a class=\"headerlink\" href=\"#id8\" title=\"Permalink to this code\">\u00b6</a></div>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">path</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">views</span>\n\n<span class=\"n\">app_name</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;polls&quot;</span>\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">IndexView</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;index&quot;</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;&lt;int:pk&gt;/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">DetailView</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;detail&quot;</span><span class=\"p\">),</span>\n    <span class=\"o\">...</span><span class=\"p\">,</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n</div>\n<div class=\"literal-block-wrapper docutils container\" id=\"id9\">\n<div class=\"code-block-caption\"><span class=\"caption-text\"><code class=\"docutils literal notranslate\"><span class=\"pre\">urls.py</span></code></span><a class=\"headerlink\" href=\"#id9\" title=\"Permalink to this code\">\u00b6</a></div>\n<div class=\"highlight-python notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">include</span><span class=\"p\">,</span> <span class=\"n\">path</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;polls/&quot;</span><span class=\"p\">,</span> <span class=\"n\">include</span><span class=\"p\">(</span><span class=\"s2\">&quot;polls.urls&quot;</span><span class=\"p\">)),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n</div>\n<p>The URLs defined in <code class=\"docutils literal notranslate\"><span class=\"pre\">polls.urls</span></code> will have an application namespace <code class=\"docutils literal notranslate\"><span class=\"pre\">polls</span></code>.</p>\n<p>Secondly, you can include an object that contains embedded namespace data. If\nyou <code class=\"docutils literal notranslate\"><span class=\"pre\">include()</span></code> a list of <a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.path\" title=\"django.urls.path\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">path()</span></code></a> or\n<a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.re_path\" title=\"django.urls.re_path\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">re_path()</span></code></a> instances, the URLs contained in that object\nwill be added to the global namespace. However, you can also <code class=\"docutils literal notranslate\"><span class=\"pre\">include()</span></code> a\n2-tuple containing:</p>\n<div class=\"highlight-text notranslate\"><div class=\"highlight\"><pre><span></span>(&lt;list of path()/re_path() instances&gt;, &lt;application namespace&gt;)\n</pre></div>\n</div>\n<p>For example:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">include</span><span class=\"p\">,</span> <span class=\"n\">path</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">.</span> <span class=\"kn\">import</span> <span class=\"n\">views</span>\n\n<span class=\"n\">polls_patterns</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n    <span class=\"p\">[</span>\n        <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">IndexView</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;index&quot;</span><span class=\"p\">),</span>\n        <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;&lt;int:pk&gt;/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">DetailView</span><span class=\"o\">.</span><span class=\"n\">as_view</span><span class=\"p\">(),</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;detail&quot;</span><span class=\"p\">),</span>\n    <span class=\"p\">],</span>\n    <span class=\"s2\">&quot;polls&quot;</span><span class=\"p\">,</span>\n<span class=\"p\">)</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;polls/&quot;</span><span class=\"p\">,</span> <span class=\"n\">include</span><span class=\"p\">(</span><span class=\"n\">polls_patterns</span><span class=\"p\">)),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>This will include the nominated URL patterns into the given application\nnamespace.</p>\n<p>The instance namespace can be specified using the <code class=\"docutils literal notranslate\"><span class=\"pre\">namespace</span></code> argument to\n<a class=\"reference internal\" href=\"../../../ref/urls/#django.urls.include\" title=\"django.urls.include\"><code class=\"xref py py-func docutils literal notranslate\"><span class=\"pre\">include()</span></code></a>. If the instance namespace is not specified,\nit will default to the included URLconf\u2019s application namespace. This means\nit will also be the default instance for that namespace.</p>\n</div>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["topics/http/views", "Writing views", "N", "next"], ["topics/http/index", "Handling HTTP requests", "P", "previous"]], "sourcename": "topics/http/urls.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">URL dispatcher</a><ul>\n<li><a class=\"reference internal\" href=\"#overview\">Overview</a></li>\n<li><a class=\"reference internal\" href=\"#how-django-processes-a-request\">How Django processes a request</a></li>\n<li><a class=\"reference internal\" href=\"#example\">Example</a></li>\n<li><a class=\"reference internal\" href=\"#path-converters\">Path converters</a></li>\n<li><a class=\"reference internal\" href=\"#registering-custom-path-converters\">Registering custom path converters</a></li>\n<li><a class=\"reference internal\" href=\"#using-regular-expressions\">Using regular expressions</a><ul>\n<li><a class=\"reference internal\" href=\"#using-unnamed-regular-expression-groups\">Using unnamed regular expression groups</a></li>\n<li><a class=\"reference internal\" href=\"#nested-arguments\">Nested arguments</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#what-the-urlconf-searches-against\">What the URLconf searches against</a></li>\n<li><a class=\"reference internal\" href=\"#specifying-defaults-for-view-arguments\">Specifying defaults for view arguments</a></li>\n<li><a class=\"reference internal\" href=\"#performance\">Performance</a></li>\n<li><a class=\"reference internal\" href=\"#syntax-of-the-urlpatterns-variable\">Syntax of the <code class=\"docutils literal notranslate\"><span class=\"pre\">urlpatterns</span></code> variable</a></li>\n<li><a class=\"reference internal\" href=\"#error-handling\">Error handling</a></li>\n<li><a class=\"reference internal\" href=\"#including-other-urlconfs\">Including other URLconfs</a><ul>\n<li><a class=\"reference internal\" href=\"#captured-parameters\">Captured parameters</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#passing-extra-options-to-view-functions\">Passing extra options to view functions</a><ul>\n<li><a class=\"reference internal\" href=\"#passing-extra-options-to-include\">Passing extra options to <code class=\"docutils literal notranslate\"><span class=\"pre\">include()</span></code></a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#reverse-resolution-of-urls\">Reverse resolution of URLs</a><ul>\n<li><a class=\"reference internal\" href=\"#examples\">Examples</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#naming-url-patterns\">Naming URL patterns</a></li>\n<li><a class=\"reference internal\" href=\"#url-namespaces\">URL namespaces</a><ul>\n<li><a class=\"reference internal\" href=\"#introduction\">Introduction</a></li>\n<li><a class=\"reference internal\" href=\"#reversing-namespaced-urls\">Reversing namespaced URLs</a><ul>\n<li><a class=\"reference internal\" href=\"#id5\">Example</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#url-namespaces-and-included-urlconfs\">URL namespaces and included URLconfs</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".txt", "current_page_name": "topics/http/urls", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}