{"parents": [{"link": "../../../../../", "title": "Module code"}, {"link": "../../../../", "title": "django"}, {"link": "../../", "title": "django.contrib.admin"}], "title": "django.contrib.admin.views.decorators", "body": "<h1>Source code for django.contrib.admin.views.decorators</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"kn\">from</span> <span class=\"nn\">django.contrib.auth</span> <span class=\"kn\">import</span> <span class=\"n\">REDIRECT_FIELD_NAME</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.contrib.auth.decorators</span> <span class=\"kn\">import</span> <span class=\"n\">user_passes_test</span>\n\n\n<div class=\"viewcode-block\" id=\"staff_member_required\"><a class=\"viewcode-back\" href=\"../../../../../../ref/contrib/admin/#django.contrib.admin.views.decorators.staff_member_required\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">staff_member_required</span><span class=\"p\">(</span>\n    <span class=\"n\">view_func</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">redirect_field_name</span><span class=\"o\">=</span><span class=\"n\">REDIRECT_FIELD_NAME</span><span class=\"p\">,</span> <span class=\"n\">login_url</span><span class=\"o\">=</span><span class=\"s2\">&quot;admin:login&quot;</span>\n<span class=\"p\">):</span>\n    <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    Decorator for views that checks that the user is logged in and is a staff</span>\n<span class=\"sd\">    member, redirecting to the login page if necessary.</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"n\">actual_decorator</span> <span class=\"o\">=</span> <span class=\"n\">user_passes_test</span><span class=\"p\">(</span>\n        <span class=\"k\">lambda</span> <span class=\"n\">u</span><span class=\"p\">:</span> <span class=\"n\">u</span><span class=\"o\">.</span><span class=\"n\">is_active</span> <span class=\"ow\">and</span> <span class=\"n\">u</span><span class=\"o\">.</span><span class=\"n\">is_staff</span><span class=\"p\">,</span>\n        <span class=\"n\">login_url</span><span class=\"o\">=</span><span class=\"n\">login_url</span><span class=\"p\">,</span>\n        <span class=\"n\">redirect_field_name</span><span class=\"o\">=</span><span class=\"n\">redirect_field_name</span><span class=\"p\">,</span>\n    <span class=\"p\">)</span>\n    <span class=\"k\">if</span> <span class=\"n\">view_func</span><span class=\"p\">:</span>\n        <span class=\"k\">return</span> <span class=\"n\">actual_decorator</span><span class=\"p\">(</span><span class=\"n\">view_func</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"n\">actual_decorator</span></div>\n</pre></div>", "current_page_name": "_modules/django/contrib/admin/views/decorators", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}