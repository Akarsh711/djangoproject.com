{"parents": [{"link": "../../../../", "title": "Module code"}, {"link": "../../../", "title": "django"}], "title": "django.views.decorators.common", "body": "<h1>Source code for django.views.decorators.common</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"kn\">from</span> <span class=\"nn\">functools</span> <span class=\"kn\">import</span> <span class=\"n\">wraps</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">asgiref.sync</span> <span class=\"kn\">import</span> <span class=\"n\">iscoroutinefunction</span>\n\n\n<div class=\"viewcode-block\" id=\"no_append_slash\"><a class=\"viewcode-back\" href=\"../../../../../topics/http/decorators/#django.views.decorators.common.no_append_slash\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">no_append_slash</span><span class=\"p\">(</span><span class=\"n\">view_func</span><span class=\"p\">):</span>\n    <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    Mark a view function as excluded from CommonMiddleware&#39;s APPEND_SLASH</span>\n<span class=\"sd\">    redirection.</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n\n    <span class=\"c1\"># view_func.should_append_slash = False would also work, but decorators are</span>\n    <span class=\"c1\"># nicer if they don&#39;t have side effects, so return a new function.</span>\n\n    <span class=\"k\">if</span> <span class=\"n\">iscoroutinefunction</span><span class=\"p\">(</span><span class=\"n\">view_func</span><span class=\"p\">):</span>\n\n        <span class=\"k\">async</span> <span class=\"k\">def</span> <span class=\"nf\">_view_wrapper</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n            <span class=\"k\">return</span> <span class=\"k\">await</span> <span class=\"n\">view_func</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n\n    <span class=\"k\">else</span><span class=\"p\">:</span>\n\n        <span class=\"k\">def</span> <span class=\"nf\">_view_wrapper</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n            <span class=\"k\">return</span> <span class=\"n\">view_func</span><span class=\"p\">(</span><span class=\"n\">request</span><span class=\"p\">,</span> <span class=\"o\">*</span><span class=\"n\">args</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n\n    <span class=\"n\">_view_wrapper</span><span class=\"o\">.</span><span class=\"n\">should_append_slash</span> <span class=\"o\">=</span> <span class=\"kc\">False</span>\n\n    <span class=\"k\">return</span> <span class=\"n\">wraps</span><span class=\"p\">(</span><span class=\"n\">view_func</span><span class=\"p\">)(</span><span class=\"n\">_view_wrapper</span><span class=\"p\">)</span></div>\n</pre></div>", "current_page_name": "_modules/django/views/decorators/common", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}