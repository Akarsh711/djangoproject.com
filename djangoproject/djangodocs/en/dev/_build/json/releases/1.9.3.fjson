{"parents": [{"link": "../", "title": "Release notes"}], "prev": {"link": "../1.9.4/", "title": "Django 1.9.4 release notes"}, "next": {"link": "../1.9.2/", "title": "Django 1.9.2 release notes"}, "title": "Django 1.9.3 release notes", "meta": {}, "body": "<div class=\"section\" id=\"s-django-1-9-3-release-notes\">\n<span id=\"django-1-9-3-release-notes\"></span><h1>Django 1.9.3 release notes<a class=\"headerlink\" href=\"#django-1-9-3-release-notes\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p><em>March 1, 2016</em></p>\n<p>Django 1.9.3 fixes two security issues and several bugs in 1.9.2.</p>\n<div class=\"section\" id=\"s-cve-2016-2512-malicious-redirect-and-possible-xss-attack-via-user-supplied-redirect-urls-containing-basic-auth\">\n<span id=\"cve-2016-2512-malicious-redirect-and-possible-xss-attack-via-user-supplied-redirect-urls-containing-basic-auth\"></span><h2>CVE-2016-2512: Malicious redirect and possible XSS attack via user-supplied redirect URLs containing basic auth<a class=\"headerlink\" href=\"#cve-2016-2512-malicious-redirect-and-possible-xss-attack-via-user-supplied-redirect-urls-containing-basic-auth\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Django relies on user input in some cases (e.g.\n<code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.auth.views.login()</span></code> and <a class=\"reference internal\" href=\"../../topics/i18n/\"><span class=\"doc\">i18n</span></a>)\nto redirect the user to an \u201con success\u201d URL. The security check for these\nredirects (namely <code class=\"docutils literal notranslate\"><span class=\"pre\">django.utils.http.is_safe_url()</span></code>) considered some URLs\nwith basic authentication credentials \u201csafe\u201d when they shouldn\u2019t be.</p>\n<p>For example, a URL like <code class=\"docutils literal notranslate\"><span class=\"pre\">http://mysite.example.com\\&#64;attacker.com</span></code> would be\nconsidered safe if the request\u2019s host is <code class=\"docutils literal notranslate\"><span class=\"pre\">http://mysite.example.com</span></code>, but\nredirecting to this URL sends the user to <code class=\"docutils literal notranslate\"><span class=\"pre\">attacker.com</span></code>.</p>\n<p>Also, if a developer relies on <code class=\"docutils literal notranslate\"><span class=\"pre\">is_safe_url()</span></code> to provide safe redirect\ntargets and puts such a URL into a link, they could suffer from an XSS attack.</p>\n</div>\n<div class=\"section\" id=\"s-cve-2016-2513-user-enumeration-through-timing-difference-on-password-hasher-work-factor-upgrade\">\n<span id=\"cve-2016-2513-user-enumeration-through-timing-difference-on-password-hasher-work-factor-upgrade\"></span><h2>CVE-2016-2513: User enumeration through timing difference on password hasher work factor upgrade<a class=\"headerlink\" href=\"#cve-2016-2513-user-enumeration-through-timing-difference-on-password-hasher-work-factor-upgrade\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>In each major version of Django since 1.6, the default number of iterations for\nthe <code class=\"docutils literal notranslate\"><span class=\"pre\">PBKDF2PasswordHasher</span></code> and its subclasses has increased. This improves\nthe security of the password as the speed of hardware increases, however, it\nalso creates a timing difference between a login request for a user with a\npassword encoded in an older number of iterations and login request for a\nnonexistent user (which runs the default hasher\u2019s default number of iterations\nsince Django 1.6).</p>\n<p>This only affects users who haven\u2019t logged in since the iterations were\nincreased. The first time a user logs in after an iterations increase, their\npassword is updated with the new iterations and there is no longer a timing\ndifference.</p>\n<p>The new <code class=\"docutils literal notranslate\"><span class=\"pre\">BasePasswordHasher.harden_runtime()</span></code> method allows hashers to bridge\nthe runtime gap between the work factor (e.g. iterations) supplied in existing\nencoded passwords and the default work factor of the hasher. This method\nis implemented for <code class=\"docutils literal notranslate\"><span class=\"pre\">PBKDF2PasswordHasher</span></code>  and <code class=\"docutils literal notranslate\"><span class=\"pre\">BCryptPasswordHasher</span></code>.\nThe number of rounds for the latter hasher hasn\u2019t changed since Django 1.4, but\nsome projects may subclass it and increase the work factor as needed.</p>\n<p>A warning will be emitted for any <a class=\"reference internal\" href=\"../../topics/auth/passwords/#write-your-own-password-hasher\"><span class=\"std std-ref\">third-party password hashers that don\u2019t\nimplement</span></a> a <code class=\"docutils literal notranslate\"><span class=\"pre\">harden_runtime()</span></code> method.</p>\n<p>If you have different password hashes in your database (such as SHA1 hashes\nfrom users who haven\u2019t logged in since the default hasher switched to PBKDF2\nin Django 1.4), the timing difference on a login request for these users may be\neven greater and this fix doesn\u2019t remedy that difference (or any difference\nwhen changing hashers). You may be able to <a class=\"reference internal\" href=\"../../topics/auth/passwords/#wrapping-password-hashers\"><span class=\"std std-ref\">upgrade those hashes</span></a> to prevent a timing attack for that case.</p>\n</div>\n<div class=\"section\" id=\"s-bugfixes\">\n<span id=\"bugfixes\"></span><h2>Bugfixes<a class=\"headerlink\" href=\"#bugfixes\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<ul class=\"simple\">\n<li>Skipped URL checks (new in 1.9) if the <code class=\"docutils literal notranslate\"><span class=\"pre\">ROOT_URLCONF</span></code> setting isn\u2019t defined\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/26155\">#26155</a>).</li>\n<li>Fixed a crash on PostgreSQL that prevented using <code class=\"docutils literal notranslate\"><span class=\"pre\">TIME_ZONE=None</span></code> and\n<code class=\"docutils literal notranslate\"><span class=\"pre\">USE_TZ=False</span></code> (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/26177\">#26177</a>).</li>\n<li>Added system checks for query name clashes of hidden relationships\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/26162\">#26162</a>).</li>\n<li>Fixed a regression for cases where\n<code class=\"docutils literal notranslate\"><span class=\"pre\">ForeignObject.get_extra_descriptor_filter()</span></code> returned a <code class=\"docutils literal notranslate\"><span class=\"pre\">Q</span></code> object\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/26153\">#26153</a>).</li>\n<li>Fixed regression with an <code class=\"docutils literal notranslate\"><span class=\"pre\">__in=qs</span></code> lookup for a <code class=\"docutils literal notranslate\"><span class=\"pre\">ForeignKey</span></code> with\n<code class=\"docutils literal notranslate\"><span class=\"pre\">to_field</span></code> set (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/26196\">#26196</a>).</li>\n<li>Made <code class=\"docutils literal notranslate\"><span class=\"pre\">forms.FileField</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">utils.translation.lazy_number()</span></code> picklable\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/26212\">#26212</a>).</li>\n<li>Fixed <a class=\"reference internal\" href=\"../../ref/contrib/postgres/fields/#django.contrib.postgres.fields.RangeField\" title=\"django.contrib.postgres.fields.RangeField\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">RangeField</span></code></a> and\n<a class=\"reference internal\" href=\"../../ref/contrib/postgres/fields/#django.contrib.postgres.fields.ArrayField\" title=\"django.contrib.postgres.fields.ArrayField\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">ArrayField</span></code></a> serialization with\n<code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code> values (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/26215\">#26215</a>).</li>\n<li>Fixed a crash when filtering by a <code class=\"docutils literal notranslate\"><span class=\"pre\">Decimal</span></code> in <code class=\"docutils literal notranslate\"><span class=\"pre\">RawQuery</span></code>\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/26219\">#26219</a>).</li>\n<li>Reallowed dashes in top-level domain names of URLs checked by\n<code class=\"docutils literal notranslate\"><span class=\"pre\">URLValidator</span></code> to fix a regression in Django 1.8 (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/26204\">#26204</a>).</li>\n<li>Fixed some crashing deprecation shims in <code class=\"docutils literal notranslate\"><span class=\"pre\">SimpleTemplateResponse</span></code> that\nregressed in Django 1.9 (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/26253\">#26253</a>).</li>\n<li>Fixed <code class=\"docutils literal notranslate\"><span class=\"pre\">BoundField</span></code> to reallow slices of subwidgets (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/26267\">#26267</a>).</li>\n<li>Changed the admin\u2019s \u201cpermission denied\u201d message in the login template to use\n<code class=\"docutils literal notranslate\"><span class=\"pre\">get_username</span></code> instead of <code class=\"docutils literal notranslate\"><span class=\"pre\">username</span></code> to support custom user models\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/26231\">#26231</a>).</li>\n<li>Fixed a crash when passing a nonexistent template name to the cached template\nloader\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">load_template()</span></code> method (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/26280\">#26280</a>).</li>\n<li>Prevented <code class=\"docutils literal notranslate\"><span class=\"pre\">ContentTypeManager</span></code> instances from sharing their cache\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/26286\">#26286</a>).</li>\n<li>Reverted a change in Django 1.9.2 (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/25858\">#25858</a>) that prevented relative\nlazy relationships defined on abstract models to be resolved according to\ntheir concrete model\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">app_label</span></code> (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/26186\">#26186</a>).</li>\n</ul>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["releases/1.9.2", "Django 1.9.2 release notes", "N", "next"], ["releases/1.9.4", "Django 1.9.4 release notes", "P", "previous"]], "sourcename": "releases/1.9.3.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Django 1.9.3 release notes</a><ul>\n<li><a class=\"reference internal\" href=\"#cve-2016-2512-malicious-redirect-and-possible-xss-attack-via-user-supplied-redirect-urls-containing-basic-auth\">CVE-2016-2512: Malicious redirect and possible XSS attack via user-supplied redirect URLs containing basic auth</a></li>\n<li><a class=\"reference internal\" href=\"#cve-2016-2513-user-enumeration-through-timing-difference-on-password-hasher-work-factor-upgrade\">CVE-2016-2513: User enumeration through timing difference on password hasher work factor upgrade</a></li>\n<li><a class=\"reference internal\" href=\"#bugfixes\">Bugfixes</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".txt", "current_page_name": "releases/1.9.3", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}