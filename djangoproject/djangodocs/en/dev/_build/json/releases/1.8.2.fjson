{"parents": [{"link": "../", "title": "Release notes"}], "prev": {"link": "../1.8.3/", "title": "Django 1.8.3 release notes"}, "next": {"link": "../1.8.1/", "title": "Django 1.8.1 release notes"}, "title": "Django 1.8.2 release notes", "meta": {}, "body": "<div class=\"section\" id=\"s-django-1-8-2-release-notes\">\n<span id=\"django-1-8-2-release-notes\"></span><h1>Django 1.8.2 release notes<a class=\"headerlink\" href=\"#django-1-8-2-release-notes\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p><em>May 20, 2015</em></p>\n<p>Django 1.8.2 fixes a security issue and several bugs in 1.8.1.</p>\n<div class=\"section\" id=\"s-fixed-session-flushing-in-the-cached-db-backend\">\n<span id=\"fixed-session-flushing-in-the-cached-db-backend\"></span><h2>Fixed session flushing in the <code class=\"docutils literal notranslate\"><span class=\"pre\">cached_db</span></code> backend<a class=\"headerlink\" href=\"#fixed-session-flushing-in-the-cached-db-backend\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>A change to <code class=\"docutils literal notranslate\"><span class=\"pre\">session.flush()</span></code> in the <code class=\"docutils literal notranslate\"><span class=\"pre\">cached_db</span></code> session backend in Django\n1.8 mistakenly sets the session key to an empty string rather than <code class=\"docutils literal notranslate\"><span class=\"pre\">None</span></code>. An\nempty string is treated as a valid session key and the session cookie is set\naccordingly. Any users with an empty string in their session cookie will use\nthe same session store. <code class=\"docutils literal notranslate\"><span class=\"pre\">session.flush()</span></code> is called by\n<code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.auth.logout()</span></code> and, more seriously, by\n<code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.auth.login()</span></code> when a user switches accounts. If a user is\nlogged in and logs in again to a different account (without logging out) the\nsession is flushed to avoid reuse. After the session is flushed (and its\nsession key becomes <code class=\"docutils literal notranslate\"><span class=\"pre\">''</span></code>) the account details are set on the session and the\nsession is saved. Any users with an empty string in their session cookie will\nnow be logged into that account.</p>\n</div>\n<div class=\"section\" id=\"s-bugfixes\">\n<span id=\"bugfixes\"></span><h2>Bugfixes<a class=\"headerlink\" href=\"#bugfixes\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<ul class=\"simple\">\n<li>Fixed check for template engine alias uniqueness (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/24685\">#24685</a>).</li>\n<li>Fixed crash when reusing the same <code class=\"docutils literal notranslate\"><span class=\"pre\">Case</span></code> instance in a query\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/24752\">#24752</a>).</li>\n<li>Corrected join promotion for <code class=\"docutils literal notranslate\"><span class=\"pre\">Case</span></code> expressions. For example, annotating a\nquery with a  <code class=\"docutils literal notranslate\"><span class=\"pre\">Case</span></code> expression could unexpectedly filter out results\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/24766\">#24766</a>).</li>\n<li>Fixed negated <code class=\"docutils literal notranslate\"><span class=\"pre\">Q</span></code> objects in expressions. Cases like\n<code class=\"docutils literal notranslate\"><span class=\"pre\">Case(When(~Q(friends__age__lte=30)))</span></code> tried to generate a subquery which\nresulted in a crash (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/24705\">#24705</a>).</li>\n<li>Fixed incorrect GROUP BY clause generation on MySQL when the query\u2019s model\nhas a self-referential foreign key (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/24748\">#24748</a>).</li>\n<li>Implemented <code class=\"docutils literal notranslate\"><span class=\"pre\">ForeignKey.get_db_prep_value()</span></code> so that <code class=\"docutils literal notranslate\"><span class=\"pre\">ForeignKey</span></code>s\npointing to <a class=\"reference internal\" href=\"../../ref/models/fields/#django.db.models.UUIDField\" title=\"django.db.models.UUIDField\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">UUIDField</span></code></a> and inheritance on models\nwith <code class=\"docutils literal notranslate\"><span class=\"pre\">UUIDField</span></code> primary keys work correctly (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/24698\">#24698</a>,\n<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/24712\">#24712</a>).</li>\n<li>Fixed <code class=\"docutils literal notranslate\"><span class=\"pre\">isnull</span></code> lookup for <code class=\"docutils literal notranslate\"><span class=\"pre\">HStoreField</span></code> (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/24751\">#24751</a>).</li>\n<li>Fixed a MySQL crash when a migration removes a combined index (unique_together\nor index_together) containing a foreign key (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/24757\">#24757</a>).</li>\n<li>Fixed session cookie deletion when using <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-SESSION_COOKIE_DOMAIN\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">SESSION_COOKIE_DOMAIN</span></code></a>\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/24799\">#24799</a>).</li>\n<li>On PostgreSQL, when no access is granted for the <code class=\"docutils literal notranslate\"><span class=\"pre\">postgres</span></code> database,\nDjango now falls back to the default database when it normally requires a\n\u201cno database\u201d connection (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/24791\">#24791</a>).</li>\n<li>Fixed display of <code class=\"docutils literal notranslate\"><span class=\"pre\">contrib.admin</span></code>\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">ForeignKey</span></code> widget when it\u2019s used\nin a row with other fields (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/24784\">#24784</a>).</li>\n</ul>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["releases/1.8.1", "Django 1.8.1 release notes", "N", "next"], ["releases/1.8.3", "Django 1.8.3 release notes", "P", "previous"]], "sourcename": "releases/1.8.2.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Django 1.8.2 release notes</a><ul>\n<li><a class=\"reference internal\" href=\"#fixed-session-flushing-in-the-cached-db-backend\">Fixed session flushing in the <code class=\"docutils literal notranslate\"><span class=\"pre\">cached_db</span></code> backend</a></li>\n<li><a class=\"reference internal\" href=\"#bugfixes\">Bugfixes</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".txt", "current_page_name": "releases/1.8.2", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}