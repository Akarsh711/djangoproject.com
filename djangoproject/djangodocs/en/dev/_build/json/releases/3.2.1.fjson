{"parents": [{"link": "../", "title": "Release notes"}], "prev": {"link": "../3.2.2/", "title": "Django 3.2.2 release notes"}, "next": {"link": "../3.2/", "title": "Django 3.2 release notes"}, "title": "Django 3.2.1 release notes", "meta": {}, "body": "<div class=\"section\" id=\"s-django-3-2-1-release-notes\">\n<span id=\"django-3-2-1-release-notes\"></span><h1>Django 3.2.1 release notes<a class=\"headerlink\" href=\"#django-3-2-1-release-notes\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p><em>May 4, 2021</em></p>\n<p>Django 3.2.1 fixes a security issue and several bugs in 3.2.</p>\n<div class=\"section\" id=\"s-cve-2021-31542-potential-directory-traversal-via-uploaded-files\">\n<span id=\"cve-2021-31542-potential-directory-traversal-via-uploaded-files\"></span><h2>CVE-2021-31542: Potential directory-traversal via uploaded files<a class=\"headerlink\" href=\"#cve-2021-31542-potential-directory-traversal-via-uploaded-files\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">MultiPartParser</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">UploadedFile</span></code>, and <code class=\"docutils literal notranslate\"><span class=\"pre\">FieldFile</span></code> allowed\ndirectory-traversal via uploaded files with suitably crafted file names.</p>\n<p>In order to mitigate this risk, stricter basename and path sanitation is now\napplied.</p>\n</div>\n<div class=\"section\" id=\"s-bugfixes\">\n<span id=\"bugfixes\"></span><h2>Bugfixes<a class=\"headerlink\" href=\"#bugfixes\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<ul class=\"simple\">\n<li>Corrected detection of GDAL 3.2 on Windows (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32544\">#32544</a>).</li>\n<li>Fixed a bug in Django 3.2 where subclasses of <code class=\"docutils literal notranslate\"><span class=\"pre\">BigAutoField</span></code> and\n<code class=\"docutils literal notranslate\"><span class=\"pre\">SmallAutoField</span></code> were not allowed for the <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-DEFAULT_AUTO_FIELD\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">DEFAULT_AUTO_FIELD</span></code></a>\nsetting (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32620\">#32620</a>).</li>\n<li>Fixed a regression in Django 3.2 that caused a crash of\n<code class=\"docutils literal notranslate\"><span class=\"pre\">QuerySet.values()/values_list()</span></code> after <code class=\"docutils literal notranslate\"><span class=\"pre\">QuerySet.union()</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">intersection()</span></code>, and <code class=\"docutils literal notranslate\"><span class=\"pre\">difference()</span></code> when it was ordered by an\nunannotated field (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32627\">#32627</a>).</li>\n<li>Restored, following a regression in Django 3.2, displaying an exception\nmessage on the technical 404 debug page (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32637\">#32637</a>).</li>\n<li>Fixed a bug in Django 3.2 where a system check would crash on a reverse\none-to-one relationships in <code class=\"docutils literal notranslate\"><span class=\"pre\">CheckConstraint.check</span></code> or\n<code class=\"docutils literal notranslate\"><span class=\"pre\">UniqueConstraint.condition</span></code> (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32635\">#32635</a>).</li>\n<li>Fixed a regression in Django 3.2 that caused a crash of\n<a class=\"reference internal\" href=\"../../ref/contrib/admin/#django.contrib.admin.ModelAdmin.search_fields\" title=\"django.contrib.admin.ModelAdmin.search_fields\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">ModelAdmin.search_fields</span></code></a> when searching against phrases with\nunbalanced quotes (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32649\">#32649</a>).</li>\n<li>Fixed a bug in Django 3.2 where variable lookup errors were logged rendering\nthe sitemap template if alternates were not defined (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32648\">#32648</a>).</li>\n<li>Fixed a regression in Django 3.2 that caused a crash when combining <code class=\"docutils literal notranslate\"><span class=\"pre\">Q()</span></code>\nobjects which contains boolean expressions (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32548\">#32548</a>).</li>\n<li>Fixed a regression in Django 3.2 that caused a crash of <code class=\"docutils literal notranslate\"><span class=\"pre\">QuerySet.update()</span></code>\non a queryset ordered by inherited or joined fields on MySQL and MariaDB\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32645\">#32645</a>).</li>\n<li>Fixed a regression in Django 3.2 that caused a crash when decoding a cookie\nvalue, used by <code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.messages.storage.cookie.CookieStorage</span></code>, in\nthe pre-Django 3.2 format (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32643\">#32643</a>).</li>\n<li>Fixed a regression in Django 3.2 that stopped the shift-key modifier\nselecting multiple rows in the admin changelist (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32647\">#32647</a>).</li>\n<li>Fixed a bug in Django 3.2 where a system check would crash on the\n<a class=\"reference internal\" href=\"../../ref/settings/#std-setting-STATICFILES_DIRS\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">STATICFILES_DIRS</span></code></a> setting with a list of 2-tuples of\n<code class=\"docutils literal notranslate\"><span class=\"pre\">(prefix,</span> <span class=\"pre\">path)</span></code> (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32665\">#32665</a>).</li>\n<li>Fixed a long standing bug involving queryset bitwise combination when used\nwith subqueries that began manifesting in Django 3.2, due to a separate fix\nusing <code class=\"docutils literal notranslate\"><span class=\"pre\">Exists</span></code> to <code class=\"docutils literal notranslate\"><span class=\"pre\">exclude()</span></code> multi-valued relationships\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32650\">#32650</a>).</li>\n<li>Fixed a bug in Django 3.2 where variable lookup errors were logged when\nrendering some admin templates (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32681\">#32681</a>).</li>\n<li>Fixed a bug in Django 3.2 where an admin changelist would crash when deleting\nobjects filtered against multi-valued relationships (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32682\">#32682</a>). The\nadmin changelist now uses <code class=\"docutils literal notranslate\"><span class=\"pre\">Exists()</span></code> instead of <code class=\"docutils literal notranslate\"><span class=\"pre\">QuerySet.distinct()</span></code>\nbecause calling <code class=\"docutils literal notranslate\"><span class=\"pre\">delete()</span></code> after <code class=\"docutils literal notranslate\"><span class=\"pre\">distinct()</span></code> is not allowed in Django\n3.2 to address a data loss possibility.</li>\n<li>Fixed a regression in Django 3.2 where the calling process environment would\nnot be passed to the <code class=\"docutils literal notranslate\"><span class=\"pre\">dbshell</span></code> command on PostgreSQL (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32687\">#32687</a>).</li>\n<li>Fixed a performance regression in Django 3.2 when building complex filters\nwith subqueries (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/32632\">#32632</a>). As a side-effect the private API to check\n<code class=\"docutils literal notranslate\"><span class=\"pre\">django.db.sql.query.Query</span></code> equality is removed.</li>\n</ul>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["releases/3.2", "Django 3.2 release notes", "N", "next"], ["releases/3.2.2", "Django 3.2.2 release notes", "P", "previous"]], "sourcename": "releases/3.2.1.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Django 3.2.1 release notes</a><ul>\n<li><a class=\"reference internal\" href=\"#cve-2021-31542-potential-directory-traversal-via-uploaded-files\">CVE-2021-31542: Potential directory-traversal via uploaded files</a></li>\n<li><a class=\"reference internal\" href=\"#bugfixes\">Bugfixes</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".txt", "current_page_name": "releases/3.2.1", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}
