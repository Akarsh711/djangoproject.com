{"parents": [{"link": "../../", "title": "\u201cHow-to\u201d guides"}, {"link": "../", "title": "How to deploy Django"}], "prev": {"link": "../", "title": "How to deploy Django"}, "next": {"link": "gunicorn/", "title": "How to use Django with Gunicorn"}, "title": "How to deploy with WSGI", "meta": {}, "body": "<div class=\"section\" id=\"s-how-to-deploy-with-wsgi\">\n<span id=\"how-to-deploy-with-wsgi\"></span><h1>How to deploy with WSGI<a class=\"headerlink\" href=\"#how-to-deploy-with-wsgi\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>Django\u2019s primary deployment platform is <a class=\"reference external\" href=\"https://wsgi.readthedocs.io/en/latest/\">WSGI</a>, the Python standard for web\nservers and applications.</p>\n<p>Django\u2019s <a class=\"reference internal\" href=\"../../../ref/django-admin/#django-admin-startproject\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">startproject</span></code></a> management command sets up a minimal default\nWSGI configuration for you, which you can tweak as needed for your project,\nand direct any WSGI-compliant application server to use.</p>\n<p>Django includes getting-started documentation for the following WSGI servers:</p>\n<div class=\"toctree-wrapper compound\">\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"gunicorn/\">How to use Django with Gunicorn</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"uwsgi/\">How to use Django with uWSGI</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"modwsgi/\">How to use Django with Apache and <code class=\"docutils literal notranslate\"><span class=\"pre\">mod_wsgi</span></code></a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"apache-auth/\">How to authenticate against Django\u2019s user database from Apache</a></li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-the-application-object\">\n<span id=\"the-application-object\"></span><h2>The <code class=\"docutils literal notranslate\"><span class=\"pre\">application</span></code> object<a class=\"headerlink\" href=\"#the-application-object\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The key concept of deploying with WSGI is the <code class=\"docutils literal notranslate\"><span class=\"pre\">application</span></code> callable which\nthe application server uses to communicate with your code. It\u2019s commonly\nprovided as an object named <code class=\"docutils literal notranslate\"><span class=\"pre\">application</span></code> in a Python module accessible to\nthe server.</p>\n<p>The <a class=\"reference internal\" href=\"../../../ref/django-admin/#django-admin-startproject\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">startproject</span></code></a> command creates a file\n<code class=\"file docutils literal notranslate\"><span class=\"pre\">&lt;project_name&gt;/wsgi.py</span></code> that contains such an <code class=\"docutils literal notranslate\"><span class=\"pre\">application</span></code> callable.</p>\n<p>It\u2019s used both by Django\u2019s development server and in production WSGI\ndeployments.</p>\n<p>WSGI servers obtain the path to the <code class=\"docutils literal notranslate\"><span class=\"pre\">application</span></code> callable from their\nconfiguration. Django\u2019s built-in server, namely the <a class=\"reference internal\" href=\"../../../ref/django-admin/#django-admin-runserver\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">runserver</span></code></a>\ncommand, reads it from the <a class=\"reference internal\" href=\"../../../ref/settings/#std-setting-WSGI_APPLICATION\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">WSGI_APPLICATION</span></code></a> setting. By default, it\u2019s\nset to <code class=\"docutils literal notranslate\"><span class=\"pre\">&lt;project_name&gt;.wsgi.application</span></code>, which points to the <code class=\"docutils literal notranslate\"><span class=\"pre\">application</span></code>\ncallable in <code class=\"file docutils literal notranslate\"><span class=\"pre\">&lt;project_name&gt;/wsgi.py</span></code>.</p>\n</div>\n<div class=\"section\" id=\"s-configuring-the-settings-module\">\n<span id=\"configuring-the-settings-module\"></span><h2>Configuring the settings module<a class=\"headerlink\" href=\"#configuring-the-settings-module\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>When the WSGI server loads your application, Django needs to import the\nsettings module \u2014 that\u2019s where your entire application is defined.</p>\n<p>Django uses the <span class=\"target\" id=\"index-0\"></span><a class=\"reference internal\" href=\"../../../topics/settings/#envvar-DJANGO_SETTINGS_MODULE\"><code class=\"xref std std-envvar docutils literal notranslate\"><span class=\"pre\">DJANGO_SETTINGS_MODULE</span></code></a> environment variable to\nlocate the appropriate settings module. It must contain the dotted path to the\nsettings module. You can use a different value for development and production;\nit all depends on how you organize your settings.</p>\n<p>If this variable isn\u2019t set, the default <code class=\"file docutils literal notranslate\"><span class=\"pre\">wsgi.py</span></code> sets it to\n<code class=\"docutils literal notranslate\"><span class=\"pre\">mysite.settings</span></code>, where <code class=\"docutils literal notranslate\"><span class=\"pre\">mysite</span></code> is the name of your project. That\u2019s how\n<a class=\"reference internal\" href=\"../../../ref/django-admin/#django-admin-runserver\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">runserver</span></code></a> discovers the default settings file by default.</p>\n<div class=\"admonition note\">\n<p class=\"first admonition-title\">Note</p>\n<p>Since environment variables are process-wide, this doesn\u2019t work when you\nrun multiple Django sites in the same process. This happens with mod_wsgi.</p>\n<p class=\"last\">To avoid this problem, use mod_wsgi\u2019s daemon mode with each site in its\nown daemon process, or override the value from the environment by\nenforcing <code class=\"docutils literal notranslate\"><span class=\"pre\">os.environ[&quot;DJANGO_SETTINGS_MODULE&quot;]</span> <span class=\"pre\">=</span> <span class=\"pre\">&quot;mysite.settings&quot;</span></code> in\nyour <code class=\"file docutils literal notranslate\"><span class=\"pre\">wsgi.py</span></code>.</p>\n</div>\n</div>\n<div class=\"section\" id=\"s-applying-wsgi-middleware\">\n<span id=\"applying-wsgi-middleware\"></span><h2>Applying WSGI middleware<a class=\"headerlink\" href=\"#applying-wsgi-middleware\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>To apply <span class=\"target\" id=\"index-1\"></span><a class=\"pep reference external\" href=\"https://peps.python.org/pep-3333/#middleware-components-that-play-both-sides\"><strong>WSGI middleware</strong></a> you can wrap the application\nobject. For instance you could add these lines at the bottom of\n<code class=\"file docutils literal notranslate\"><span class=\"pre\">wsgi.py</span></code>:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">helloworld.wsgi</span> <span class=\"kn\">import</span> <span class=\"n\">HelloWorldApplication</span>\n\n<span class=\"n\">application</span> <span class=\"o\">=</span> <span class=\"n\">HelloWorldApplication</span><span class=\"p\">(</span><span class=\"n\">application</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n<p>You could also replace the Django WSGI application with a custom WSGI\napplication that later delegates to the Django WSGI application, if you want\nto combine a Django application with a WSGI application of another framework.</p>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["howto/deployment/wsgi/gunicorn", "How to use Django with Gunicorn", "N", "next"], ["howto/deployment/index", "How to deploy Django", "P", "previous"]], "sourcename": "howto/deployment/wsgi/index.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">How to deploy with WSGI</a><ul>\n<li><a class=\"reference internal\" href=\"#the-application-object\">The <code class=\"docutils literal notranslate\"><span class=\"pre\">application</span></code> object</a></li>\n<li><a class=\"reference internal\" href=\"#configuring-the-settings-module\">Configuring the settings module</a></li>\n<li><a class=\"reference internal\" href=\"#applying-wsgi-middleware\">Applying WSGI middleware</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".txt", "current_page_name": "howto/deployment/wsgi/index", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}
