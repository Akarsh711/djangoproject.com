{"parents": [{"link": "../../", "title": "\u201cHow-to\u201d guides"}, {"link": "../", "title": "How to deploy Django"}], "prev": {"link": "../wsgi/apache-auth/", "title": "How to authenticate against Django\u2019s user database from Apache"}, "next": {"link": "daphne/", "title": "How to use Django with Daphne"}, "title": "How to deploy with ASGI", "meta": {}, "body": "<div class=\"section\" id=\"s-how-to-deploy-with-asgi\">\n<span id=\"how-to-deploy-with-asgi\"></span><h1>How to deploy with ASGI<a class=\"headerlink\" href=\"#how-to-deploy-with-asgi\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>As well as WSGI, Django also supports deploying on <a class=\"reference external\" href=\"https://asgi.readthedocs.io/en/latest/\">ASGI</a>, the emerging Python\nstandard for asynchronous web servers and applications.</p>\n<p>Django\u2019s <a class=\"reference internal\" href=\"../../../ref/django-admin/#django-admin-startproject\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">startproject</span></code></a> management command sets up a default ASGI\nconfiguration for you, which you can tweak as needed for your project, and\ndirect any ASGI-compliant application server to use.</p>\n<p>Django includes getting-started documentation for the following ASGI servers:</p>\n<div class=\"toctree-wrapper compound\">\n<ul>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"daphne/\">How to use Django with Daphne</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"hypercorn/\">How to use Django with Hypercorn</a></li>\n<li class=\"toctree-l1\"><a class=\"reference internal\" href=\"uvicorn/\">How to use Django with Uvicorn</a></li>\n</ul>\n</div>\n<div class=\"section\" id=\"s-the-application-object\">\n<span id=\"the-application-object\"></span><h2>The <code class=\"docutils literal notranslate\"><span class=\"pre\">application</span></code> object<a class=\"headerlink\" href=\"#the-application-object\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>Like WSGI, ASGI has you supply an <code class=\"docutils literal notranslate\"><span class=\"pre\">application</span></code> callable which\nthe application server uses to communicate with your code. It\u2019s commonly\nprovided as an object named <code class=\"docutils literal notranslate\"><span class=\"pre\">application</span></code> in a Python module accessible to\nthe server.</p>\n<p>The <a class=\"reference internal\" href=\"../../../ref/django-admin/#django-admin-startproject\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">startproject</span></code></a> command creates a file\n<code class=\"file docutils literal notranslate\"><span class=\"pre\">&lt;project_name&gt;/asgi.py</span></code> that contains such an <code class=\"docutils literal notranslate\"><span class=\"pre\">application</span></code> callable.</p>\n<p>It\u2019s not used by the development server (<code class=\"docutils literal notranslate\"><span class=\"pre\">runserver</span></code>), but can be used by\nany ASGI server either in development or in production.</p>\n<p>ASGI servers usually take the path to the application callable as a string;\nfor most Django projects, this will look like <code class=\"docutils literal notranslate\"><span class=\"pre\">myproject.asgi:application</span></code>.</p>\n<div class=\"admonition warning\">\n<p class=\"first admonition-title\">Warning</p>\n<p>While Django\u2019s default ASGI handler will run all your code in a synchronous\nthread, if you choose to run your own async handler you must be aware of\nasync-safety.</p>\n<p class=\"last\">Do not call blocking synchronous functions or libraries in any async code.\nDjango prevents you from doing this with the parts of Django that are not\nasync-safe, but the same may not be true of third-party apps or Python\nlibraries.</p>\n</div>\n</div>\n<div class=\"section\" id=\"s-configuring-the-settings-module\">\n<span id=\"configuring-the-settings-module\"></span><h2>Configuring the settings module<a class=\"headerlink\" href=\"#configuring-the-settings-module\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>When the ASGI server loads your application, Django needs to import the\nsettings module \u2014 that\u2019s where your entire application is defined.</p>\n<p>Django uses the <span class=\"target\" id=\"index-0\"></span><a class=\"reference internal\" href=\"../../../topics/settings/#envvar-DJANGO_SETTINGS_MODULE\"><code class=\"xref std std-envvar docutils literal notranslate\"><span class=\"pre\">DJANGO_SETTINGS_MODULE</span></code></a> environment variable to locate\nthe appropriate settings module. It must contain the dotted path to the\nsettings module. You can use a different value for development and production;\nit all depends on how you organize your settings.</p>\n<p>If this variable isn\u2019t set, the default <code class=\"file docutils literal notranslate\"><span class=\"pre\">asgi.py</span></code> sets it to\n<code class=\"docutils literal notranslate\"><span class=\"pre\">mysite.settings</span></code>, where <code class=\"docutils literal notranslate\"><span class=\"pre\">mysite</span></code> is the name of your project.</p>\n</div>\n<div class=\"section\" id=\"s-applying-asgi-middleware\">\n<span id=\"applying-asgi-middleware\"></span><h2>Applying ASGI middleware<a class=\"headerlink\" href=\"#applying-asgi-middleware\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>To apply ASGI middleware, or to embed Django in another ASGI application, you\ncan wrap Django\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">application</span></code> object in the <code class=\"docutils literal notranslate\"><span class=\"pre\">asgi.py</span></code> file. For example:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">some_asgi_library</span> <span class=\"kn\">import</span> <span class=\"n\">AmazingMiddleware</span>\n\n<span class=\"n\">application</span> <span class=\"o\">=</span> <span class=\"n\">AmazingMiddleware</span><span class=\"p\">(</span><span class=\"n\">application</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["howto/deployment/asgi/daphne", "How to use Django with Daphne", "N", "next"], ["howto/deployment/wsgi/apache-auth", "How to authenticate against Django\u2019s user database from Apache", "P", "previous"]], "sourcename": "howto/deployment/asgi/index.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">How to deploy with ASGI</a><ul>\n<li><a class=\"reference internal\" href=\"#the-application-object\">The <code class=\"docutils literal notranslate\"><span class=\"pre\">application</span></code> object</a></li>\n<li><a class=\"reference internal\" href=\"#configuring-the-settings-module\">Configuring the settings module</a></li>\n<li><a class=\"reference internal\" href=\"#applying-asgi-middleware\">Applying ASGI middleware</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".txt", "current_page_name": "howto/deployment/asgi/index", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}
