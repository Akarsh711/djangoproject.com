{"parents": [{"link": "../", "title": "Release notes"}], "prev": {"link": "../1.11.2/", "title": "Django 1.11.2 release notes"}, "next": {"link": "../1.11/", "title": "Django 1.11 release notes"}, "title": "Django 1.11.1 release notes", "meta": {}, "body": "<div class=\"section\" id=\"s-django-1-11-1-release-notes\">\n<span id=\"django-1-11-1-release-notes\"></span><h1>Django 1.11.1 release notes<a class=\"headerlink\" href=\"#django-1-11-1-release-notes\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p><em>May 6, 2017</em></p>\n<p>Django 1.11.1 adds a minor feature and fixes several bugs in 1.11.</p>\n<div class=\"section\" id=\"s-allowed-disabling-server-side-cursors-on-postgresql\">\n<span id=\"allowed-disabling-server-side-cursors-on-postgresql\"></span><h2>Allowed disabling server-side cursors on PostgreSQL<a class=\"headerlink\" href=\"#allowed-disabling-server-side-cursors-on-postgresql\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The change in Django 1.11 to make <a class=\"reference internal\" href=\"../../ref/models/querysets/#django.db.models.query.QuerySet.iterator\" title=\"django.db.models.query.QuerySet.iterator\"><code class=\"xref py py-meth docutils literal notranslate\"><span class=\"pre\">QuerySet.iterator()</span></code></a> use server-side\ncursors on PostgreSQL prevents running Django with PgBouncer in transaction\npooling mode. To reallow that, use the <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-DATABASE-DISABLE_SERVER_SIDE_CURSORS\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">DISABLE_SERVER_SIDE_CURSORS</span></code></a> setting in <a class=\"reference internal\" href=\"../../ref/settings/#std-setting-DATABASES\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">DATABASES</span></code></a>.</p>\n<p>See <a class=\"reference internal\" href=\"../../ref/databases/#transaction-pooling-server-side-cursors\"><span class=\"std std-ref\">Transaction pooling and server-side cursors</span></a> for more discussion.</p>\n</div>\n<div class=\"section\" id=\"s-bugfixes\">\n<span id=\"bugfixes\"></span><h2>Bugfixes<a class=\"headerlink\" href=\"#bugfixes\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<ul class=\"simple\">\n<li>Made migrations respect <code class=\"docutils literal notranslate\"><span class=\"pre\">Index</span></code>\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">name</span></code> argument. If you created a\nnamed index with Django 1.11, <code class=\"docutils literal notranslate\"><span class=\"pre\">makemigrations</span></code> will create a migration to\nrecreate the index with the correct name (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28051\">#28051</a>).</li>\n<li>Fixed a crash when using a <code class=\"docutils literal notranslate\"><span class=\"pre\">__icontains</span></code> lookup on a <code class=\"docutils literal notranslate\"><span class=\"pre\">ArrayField</span></code>\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28038\">#28038</a>).</li>\n<li>Fixed a crash when using a two-tuple in <code class=\"docutils literal notranslate\"><span class=\"pre\">EmailMessage</span></code>\u2019s <code class=\"docutils literal notranslate\"><span class=\"pre\">attachments</span></code>\nargument (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28042\">#28042</a>).</li>\n<li>Fixed <code class=\"docutils literal notranslate\"><span class=\"pre\">QuerySet.filter()</span></code> crash when it references the name of a\n<code class=\"docutils literal notranslate\"><span class=\"pre\">OneToOneField</span></code> primary key (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28047\">#28047</a>).</li>\n<li>Fixed empty POST data table appearing instead of \u201cNo POST data\u201d in HTML debug\npage (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28079\">#28079</a>).</li>\n<li>Restored <code class=\"docutils literal notranslate\"><span class=\"pre\">BoundField</span></code>s without any <code class=\"docutils literal notranslate\"><span class=\"pre\">choices</span></code> evaluating to <code class=\"docutils literal notranslate\"><span class=\"pre\">True</span></code>\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28058\">#28058</a>).</li>\n<li>Prevented <code class=\"docutils literal notranslate\"><span class=\"pre\">SessionBase.cycle_key()</span></code> from losing session data if\n<code class=\"docutils literal notranslate\"><span class=\"pre\">_session_cache</span></code> isn\u2019t populated (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28066\">#28066</a>).</li>\n<li>Fixed layout of <code class=\"docutils literal notranslate\"><span class=\"pre\">ReadOnlyPasswordHashWidget</span></code> (used in the admin\u2019s user\nchange page) (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28097\">#28097</a>).</li>\n<li>Allowed prefetch calls on managers with custom <code class=\"docutils literal notranslate\"><span class=\"pre\">ModelIterable</span></code> subclasses\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28096\">#28096</a>).</li>\n<li>Fixed change password link in the <code class=\"docutils literal notranslate\"><span class=\"pre\">contrib.auth</span></code> admin for <code class=\"docutils literal notranslate\"><span class=\"pre\">el</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">es_MX</span></code>, and <code class=\"docutils literal notranslate\"><span class=\"pre\">pt</span></code> translations (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28100\">#28100</a>).</li>\n<li>Restored the output of the <code class=\"docutils literal notranslate\"><span class=\"pre\">class</span></code> attribute in the <code class=\"docutils literal notranslate\"><span class=\"pre\">&lt;ul&gt;</span></code> of widgets\nthat use the <code class=\"docutils literal notranslate\"><span class=\"pre\">multiple_input.html</span></code> template. This fixes\n<code class=\"docutils literal notranslate\"><span class=\"pre\">ModelAdmin.radio_fields</span></code> with <code class=\"docutils literal notranslate\"><span class=\"pre\">admin.HORIZONTAL</span></code> (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28059\">#28059</a>).</li>\n<li>Fixed crash in <code class=\"docutils literal notranslate\"><span class=\"pre\">BaseGeometryWidget.subwidgets()</span></code> (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28039\">#28039</a>).</li>\n<li>Fixed exception reraising in ORM query execution when <code class=\"docutils literal notranslate\"><span class=\"pre\">cursor.execute()</span></code>\nfails and the subsequent <code class=\"docutils literal notranslate\"><span class=\"pre\">cursor.close()</span></code> also fails (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28091\">#28091</a>).</li>\n<li>Fixed a regression where <code class=\"docutils literal notranslate\"><span class=\"pre\">CheckboxSelectMultiple</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">NullBooleanSelect</span></code>,\n<code class=\"docutils literal notranslate\"><span class=\"pre\">RadioSelect</span></code>, <code class=\"docutils literal notranslate\"><span class=\"pre\">SelectMultiple</span></code>, and <code class=\"docutils literal notranslate\"><span class=\"pre\">Select</span></code> localized option values\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28075\">#28075</a>).</li>\n<li>Corrected the stack level of unordered queryset pagination warnings\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28109\">#28109</a>).</li>\n<li>Fixed a regression causing incorrect queries for <code class=\"docutils literal notranslate\"><span class=\"pre\">__in</span></code> subquery lookups\nwhen models use <code class=\"docutils literal notranslate\"><span class=\"pre\">ForeignKey.to_field</span></code> (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28101\">#28101</a>).</li>\n<li>Fixed crash when overriding the template of\n<code class=\"docutils literal notranslate\"><span class=\"pre\">django.views.static.directory_index()</span></code> (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28122\">#28122</a>).</li>\n<li>Fixed a regression in formset <code class=\"docutils literal notranslate\"><span class=\"pre\">min_num</span></code> validation with unchanged forms\nthat have initial data (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28130\">#28130</a>).</li>\n<li>Prepared for <code class=\"docutils literal notranslate\"><span class=\"pre\">cx_Oracle</span></code> 6.0 support (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28138\">#28138</a>).</li>\n<li>Updated the <code class=\"docutils literal notranslate\"><span class=\"pre\">contrib.postgres</span></code> <code class=\"docutils literal notranslate\"><span class=\"pre\">SplitArrayWidget</span></code> to use template-based\nwidget rendering (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28040\">#28040</a>).</li>\n<li>Fixed crash in <code class=\"docutils literal notranslate\"><span class=\"pre\">BaseGeometryWidget.get_context()</span></code> when overriding existing\n<code class=\"docutils literal notranslate\"><span class=\"pre\">attrs</span></code> (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28105\">#28105</a>).</li>\n<li>Prevented <code class=\"docutils literal notranslate\"><span class=\"pre\">AddIndex</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">RemoveIndex</span></code> from mutating model state\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28043\">#28043</a>).</li>\n<li>Prevented migrations from dropping database indexes from <code class=\"docutils literal notranslate\"><span class=\"pre\">Meta.indexes</span></code>\nwhen changing <code class=\"docutils literal notranslate\"><span class=\"pre\">Field.db_index</span></code> to <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code> (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28052\">#28052</a>).</li>\n<li>Fixed a regression in choice ordering in form fields with grouped and\nnon-grouped options (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28157\">#28157</a>).</li>\n<li>Fixed crash in  <code class=\"docutils literal notranslate\"><span class=\"pre\">BaseInlineFormSet._construct_form()</span></code> when using\n<code class=\"docutils literal notranslate\"><span class=\"pre\">save_as_new</span></code> (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28159\">#28159</a>).</li>\n<li>Fixed a regression where <code class=\"docutils literal notranslate\"><span class=\"pre\">Model._state.db</span></code> wasn\u2019t set correctly on\nmulti-table inheritance parent models after saving a child model\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28166\">#28166</a>).</li>\n<li>Corrected the return type of <code class=\"docutils literal notranslate\"><span class=\"pre\">ArrayField(CITextField())</span></code> values retrieved\nfrom the database (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28161\">#28161</a>).</li>\n<li>Fixed <code class=\"docutils literal notranslate\"><span class=\"pre\">QuerySet.prefetch_related()</span></code> crash when fetching relations in nested\n<code class=\"docutils literal notranslate\"><span class=\"pre\">Prefetch</span></code> objects (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/27554\">#27554</a>).</li>\n<li>Prevented hiding GDAL errors if it\u2019s not installed when using <code class=\"docutils literal notranslate\"><span class=\"pre\">contrib.gis</span></code>\n(<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28160\">#28160</a>). (It\u2019s a required dependency as of Django 1.11.)</li>\n<li>Fixed a regression causing <code class=\"docutils literal notranslate\"><span class=\"pre\">__in</span></code> lookups on a foreign key to fail when\nusing the foreign key\u2019s parent model as the lookup value (<a class=\"reference external\" href=\"https://code.djangoproject.com/ticket/28175\">#28175</a>).</li>\n</ul>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["releases/1.11", "Django 1.11 release notes", "N", "next"], ["releases/1.11.2", "Django 1.11.2 release notes", "P", "previous"]], "sourcename": "releases/1.11.1.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">Django 1.11.1 release notes</a><ul>\n<li><a class=\"reference internal\" href=\"#allowed-disabling-server-side-cursors-on-postgresql\">Allowed disabling server-side cursors on PostgreSQL</a></li>\n<li><a class=\"reference internal\" href=\"#bugfixes\">Bugfixes</a></li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".txt", "current_page_name": "releases/1.11.1", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}