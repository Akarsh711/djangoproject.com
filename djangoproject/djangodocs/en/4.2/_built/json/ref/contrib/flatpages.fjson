{"parents": [{"link": "../../", "title": "API Reference"}, {"link": "../", "title": "<code class=\"docutils literal notranslate\"><span class=\"pre\">contrib</span></code> packages"}], "prev": {"link": "../contenttypes/", "title": "The contenttypes framework"}, "next": {"link": "../gis/", "title": "GeoDjango"}, "title": "The flatpages app", "meta": {}, "body": "<div class=\"section\" id=\"s-module-django.contrib.flatpages\">\n<span id=\"s-the-flatpages-app\"></span><span id=\"module-django.contrib.flatpages\"></span><span id=\"the-flatpages-app\"></span><h1>The flatpages app<a class=\"headerlink\" href=\"#module-django.contrib.flatpages\" title=\"Permalink to this headline\">\u00b6</a></h1>\n<p>Django comes with an optional \u201cflatpages\u201d application. It lets you store \u201cflat\u201d\nHTML content in a database and handles the management for you via Django\u2019s\nadmin interface and a Python API.</p>\n<p>A flatpage is an object with a URL, title and content. Use it for one-off,\nspecial-case pages, such as \u201cAbout\u201d or \u201cPrivacy Policy\u201d pages, that you want to\nstore in a database but for which you don\u2019t want to develop a custom Django\napplication.</p>\n<p>A flatpage can use a custom template or a default, systemwide flatpage\ntemplate. It can be associated with one, or multiple, sites.</p>\n<p>The content field may optionally be left blank if you prefer to put your\ncontent in a custom template.</p>\n<div class=\"section\" id=\"s-installation\">\n<span id=\"installation\"></span><h2>Installation<a class=\"headerlink\" href=\"#installation\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>To install the flatpages app, follow these steps:</p>\n<ol class=\"arabic\">\n<li><p class=\"first\">Install the <a class=\"reference internal\" href=\"../sites/#module-django.contrib.sites\" title=\"django.contrib.sites: Lets you operate multiple websites from the same database and Django project\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">sites</span> <span class=\"pre\">framework</span></code></a> by adding\n<code class=\"docutils literal notranslate\"><span class=\"pre\">'django.contrib.sites'</span></code> to your <a class=\"reference internal\" href=\"../../settings/#std-setting-INSTALLED_APPS\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">INSTALLED_APPS</span></code></a> setting,\nif it\u2019s not already in there.</p>\n<p>Also make sure you\u2019ve correctly set <a class=\"reference internal\" href=\"../../settings/#std-setting-SITE_ID\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">SITE_ID</span></code></a> to the ID of the\nsite the settings file represents. This will usually be <code class=\"docutils literal notranslate\"><span class=\"pre\">1</span></code> (i.e.\n<code class=\"docutils literal notranslate\"><span class=\"pre\">SITE_ID</span> <span class=\"pre\">=</span> <span class=\"pre\">1</span></code>, but if you\u2019re using the sites framework to manage\nmultiple sites, it could be the ID of a different site.</p>\n</li>\n<li><p class=\"first\">Add <code class=\"docutils literal notranslate\"><span class=\"pre\">'django.contrib.flatpages'</span></code> to your <a class=\"reference internal\" href=\"../../settings/#std-setting-INSTALLED_APPS\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">INSTALLED_APPS</span></code></a>\nsetting.</p>\n</li>\n</ol>\n<p>Then either:</p>\n<ol class=\"arabic\" start=\"3\">\n<li><p class=\"first\">Add an entry in your URLconf. For example:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;pages/&quot;</span><span class=\"p\">,</span> <span class=\"n\">include</span><span class=\"p\">(</span><span class=\"s2\">&quot;django.contrib.flatpages.urls&quot;</span><span class=\"p\">)),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n</li>\n</ol>\n<p>or:</p>\n<ol class=\"arabic simple\" start=\"3\">\n<li>Add <code class=\"docutils literal notranslate\"><span class=\"pre\">'django.contrib.flatpages.middleware.FlatpageFallbackMiddleware'</span></code>\nto your <a class=\"reference internal\" href=\"../../settings/#std-setting-MIDDLEWARE\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">MIDDLEWARE</span></code></a> setting.</li>\n<li>Run the command <a class=\"reference internal\" href=\"../../django-admin/#django-admin-migrate\"><code class=\"xref std std-djadmin docutils literal notranslate\"><span class=\"pre\">manage.py</span> <span class=\"pre\">migrate</span></code></a>.</li>\n</ol>\n</div>\n<div class=\"section\" id=\"s-how-it-works\">\n<span id=\"how-it-works\"></span><h2>How it works<a class=\"headerlink\" href=\"#how-it-works\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p><code class=\"docutils literal notranslate\"><span class=\"pre\">manage.py</span> <span class=\"pre\">migrate</span></code> creates two tables in your database: <code class=\"docutils literal notranslate\"><span class=\"pre\">django_flatpage</span></code>\nand <code class=\"docutils literal notranslate\"><span class=\"pre\">django_flatpage_sites</span></code>. <code class=\"docutils literal notranslate\"><span class=\"pre\">django_flatpage</span></code> is a lookup table that maps\na URL to a title and bunch of text content. <code class=\"docutils literal notranslate\"><span class=\"pre\">django_flatpage_sites</span></code>\nassociates a flatpage with a site.</p>\n<div class=\"section\" id=\"s-using-the-urlconf\">\n<span id=\"using-the-urlconf\"></span><h3>Using the URLconf<a class=\"headerlink\" href=\"#using-the-urlconf\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>There are several ways to include the flat pages in your URLconf. You can\ndedicate a particular path to flat pages:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;pages/&quot;</span><span class=\"p\">,</span> <span class=\"n\">include</span><span class=\"p\">(</span><span class=\"s2\">&quot;django.contrib.flatpages.urls&quot;</span><span class=\"p\">)),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<p>You can also set it up as a \u201ccatchall\u201d pattern. In this case, it is important\nto place the pattern at the end of the other urlpatterns:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.contrib.flatpages</span> <span class=\"kn\">import</span> <span class=\"n\">views</span>\n\n<span class=\"c1\"># Your other patterns here</span>\n<span class=\"n\">urlpatterns</span> <span class=\"o\">+=</span> <span class=\"p\">[</span>\n    <span class=\"n\">re_path</span><span class=\"p\">(</span><span class=\"sa\">r</span><span class=\"s2\">&quot;^(?P&lt;url&gt;.*/)$&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">flatpage</span><span class=\"p\">),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n<div class=\"admonition warning\">\n<p class=\"first admonition-title\">Warning</p>\n<p class=\"last\">If you set <a class=\"reference internal\" href=\"../../settings/#std-setting-APPEND_SLASH\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">APPEND_SLASH</span></code></a> to <code class=\"docutils literal notranslate\"><span class=\"pre\">False</span></code>, you must remove the slash\nin the catchall pattern or flatpages without a trailing slash will not be\nmatched.</p>\n</div>\n<p>Another common setup is to use flat pages for a limited set of known pages and\nto hard code the urls, so you can reference them with the <a class=\"reference internal\" href=\"../../templates/builtins/#std-templatetag-url\"><code class=\"xref std std-ttag docutils literal notranslate\"><span class=\"pre\">url</span></code></a> template\ntag:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.contrib.flatpages</span> <span class=\"kn\">import</span> <span class=\"n\">views</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">+=</span> <span class=\"p\">[</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;about-us/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">flatpage</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s2\">&quot;url&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;/about-us/&quot;</span><span class=\"p\">},</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;about&quot;</span><span class=\"p\">),</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span><span class=\"s2\">&quot;license/&quot;</span><span class=\"p\">,</span> <span class=\"n\">views</span><span class=\"o\">.</span><span class=\"n\">flatpage</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s2\">&quot;url&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;/license/&quot;</span><span class=\"p\">},</span> <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;license&quot;</span><span class=\"p\">),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"s-using-the-middleware\">\n<span id=\"using-the-middleware\"></span><h3>Using the middleware<a class=\"headerlink\" href=\"#using-the-middleware\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>The <a class=\"reference internal\" href=\"#django.contrib.flatpages.middleware.FlatpageFallbackMiddleware\" title=\"django.contrib.flatpages.middleware.FlatpageFallbackMiddleware\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">FlatpageFallbackMiddleware</span></code></a>\ncan do all of the work.</p>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"django.contrib.flatpages.middleware.FlatpageFallbackMiddleware\">\n<em class=\"property\"><span class=\"pre\">class</span><span class=\"w\"> </span></em><code class=\"sig-name descname\"><span class=\"pre\">FlatpageFallbackMiddleware</span></code><a class=\"headerlink\" href=\"#django.contrib.flatpages.middleware.FlatpageFallbackMiddleware\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Each time any Django application raises a 404 error, this middleware\nchecks the flatpages database for the requested URL as a last resort.\nSpecifically, it checks for a flatpage with the given URL with a site ID\nthat corresponds to the <a class=\"reference internal\" href=\"../../settings/#std-setting-SITE_ID\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">SITE_ID</span></code></a> setting.</p>\n<p>If it finds a match, it follows this algorithm:</p>\n<ul class=\"simple\">\n<li>If the flatpage has a custom template, it loads that template.\nOtherwise, it loads the template <code class=\"file docutils literal notranslate\"><span class=\"pre\">flatpages/default.html</span></code>.</li>\n<li>It passes that template a single context variable, <code class=\"docutils literal notranslate\"><span class=\"pre\">flatpage</span></code>,\nwhich is the flatpage object. It uses\n<a class=\"reference internal\" href=\"../../templates/api/#django.template.RequestContext\" title=\"django.template.RequestContext\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">RequestContext</span></code></a> in rendering the\ntemplate.</li>\n</ul>\n<p>The middleware will only add a trailing slash and redirect (by looking\nat the <a class=\"reference internal\" href=\"../../settings/#std-setting-APPEND_SLASH\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">APPEND_SLASH</span></code></a> setting) if the resulting URL refers to\na valid flatpage. Redirects are permanent (301 status code).</p>\n<p>If it doesn\u2019t find a match, the request continues to be processed as usual.</p>\n<p>The middleware only gets activated for 404s \u2013 not for 500s or responses\nof any other status code.</p>\n</dd></dl>\n\n<div class=\"admonition-flatpages-will-not-apply-view-middleware admonition\">\n<p class=\"first admonition-title\">Flatpages will not apply view middleware</p>\n<p class=\"last\">Because the <code class=\"docutils literal notranslate\"><span class=\"pre\">FlatpageFallbackMiddleware</span></code> is applied only after\nURL resolution has failed and produced a 404, the response it\nreturns will not apply any <a class=\"reference internal\" href=\"../../../topics/http/middleware/#view-middleware\"><span class=\"std std-ref\">view middleware</span></a>\nmethods. Only requests which are successfully routed to a view via\nnormal URL resolution apply view middleware.</p>\n</div>\n<p>Note that the order of <a class=\"reference internal\" href=\"../../settings/#std-setting-MIDDLEWARE\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">MIDDLEWARE</span></code></a> matters. Generally, you can put\n<a class=\"reference internal\" href=\"#django.contrib.flatpages.middleware.FlatpageFallbackMiddleware\" title=\"django.contrib.flatpages.middleware.FlatpageFallbackMiddleware\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">FlatpageFallbackMiddleware</span></code></a> at the\nend of the list. This means it will run first when processing the response, and\nensures that any other response-processing middleware see the real flatpage\nresponse rather than the 404.</p>\n<p>For more on middleware, read the <a class=\"reference internal\" href=\"../../../topics/http/middleware/\"><span class=\"doc\">middleware docs</span></a>.</p>\n<div class=\"admonition-ensure-that-your-404-template-works admonition\">\n<p class=\"first admonition-title\">Ensure that your 404 template works</p>\n<p class=\"last\">Note that the\n<a class=\"reference internal\" href=\"#django.contrib.flatpages.middleware.FlatpageFallbackMiddleware\" title=\"django.contrib.flatpages.middleware.FlatpageFallbackMiddleware\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">FlatpageFallbackMiddleware</span></code></a>\nonly steps in once another view has successfully produced a 404 response.\nIf another view or middleware class attempts to produce a 404 but ends up\nraising an exception instead, the response will become an HTTP 500\n(\u201cInternal Server Error\u201d) and the\n<a class=\"reference internal\" href=\"#django.contrib.flatpages.middleware.FlatpageFallbackMiddleware\" title=\"django.contrib.flatpages.middleware.FlatpageFallbackMiddleware\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">FlatpageFallbackMiddleware</span></code></a>\nwill not attempt to serve a flat page.</p>\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"s-how-to-add-change-and-delete-flatpages\">\n<span id=\"how-to-add-change-and-delete-flatpages\"></span><h2>How to add, change and delete flatpages<a class=\"headerlink\" href=\"#how-to-add-change-and-delete-flatpages\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<div class=\"section\" id=\"s-via-the-admin-interface\">\n<span id=\"s-flatpages-admin\"></span><span id=\"via-the-admin-interface\"></span><span id=\"flatpages-admin\"></span><h3>Via the admin interface<a class=\"headerlink\" href=\"#via-the-admin-interface\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>If you\u2019ve activated the automatic Django admin interface, you should see a\n\u201cFlatpages\u201d section on the admin index page. Edit flatpages as you edit any\nother object in the system.</p>\n<p>The <code class=\"docutils literal notranslate\"><span class=\"pre\">FlatPage</span></code> model has an <code class=\"docutils literal notranslate\"><span class=\"pre\">enable_comments</span></code> field that isn\u2019t used by\n<code class=\"docutils literal notranslate\"><span class=\"pre\">contrib.flatpages</span></code>, but that could be useful for your project or third-party\napps. It doesn\u2019t appear in the admin interface, but you can add it by\nregistering a custom <code class=\"docutils literal notranslate\"><span class=\"pre\">ModelAdmin</span></code> for <code class=\"docutils literal notranslate\"><span class=\"pre\">FlatPage</span></code>:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.contrib</span> <span class=\"kn\">import</span> <span class=\"n\">admin</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.contrib.flatpages.admin</span> <span class=\"kn\">import</span> <span class=\"n\">FlatPageAdmin</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.contrib.flatpages.models</span> <span class=\"kn\">import</span> <span class=\"n\">FlatPage</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.utils.translation</span> <span class=\"kn\">import</span> <span class=\"n\">gettext_lazy</span> <span class=\"k\">as</span> <span class=\"n\">_</span>\n\n\n<span class=\"c1\"># Define a new FlatPageAdmin</span>\n<span class=\"k\">class</span> <span class=\"nc\">FlatPageAdmin</span><span class=\"p\">(</span><span class=\"n\">FlatPageAdmin</span><span class=\"p\">):</span>\n    <span class=\"n\">fieldsets</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n        <span class=\"p\">(</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s2\">&quot;fields&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;url&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;title&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;content&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;sites&quot;</span><span class=\"p\">]}),</span>\n        <span class=\"p\">(</span>\n            <span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s2\">&quot;Advanced options&quot;</span><span class=\"p\">),</span>\n            <span class=\"p\">{</span>\n                <span class=\"s2\">&quot;classes&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span><span class=\"s2\">&quot;collapse&quot;</span><span class=\"p\">],</span>\n                <span class=\"s2\">&quot;fields&quot;</span><span class=\"p\">:</span> <span class=\"p\">[</span>\n                    <span class=\"s2\">&quot;enable_comments&quot;</span><span class=\"p\">,</span>\n                    <span class=\"s2\">&quot;registration_required&quot;</span><span class=\"p\">,</span>\n                    <span class=\"s2\">&quot;template_name&quot;</span><span class=\"p\">,</span>\n                <span class=\"p\">],</span>\n            <span class=\"p\">},</span>\n        <span class=\"p\">),</span>\n    <span class=\"p\">]</span>\n\n\n<span class=\"c1\"># Re-register FlatPageAdmin</span>\n<span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">site</span><span class=\"o\">.</span><span class=\"n\">unregister</span><span class=\"p\">(</span><span class=\"n\">FlatPage</span><span class=\"p\">)</span>\n<span class=\"n\">admin</span><span class=\"o\">.</span><span class=\"n\">site</span><span class=\"o\">.</span><span class=\"n\">register</span><span class=\"p\">(</span><span class=\"n\">FlatPage</span><span class=\"p\">,</span> <span class=\"n\">FlatPageAdmin</span><span class=\"p\">)</span>\n</pre></div>\n</div>\n</div>\n<div class=\"section\" id=\"s-via-the-python-api\">\n<span id=\"via-the-python-api\"></span><h3>Via the Python API<a class=\"headerlink\" href=\"#via-the-python-api\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"django.contrib.flatpages.models.FlatPage\">\n<em class=\"property\"><span class=\"pre\">class</span><span class=\"w\"> </span></em><code class=\"sig-name descname\"><span class=\"pre\">FlatPage</span></code><a class=\"headerlink\" href=\"#django.contrib.flatpages.models.FlatPage\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>Flatpages are represented by a standard\n<a class=\"reference internal\" href=\"../../../topics/db/models/\"><span class=\"doc\">Django model</span></a>,\nwhich lives in <a class=\"reference external\" href=\"https://github.com/django/django/blob/main/django/contrib/flatpages/models.py\">django/contrib/flatpages/models.py</a>. You can access\nflatpage objects via the <a class=\"reference internal\" href=\"../../../topics/db/queries/\"><span class=\"doc\">Django database API</span></a>.</p>\n</dd></dl>\n\n<div class=\"admonition-check-for-duplicate-flatpage-urls admonition\">\n<p class=\"first admonition-title\">Check for duplicate flatpage URLs.</p>\n<p class=\"last\">If you add or modify flatpages via your own code, you will likely want to\ncheck for duplicate flatpage URLs within the same site. The flatpage form\nused in the admin performs this validation check, and can be imported from\n<code class=\"docutils literal notranslate\"><span class=\"pre\">django.contrib.flatpages.forms.FlatpageForm</span></code> and used in your own\nviews.</p>\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"s-flatpage-templates\">\n<span id=\"flatpage-templates\"></span><h2>Flatpage templates<a class=\"headerlink\" href=\"#flatpage-templates\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>By default, flatpages are rendered via the template\n<code class=\"file docutils literal notranslate\"><span class=\"pre\">flatpages/default.html</span></code>, but you can override that for a\nparticular flatpage: in the admin, a collapsed fieldset titled\n\u201cAdvanced options\u201d (clicking will expand it) contains a field for\nspecifying a template name. If you\u2019re creating a flat page via the\nPython API you can set the template name as the field <code class=\"docutils literal notranslate\"><span class=\"pre\">template_name</span></code> on the\n<code class=\"docutils literal notranslate\"><span class=\"pre\">FlatPage</span></code> object.</p>\n<p>Creating the <code class=\"file docutils literal notranslate\"><span class=\"pre\">flatpages/default.html</span></code> template is your responsibility;\nin your template directory, create a <code class=\"file docutils literal notranslate\"><span class=\"pre\">flatpages</span></code> directory containing a\nfile <code class=\"file docutils literal notranslate\"><span class=\"pre\">default.html</span></code>.</p>\n<p>Flatpage templates are passed a single context variable, <code class=\"docutils literal notranslate\"><span class=\"pre\">flatpage</span></code>,\nwhich is the flatpage object.</p>\n<p>Here\u2019s a sample <code class=\"file docutils literal notranslate\"><span class=\"pre\">flatpages/default.html</span></code> template:</p>\n<div class=\"highlight-html+django notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cp\">&lt;!DOCTYPE html&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span><span class=\"cp\">{{</span> <span class=\"nv\">flatpage.title</span> <span class=\"cp\">}}</span><span class=\"p\">&lt;/</span><span class=\"nt\">title</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">head</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n<span class=\"cp\">{{</span> <span class=\"nv\">flatpage.content</span> <span class=\"cp\">}}</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">body</span><span class=\"p\">&gt;</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">html</span><span class=\"p\">&gt;</span>\n</pre></div>\n</div>\n<p>Since you\u2019re already entering raw HTML into the admin page for a flatpage,\nboth <code class=\"docutils literal notranslate\"><span class=\"pre\">flatpage.title</span></code> and <code class=\"docutils literal notranslate\"><span class=\"pre\">flatpage.content</span></code> are marked as <strong>not</strong>\nrequiring <a class=\"reference internal\" href=\"../../templates/language/#automatic-html-escaping\"><span class=\"std std-ref\">automatic HTML escaping</span></a> in the\ntemplate.</p>\n</div>\n<div class=\"section\" id=\"s-getting-a-list-of-flatpage-objects-in-your-templates\">\n<span id=\"getting-a-list-of-flatpage-objects-in-your-templates\"></span><h2>Getting a list of <a class=\"reference internal\" href=\"#django.contrib.flatpages.models.FlatPage\" title=\"django.contrib.flatpages.models.FlatPage\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">FlatPage</span></code></a> objects in your templates<a class=\"headerlink\" href=\"#getting-a-list-of-flatpage-objects-in-your-templates\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<p>The flatpages app provides a template tag that allows you to iterate\nover all of the available flatpages on the <a class=\"reference internal\" href=\"../sites/#hooking-into-current-site-from-views\"><span class=\"std std-ref\">current site</span></a>.</p>\n<p>Like all custom template tags, you\u2019ll need to <a class=\"reference internal\" href=\"../../templates/language/#loading-custom-template-libraries\"><span class=\"std std-ref\">load its custom\ntag library</span></a> before you can use\nit. After loading the library, you can retrieve all current flatpages\nvia the <a class=\"reference internal\" href=\"#std-templatetag-get_flatpages\"><code class=\"xref std std-ttag docutils literal notranslate\"><span class=\"pre\">get_flatpages</span></code></a> tag:</p>\n<div class=\"highlight-html+django notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cp\">{%</span> <span class=\"k\">load</span> <span class=\"nv\">flatpages</span> <span class=\"cp\">%}</span>\n<span class=\"cp\">{%</span> <span class=\"k\">get_flatpages</span> <span class=\"k\">as</span> <span class=\"nv\">flatpages</span> <span class=\"cp\">%}</span>\n<span class=\"p\">&lt;</span><span class=\"nt\">ul</span><span class=\"p\">&gt;</span>\n    <span class=\"cp\">{%</span> <span class=\"k\">for</span> <span class=\"nv\">page</span> <span class=\"k\">in</span> <span class=\"nv\">flatpages</span> <span class=\"cp\">%}</span>\n        <span class=\"p\">&lt;</span><span class=\"nt\">li</span><span class=\"p\">&gt;&lt;</span><span class=\"nt\">a</span> <span class=\"na\">href</span><span class=\"o\">=</span><span class=\"s\">&quot;</span><span class=\"cp\">{{</span> <span class=\"nv\">page.url</span> <span class=\"cp\">}}</span><span class=\"s\">&quot;</span><span class=\"p\">&gt;</span><span class=\"cp\">{{</span> <span class=\"nv\">page.title</span> <span class=\"cp\">}}</span><span class=\"p\">&lt;/</span><span class=\"nt\">a</span><span class=\"p\">&gt;&lt;/</span><span class=\"nt\">li</span><span class=\"p\">&gt;</span>\n    <span class=\"cp\">{%</span> <span class=\"k\">endfor</span> <span class=\"cp\">%}</span>\n<span class=\"p\">&lt;/</span><span class=\"nt\">ul</span><span class=\"p\">&gt;</span>\n</pre></div>\n</div>\n<div class=\"section\" id=\"s-displaying-registration-required-flatpages\">\n<span id=\"s-std-templatetag-get_flatpages\"></span><span id=\"s-std:templatetag-get_flatpages\"></span><span id=\"displaying-registration-required-flatpages\"></span><span id=\"std-templatetag-get_flatpages\"></span><span id=\"std:templatetag-get_flatpages\"></span><h3>Displaying <code class=\"docutils literal notranslate\"><span class=\"pre\">registration_required</span></code> flatpages<a class=\"headerlink\" href=\"#displaying-registration-required-flatpages\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>By default, the <a class=\"reference internal\" href=\"#std-templatetag-get_flatpages\"><code class=\"xref std std-ttag docutils literal notranslate\"><span class=\"pre\">get_flatpages</span></code></a> template tag will only show\nflatpages that are marked <code class=\"docutils literal notranslate\"><span class=\"pre\">registration_required</span> <span class=\"pre\">=</span> <span class=\"pre\">False</span></code>. If you\nwant to display registration-protected flatpages, you need to specify\nan authenticated user using a <code class=\"docutils literal notranslate\"><span class=\"pre\">for</span></code> clause.</p>\n<p>For example:</p>\n<div class=\"highlight-html+django notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cp\">{%</span> <span class=\"k\">get_flatpages</span> <span class=\"nv\">for</span> <span class=\"nv\">someuser</span> <span class=\"k\">as</span> <span class=\"nv\">about_pages</span> <span class=\"cp\">%}</span>\n</pre></div>\n</div>\n<p>If you provide an anonymous user, <a class=\"reference internal\" href=\"#std-templatetag-get_flatpages\"><code class=\"xref std std-ttag docutils literal notranslate\"><span class=\"pre\">get_flatpages</span></code></a> will behave\nthe same as if you hadn\u2019t provided a user \u2013 i.e., it will only show you\npublic flatpages.</p>\n</div>\n<div class=\"section\" id=\"s-limiting-flatpages-by-base-url\">\n<span id=\"limiting-flatpages-by-base-url\"></span><h3>Limiting flatpages by base URL<a class=\"headerlink\" href=\"#limiting-flatpages-by-base-url\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>An optional argument, <code class=\"docutils literal notranslate\"><span class=\"pre\">starts_with</span></code>, can be applied to limit the\nreturned pages to those beginning with a particular base URL. This\nargument may be passed as a string, or as a variable to be resolved\nfrom the context.</p>\n<p>For example:</p>\n<div class=\"highlight-html+django notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"cp\">{%</span> <span class=\"k\">get_flatpages</span> <span class=\"s1\">&#39;/about/&#39;</span> <span class=\"k\">as</span> <span class=\"nv\">about_pages</span> <span class=\"cp\">%}</span>\n<span class=\"cp\">{%</span> <span class=\"k\">get_flatpages</span> <span class=\"nv\">about_prefix</span> <span class=\"k\">as</span> <span class=\"nv\">about_pages</span> <span class=\"cp\">%}</span>\n<span class=\"cp\">{%</span> <span class=\"k\">get_flatpages</span> <span class=\"s1\">&#39;/about/&#39;</span> <span class=\"nv\">for</span> <span class=\"nv\">someuser</span> <span class=\"k\">as</span> <span class=\"nv\">about_pages</span> <span class=\"cp\">%}</span>\n</pre></div>\n</div>\n</div>\n</div>\n<div class=\"section\" id=\"s-integrating-with-django-contrib-sitemaps\">\n<span id=\"integrating-with-django-contrib-sitemaps\"></span><h2>Integrating with <a class=\"reference internal\" href=\"../sitemaps/#module-django.contrib.sitemaps\" title=\"django.contrib.sitemaps: A framework for generating Google sitemap XML files.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.contrib.sitemaps</span></code></a><a class=\"headerlink\" href=\"#integrating-with-django-contrib-sitemaps\" title=\"Permalink to this headline\">\u00b6</a></h2>\n<dl class=\"py class\">\n<dt class=\"sig sig-object py\" id=\"django.contrib.flatpages.sitemaps.FlatPageSitemap\">\n<em class=\"property\"><span class=\"pre\">class</span><span class=\"w\"> </span></em><code class=\"sig-name descname\"><span class=\"pre\">FlatPageSitemap</span></code><a class=\"reference internal\" href=\"../../../_modules/django/contrib/flatpages/sitemaps/#FlatPageSitemap\"><span class=\"viewcode-link\"><span class=\"pre\">[source]</span></span></a><a class=\"headerlink\" href=\"#django.contrib.flatpages.sitemaps.FlatPageSitemap\" title=\"Permalink to this definition\">\u00b6</a></dt>\n<dd><p>The <a class=\"reference internal\" href=\"#django.contrib.flatpages.sitemaps.FlatPageSitemap\" title=\"django.contrib.flatpages.sitemaps.FlatPageSitemap\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">sitemaps.FlatPageSitemap</span></code></a> class looks at all\npublicly visible <a class=\"reference internal\" href=\"#module-django.contrib.flatpages\" title=\"django.contrib.flatpages: A framework for managing simple ?flat? HTML content in a database.\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">flatpages</span></code></a> defined for the current\n<a class=\"reference internal\" href=\"../../settings/#std-setting-SITE_ID\"><code class=\"xref std std-setting docutils literal notranslate\"><span class=\"pre\">SITE_ID</span></code></a> (see the <a class=\"reference internal\" href=\"../sites/#module-django.contrib.sites\" title=\"django.contrib.sites: Lets you operate multiple websites from the same database and Django project\"><code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">sites</span> <span class=\"pre\">documentation</span></code></a>) and creates an entry in the sitemap. These entries\ninclude only the <a class=\"reference internal\" href=\"../sitemaps/#django.contrib.sitemaps.Sitemap.location\" title=\"django.contrib.sitemaps.Sitemap.location\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">location</span></code></a>\nattribute \u2013 not <a class=\"reference internal\" href=\"../sitemaps/#django.contrib.sitemaps.Sitemap.lastmod\" title=\"django.contrib.sitemaps.Sitemap.lastmod\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">lastmod</span></code></a>,\n<a class=\"reference internal\" href=\"../sitemaps/#django.contrib.sitemaps.Sitemap.changefreq\" title=\"django.contrib.sitemaps.Sitemap.changefreq\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">changefreq</span></code></a> or\n<a class=\"reference internal\" href=\"../sitemaps/#django.contrib.sitemaps.Sitemap.priority\" title=\"django.contrib.sitemaps.Sitemap.priority\"><code class=\"xref py py-attr docutils literal notranslate\"><span class=\"pre\">priority</span></code></a>.</p>\n</dd></dl>\n\n<div class=\"section\" id=\"s-example\">\n<span id=\"example\"></span><h3>Example<a class=\"headerlink\" href=\"#example\" title=\"Permalink to this headline\">\u00b6</a></h3>\n<p>Here\u2019s an example of a URLconf using <a class=\"reference internal\" href=\"#django.contrib.flatpages.sitemaps.FlatPageSitemap\" title=\"django.contrib.flatpages.sitemaps.FlatPageSitemap\"><code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">FlatPageSitemap</span></code></a>:</p>\n<div class=\"highlight-default notranslate\"><div class=\"highlight\"><pre><span></span><span class=\"kn\">from</span> <span class=\"nn\">django.contrib.flatpages.sitemaps</span> <span class=\"kn\">import</span> <span class=\"n\">FlatPageSitemap</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.contrib.sitemaps.views</span> <span class=\"kn\">import</span> <span class=\"n\">sitemap</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.urls</span> <span class=\"kn\">import</span> <span class=\"n\">path</span>\n\n<span class=\"n\">urlpatterns</span> <span class=\"o\">=</span> <span class=\"p\">[</span>\n    <span class=\"c1\"># ...</span>\n    <span class=\"c1\"># the sitemap</span>\n    <span class=\"n\">path</span><span class=\"p\">(</span>\n        <span class=\"s2\">&quot;sitemap.xml&quot;</span><span class=\"p\">,</span>\n        <span class=\"n\">sitemap</span><span class=\"p\">,</span>\n        <span class=\"p\">{</span><span class=\"s2\">&quot;sitemaps&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"s2\">&quot;flatpages&quot;</span><span class=\"p\">:</span> <span class=\"n\">FlatPageSitemap</span><span class=\"p\">}},</span>\n        <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"s2\">&quot;django.contrib.sitemaps.views.sitemap&quot;</span><span class=\"p\">,</span>\n    <span class=\"p\">),</span>\n<span class=\"p\">]</span>\n</pre></div>\n</div>\n</div>\n</div>\n</div>\n", "metatags": "", "rellinks": [["genindex", "General Index", "I", "index"], ["py-modindex", "Python Module Index", "", "modules"], ["ref/contrib/gis/index", "GeoDjango", "N", "next"], ["ref/contrib/contenttypes", "The contenttypes framework", "P", "previous"]], "sourcename": "ref/contrib/flatpages.txt", "toc": "<ul>\n<li><a class=\"reference internal\" href=\"#\">The flatpages app</a><ul>\n<li><a class=\"reference internal\" href=\"#installation\">Installation</a></li>\n<li><a class=\"reference internal\" href=\"#how-it-works\">How it works</a><ul>\n<li><a class=\"reference internal\" href=\"#using-the-urlconf\">Using the URLconf</a></li>\n<li><a class=\"reference internal\" href=\"#using-the-middleware\">Using the middleware</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#how-to-add-change-and-delete-flatpages\">How to add, change and delete flatpages</a><ul>\n<li><a class=\"reference internal\" href=\"#via-the-admin-interface\">Via the admin interface</a></li>\n<li><a class=\"reference internal\" href=\"#via-the-python-api\">Via the Python API</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#flatpage-templates\">Flatpage templates</a></li>\n<li><a class=\"reference internal\" href=\"#getting-a-list-of-flatpage-objects-in-your-templates\">Getting a list of <code class=\"xref py py-class docutils literal notranslate\"><span class=\"pre\">FlatPage</span></code> objects in your templates</a><ul>\n<li><a class=\"reference internal\" href=\"#displaying-registration-required-flatpages\">Displaying <code class=\"docutils literal notranslate\"><span class=\"pre\">registration_required</span></code> flatpages</a></li>\n<li><a class=\"reference internal\" href=\"#limiting-flatpages-by-base-url\">Limiting flatpages by base URL</a></li>\n</ul>\n</li>\n<li><a class=\"reference internal\" href=\"#integrating-with-django-contrib-sitemaps\">Integrating with <code class=\"xref py py-mod docutils literal notranslate\"><span class=\"pre\">django.contrib.sitemaps</span></code></a><ul>\n<li><a class=\"reference internal\" href=\"#example\">Example</a></li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n", "display_toc": true, "page_source_suffix": ".txt", "current_page_name": "ref/contrib/flatpages", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}
