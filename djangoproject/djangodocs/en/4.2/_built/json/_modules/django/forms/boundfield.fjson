{"parents": [{"link": "../../../", "title": "Module code"}, {"link": "../../", "title": "django"}], "title": "django.forms.boundfield", "body": "<h1>Source code for django.forms.boundfield</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"kn\">import</span> <span class=\"nn\">re</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">django.core.exceptions</span> <span class=\"kn\">import</span> <span class=\"n\">ValidationError</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.forms.utils</span> <span class=\"kn\">import</span> <span class=\"n\">RenderableFieldMixin</span><span class=\"p\">,</span> <span class=\"n\">pretty_name</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.forms.widgets</span> <span class=\"kn\">import</span> <span class=\"n\">MultiWidget</span><span class=\"p\">,</span> <span class=\"n\">Textarea</span><span class=\"p\">,</span> <span class=\"n\">TextInput</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.utils.functional</span> <span class=\"kn\">import</span> <span class=\"n\">cached_property</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.utils.html</span> <span class=\"kn\">import</span> <span class=\"n\">format_html</span><span class=\"p\">,</span> <span class=\"n\">html_safe</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.utils.translation</span> <span class=\"kn\">import</span> <span class=\"n\">gettext_lazy</span> <span class=\"k\">as</span> <span class=\"n\">_</span>\n\n<span class=\"n\">__all__</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"s2\">&quot;BoundField&quot;</span><span class=\"p\">,)</span>\n\n\n<div class=\"viewcode-block\" id=\"BoundField\"><a class=\"viewcode-back\" href=\"../../../../ref/forms/api/#django.forms.BoundField\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">BoundField</span><span class=\"p\">(</span><span class=\"n\">RenderableFieldMixin</span><span class=\"p\">):</span>\n    <span class=\"s2\">&quot;A Field plus data&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">form</span><span class=\"p\">,</span> <span class=\"n\">field</span><span class=\"p\">,</span> <span class=\"n\">name</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span> <span class=\"o\">=</span> <span class=\"n\">form</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span> <span class=\"o\">=</span> <span class=\"n\">field</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">name</span> <span class=\"o\">=</span> <span class=\"n\">name</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">html_name</span> <span class=\"o\">=</span> <span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">add_prefix</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">html_initial_name</span> <span class=\"o\">=</span> <span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">add_initial_prefix</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">html_initial_id</span> <span class=\"o\">=</span> <span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">add_initial_prefix</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">auto_id</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">label</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">label</span> <span class=\"o\">=</span> <span class=\"n\">pretty_name</span><span class=\"p\">(</span><span class=\"n\">name</span><span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">label</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">label</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">help_text</span> <span class=\"o\">=</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">help_text</span> <span class=\"ow\">or</span> <span class=\"s2\">&quot;&quot;</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">renderer</span> <span class=\"o\">=</span> <span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">renderer</span>\n\n    <span class=\"nd\">@cached_property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">subwidgets</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Most widgets yield a single subwidget, but others like RadioSelect and</span>\n<span class=\"sd\">        CheckboxSelectMultiple produce one subwidget for each choice.</span>\n\n<span class=\"sd\">        This property is cached so that only one database query occurs when</span>\n<span class=\"sd\">        rendering ModelChoiceFields.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"n\">id_</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">attrs</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">&quot;id&quot;</span><span class=\"p\">)</span> <span class=\"ow\">or</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">auto_id</span>\n        <span class=\"n\">attrs</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s2\">&quot;id&quot;</span><span class=\"p\">:</span> <span class=\"n\">id_</span><span class=\"p\">}</span> <span class=\"k\">if</span> <span class=\"n\">id_</span> <span class=\"k\">else</span> <span class=\"p\">{}</span>\n        <span class=\"n\">attrs</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">build_widget_attrs</span><span class=\"p\">(</span><span class=\"n\">attrs</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"p\">[</span>\n            <span class=\"n\">BoundWidget</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">widget</span><span class=\"p\">,</span> <span class=\"n\">widget</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">renderer</span><span class=\"p\">)</span>\n            <span class=\"k\">for</span> <span class=\"n\">widget</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">subwidgets</span><span class=\"p\">(</span>\n                <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">html_name</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">value</span><span class=\"p\">(),</span> <span class=\"n\">attrs</span><span class=\"o\">=</span><span class=\"n\">attrs</span>\n            <span class=\"p\">)</span>\n        <span class=\"p\">]</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__bool__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"c1\"># BoundField evaluates to True even if it doesn&#39;t have subwidgets.</span>\n        <span class=\"k\">return</span> <span class=\"kc\">True</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__iter__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"nb\">iter</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">subwidgets</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__len__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">subwidgets</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__getitem__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">idx</span><span class=\"p\">):</span>\n        <span class=\"c1\"># Prevent unnecessary reevaluation when accessing BoundField&#39;s attrs</span>\n        <span class=\"c1\"># from templates.</span>\n        <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">idx</span><span class=\"p\">,</span> <span class=\"p\">(</span><span class=\"nb\">int</span><span class=\"p\">,</span> <span class=\"nb\">slice</span><span class=\"p\">)):</span>\n            <span class=\"k\">raise</span> <span class=\"ne\">TypeError</span><span class=\"p\">(</span>\n                <span class=\"s2\">&quot;BoundField indices must be integers or slices, not </span><span class=\"si\">%s</span><span class=\"s2\">.&quot;</span>\n                <span class=\"o\">%</span> <span class=\"nb\">type</span><span class=\"p\">(</span><span class=\"n\">idx</span><span class=\"p\">)</span><span class=\"o\">.</span><span class=\"vm\">__name__</span>\n            <span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">subwidgets</span><span class=\"p\">[</span><span class=\"n\">idx</span><span class=\"p\">]</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">errors</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Return an ErrorList (empty if there are no errors) for this field.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">errors</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">error_class</span><span class=\"p\">(</span><span class=\"n\">renderer</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">renderer</span><span class=\"p\">)</span>\n        <span class=\"p\">)</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">template_name</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">template_name</span> <span class=\"ow\">or</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">renderer</span><span class=\"o\">.</span><span class=\"n\">field_template_name</span>\n\n<div class=\"viewcode-block\" id=\"BoundField.get_context\"><a class=\"viewcode-back\" href=\"../../../../ref/forms/api/#django.forms.BoundField.get_context\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">get_context</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"p\">{</span><span class=\"s2\">&quot;field&quot;</span><span class=\"p\">:</span> <span class=\"bp\">self</span><span class=\"p\">}</span></div>\n\n<div class=\"viewcode-block\" id=\"BoundField.as_widget\"><a class=\"viewcode-back\" href=\"../../../../ref/forms/api/#django.forms.BoundField.as_widget\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">as_widget</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">widget</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">attrs</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">only_initial</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Render the field by rendering the passed widget, adding any HTML</span>\n<span class=\"sd\">        attributes passed as attrs. If a widget isn&#39;t specified, use the</span>\n<span class=\"sd\">        field&#39;s default widget.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"n\">widget</span> <span class=\"o\">=</span> <span class=\"n\">widget</span> <span class=\"ow\">or</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">widget</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">localize</span><span class=\"p\">:</span>\n            <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">is_localized</span> <span class=\"o\">=</span> <span class=\"kc\">True</span>\n        <span class=\"n\">attrs</span> <span class=\"o\">=</span> <span class=\"n\">attrs</span> <span class=\"ow\">or</span> <span class=\"p\">{}</span>\n        <span class=\"n\">attrs</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">build_widget_attrs</span><span class=\"p\">(</span><span class=\"n\">attrs</span><span class=\"p\">,</span> <span class=\"n\">widget</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">auto_id</span> <span class=\"ow\">and</span> <span class=\"s2\">&quot;id&quot;</span> <span class=\"ow\">not</span> <span class=\"ow\">in</span> <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">attrs</span><span class=\"p\">:</span>\n            <span class=\"n\">attrs</span><span class=\"o\">.</span><span class=\"n\">setdefault</span><span class=\"p\">(</span>\n                <span class=\"s2\">&quot;id&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">html_initial_id</span> <span class=\"k\">if</span> <span class=\"n\">only_initial</span> <span class=\"k\">else</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">auto_id</span>\n            <span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"n\">only_initial</span> <span class=\"ow\">and</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">html_initial_name</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">:</span>\n            <span class=\"c1\"># Propagate the hidden initial value.</span>\n            <span class=\"n\">value</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">_widget_data_value</span><span class=\"p\">(</span>\n                <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">hidden_widget</span><span class=\"p\">(),</span>\n                <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">html_initial_name</span><span class=\"p\">,</span>\n            <span class=\"p\">)</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">value</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">value</span><span class=\"p\">()</span>\n        <span class=\"k\">return</span> <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">render</span><span class=\"p\">(</span>\n            <span class=\"n\">name</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">html_initial_name</span> <span class=\"k\">if</span> <span class=\"n\">only_initial</span> <span class=\"k\">else</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">html_name</span><span class=\"p\">,</span>\n            <span class=\"n\">value</span><span class=\"o\">=</span><span class=\"n\">value</span><span class=\"p\">,</span>\n            <span class=\"n\">attrs</span><span class=\"o\">=</span><span class=\"n\">attrs</span><span class=\"p\">,</span>\n            <span class=\"n\">renderer</span><span class=\"o\">=</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">renderer</span><span class=\"p\">,</span>\n        <span class=\"p\">)</span></div>\n\n    <span class=\"k\">def</span> <span class=\"nf\">as_text</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">attrs</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Return a string of HTML for representing this as an &lt;input type=&quot;text&quot;&gt;.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">as_widget</span><span class=\"p\">(</span><span class=\"n\">TextInput</span><span class=\"p\">(),</span> <span class=\"n\">attrs</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">as_textarea</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">attrs</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;Return a string of HTML for representing this as a &lt;textarea&gt;.&quot;&quot;&quot;</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">as_widget</span><span class=\"p\">(</span><span class=\"n\">Textarea</span><span class=\"p\">(),</span> <span class=\"n\">attrs</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span>\n\n<div class=\"viewcode-block\" id=\"BoundField.as_hidden\"><a class=\"viewcode-back\" href=\"../../../../ref/forms/api/#django.forms.BoundField.as_hidden\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">as_hidden</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">attrs</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Return a string of HTML for representing this as an &lt;input type=&quot;hidden&quot;&gt;.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">as_widget</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">hidden_widget</span><span class=\"p\">(),</span> <span class=\"n\">attrs</span><span class=\"p\">,</span> <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">)</span></div>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">data</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Return the data for this BoundField, or None if it wasn&#39;t given.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">_widget_data_value</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">widget</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">html_name</span><span class=\"p\">)</span>\n\n<div class=\"viewcode-block\" id=\"BoundField.value\"><a class=\"viewcode-back\" href=\"../../../../ref/forms/api/#django.forms.BoundField.value\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">value</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Return the value for this BoundField, using the initial value if</span>\n<span class=\"sd\">        the form is not bound or the data otherwise.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">initial</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">is_bound</span><span class=\"p\">:</span>\n            <span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">bound_data</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">prepare_value</span><span class=\"p\">(</span><span class=\"n\">data</span><span class=\"p\">)</span></div>\n\n    <span class=\"k\">def</span> <span class=\"nf\">_has_changed</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"n\">field</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span>\n        <span class=\"k\">if</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">show_hidden_initial</span><span class=\"p\">:</span>\n            <span class=\"n\">hidden_widget</span> <span class=\"o\">=</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">hidden_widget</span><span class=\"p\">()</span>\n            <span class=\"n\">initial_value</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">_widget_data_value</span><span class=\"p\">(</span>\n                <span class=\"n\">hidden_widget</span><span class=\"p\">,</span>\n                <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">html_initial_name</span><span class=\"p\">,</span>\n            <span class=\"p\">)</span>\n            <span class=\"k\">try</span><span class=\"p\">:</span>\n                <span class=\"n\">initial_value</span> <span class=\"o\">=</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">to_python</span><span class=\"p\">(</span><span class=\"n\">initial_value</span><span class=\"p\">)</span>\n            <span class=\"k\">except</span> <span class=\"n\">ValidationError</span><span class=\"p\">:</span>\n                <span class=\"c1\"># Always assume data has changed if validation fails.</span>\n                <span class=\"k\">return</span> <span class=\"kc\">True</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">initial_value</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">initial</span>\n        <span class=\"k\">return</span> <span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">has_changed</span><span class=\"p\">(</span><span class=\"n\">initial_value</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">)</span>\n\n<div class=\"viewcode-block\" id=\"BoundField.label_tag\"><a class=\"viewcode-back\" href=\"../../../../ref/forms/api/#django.forms.BoundField.label_tag\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">label_tag</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">contents</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">attrs</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">label_suffix</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">tag</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Wrap the given contents in a &lt;label&gt;, if the field has an ID attribute.</span>\n<span class=\"sd\">        contents should be mark_safe&#39;d to avoid HTML escaping. If contents</span>\n<span class=\"sd\">        aren&#39;t given, use the field&#39;s HTML-escaped label.</span>\n\n<span class=\"sd\">        If attrs are given, use them as HTML attributes on the &lt;label&gt; tag.</span>\n\n<span class=\"sd\">        label_suffix overrides the form&#39;s label_suffix.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"n\">contents</span> <span class=\"o\">=</span> <span class=\"n\">contents</span> <span class=\"ow\">or</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">label</span>\n        <span class=\"k\">if</span> <span class=\"n\">label_suffix</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">label_suffix</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n                <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">label_suffix</span>\n                <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">label_suffix</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span>\n                <span class=\"k\">else</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">label_suffix</span>\n            <span class=\"p\">)</span>\n        <span class=\"c1\"># Only add the suffix if the label does not end in punctuation.</span>\n        <span class=\"c1\"># Translators: If found as last label character, these punctuation</span>\n        <span class=\"c1\"># characters will prevent the default label_suffix to be appended to the label</span>\n        <span class=\"k\">if</span> <span class=\"n\">label_suffix</span> <span class=\"ow\">and</span> <span class=\"n\">contents</span> <span class=\"ow\">and</span> <span class=\"n\">contents</span><span class=\"p\">[</span><span class=\"o\">-</span><span class=\"mi\">1</span><span class=\"p\">]</span> <span class=\"ow\">not</span> <span class=\"ow\">in</span> <span class=\"n\">_</span><span class=\"p\">(</span><span class=\"s2\">&quot;:?.!&quot;</span><span class=\"p\">):</span>\n            <span class=\"n\">contents</span> <span class=\"o\">=</span> <span class=\"n\">format_html</span><span class=\"p\">(</span><span class=\"s2\">&quot;</span><span class=\"si\">{}{}</span><span class=\"s2\">&quot;</span><span class=\"p\">,</span> <span class=\"n\">contents</span><span class=\"p\">,</span> <span class=\"n\">label_suffix</span><span class=\"p\">)</span>\n        <span class=\"n\">widget</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">widget</span>\n        <span class=\"n\">id_</span> <span class=\"o\">=</span> <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">attrs</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">&quot;id&quot;</span><span class=\"p\">)</span> <span class=\"ow\">or</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">auto_id</span>\n        <span class=\"k\">if</span> <span class=\"n\">id_</span><span class=\"p\">:</span>\n            <span class=\"n\">id_for_label</span> <span class=\"o\">=</span> <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">id_for_label</span><span class=\"p\">(</span><span class=\"n\">id_</span><span class=\"p\">)</span>\n            <span class=\"k\">if</span> <span class=\"n\">id_for_label</span><span class=\"p\">:</span>\n                <span class=\"n\">attrs</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"o\">**</span><span class=\"p\">(</span><span class=\"n\">attrs</span> <span class=\"ow\">or</span> <span class=\"p\">{}),</span> <span class=\"s2\">&quot;for&quot;</span><span class=\"p\">:</span> <span class=\"n\">id_for_label</span><span class=\"p\">}</span>\n            <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">required</span> <span class=\"ow\">and</span> <span class=\"nb\">hasattr</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"p\">,</span> <span class=\"s2\">&quot;required_css_class&quot;</span><span class=\"p\">):</span>\n                <span class=\"n\">attrs</span> <span class=\"o\">=</span> <span class=\"n\">attrs</span> <span class=\"ow\">or</span> <span class=\"p\">{}</span>\n                <span class=\"k\">if</span> <span class=\"s2\">&quot;class&quot;</span> <span class=\"ow\">in</span> <span class=\"n\">attrs</span><span class=\"p\">:</span>\n                    <span class=\"n\">attrs</span><span class=\"p\">[</span><span class=\"s2\">&quot;class&quot;</span><span class=\"p\">]</span> <span class=\"o\">+=</span> <span class=\"s2\">&quot; &quot;</span> <span class=\"o\">+</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">required_css_class</span>\n                <span class=\"k\">else</span><span class=\"p\">:</span>\n                    <span class=\"n\">attrs</span><span class=\"p\">[</span><span class=\"s2\">&quot;class&quot;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">required_css_class</span>\n        <span class=\"n\">context</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n            <span class=\"s2\">&quot;field&quot;</span><span class=\"p\">:</span> <span class=\"bp\">self</span><span class=\"p\">,</span>\n            <span class=\"s2\">&quot;label&quot;</span><span class=\"p\">:</span> <span class=\"n\">contents</span><span class=\"p\">,</span>\n            <span class=\"s2\">&quot;attrs&quot;</span><span class=\"p\">:</span> <span class=\"n\">attrs</span><span class=\"p\">,</span>\n            <span class=\"s2\">&quot;use_tag&quot;</span><span class=\"p\">:</span> <span class=\"nb\">bool</span><span class=\"p\">(</span><span class=\"n\">id_</span><span class=\"p\">),</span>\n            <span class=\"s2\">&quot;tag&quot;</span><span class=\"p\">:</span> <span class=\"n\">tag</span> <span class=\"ow\">or</span> <span class=\"s2\">&quot;label&quot;</span><span class=\"p\">,</span>\n        <span class=\"p\">}</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">template_name_label</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">)</span></div>\n\n<div class=\"viewcode-block\" id=\"BoundField.legend_tag\"><a class=\"viewcode-back\" href=\"../../../../ref/forms/api/#django.forms.BoundField.legend_tag\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">legend_tag</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">contents</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">attrs</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"n\">label_suffix</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Wrap the given contents in a &lt;legend&gt;, if the field has an ID</span>\n<span class=\"sd\">        attribute. Contents should be mark_safe&#39;d to avoid HTML escaping. If</span>\n<span class=\"sd\">        contents aren&#39;t given, use the field&#39;s HTML-escaped label.</span>\n\n<span class=\"sd\">        If attrs are given, use them as HTML attributes on the &lt;legend&gt; tag.</span>\n\n<span class=\"sd\">        label_suffix overrides the form&#39;s label_suffix.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">label_tag</span><span class=\"p\">(</span><span class=\"n\">contents</span><span class=\"p\">,</span> <span class=\"n\">attrs</span><span class=\"p\">,</span> <span class=\"n\">label_suffix</span><span class=\"p\">,</span> <span class=\"n\">tag</span><span class=\"o\">=</span><span class=\"s2\">&quot;legend&quot;</span><span class=\"p\">)</span></div>\n\n<div class=\"viewcode-block\" id=\"BoundField.css_classes\"><a class=\"viewcode-back\" href=\"../../../../ref/forms/api/#django.forms.BoundField.css_classes\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">css_classes</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">extra_classes</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Return a string of space-separated CSS classes for this field.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"k\">if</span> <span class=\"nb\">hasattr</span><span class=\"p\">(</span><span class=\"n\">extra_classes</span><span class=\"p\">,</span> <span class=\"s2\">&quot;split&quot;</span><span class=\"p\">):</span>\n            <span class=\"n\">extra_classes</span> <span class=\"o\">=</span> <span class=\"n\">extra_classes</span><span class=\"o\">.</span><span class=\"n\">split</span><span class=\"p\">()</span>\n        <span class=\"n\">extra_classes</span> <span class=\"o\">=</span> <span class=\"nb\">set</span><span class=\"p\">(</span><span class=\"n\">extra_classes</span> <span class=\"ow\">or</span> <span class=\"p\">[])</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">errors</span> <span class=\"ow\">and</span> <span class=\"nb\">hasattr</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"p\">,</span> <span class=\"s2\">&quot;error_css_class&quot;</span><span class=\"p\">):</span>\n            <span class=\"n\">extra_classes</span><span class=\"o\">.</span><span class=\"n\">add</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">error_css_class</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">required</span> <span class=\"ow\">and</span> <span class=\"nb\">hasattr</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"p\">,</span> <span class=\"s2\">&quot;required_css_class&quot;</span><span class=\"p\">):</span>\n            <span class=\"n\">extra_classes</span><span class=\"o\">.</span><span class=\"n\">add</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">required_css_class</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"s2\">&quot; &quot;</span><span class=\"o\">.</span><span class=\"n\">join</span><span class=\"p\">(</span><span class=\"n\">extra_classes</span><span class=\"p\">)</span></div>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">is_hidden</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;Return True if this BoundField&#39;s widget is hidden.&quot;&quot;&quot;</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">is_hidden</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">auto_id</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Calculate and return the ID attribute for this BoundField, if the</span>\n<span class=\"sd\">        associated Form has specified auto_id. Return an empty string otherwise.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"n\">auto_id</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">auto_id</span>  <span class=\"c1\"># Boolean or string</span>\n        <span class=\"k\">if</span> <span class=\"n\">auto_id</span> <span class=\"ow\">and</span> <span class=\"s2\">&quot;</span><span class=\"si\">%s</span><span class=\"s2\">&quot;</span> <span class=\"ow\">in</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">auto_id</span><span class=\"p\">):</span>\n            <span class=\"k\">return</span> <span class=\"n\">auto_id</span> <span class=\"o\">%</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">html_name</span>\n        <span class=\"k\">elif</span> <span class=\"n\">auto_id</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">html_name</span>\n        <span class=\"k\">return</span> <span class=\"s2\">&quot;&quot;</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">id_for_label</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Wrapper around the field widget&#39;s `id_for_label` method.</span>\n<span class=\"sd\">        Useful, for example, for focusing on this field regardless of whether</span>\n<span class=\"sd\">        it has a single widget or a MultiWidget.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"n\">widget</span> <span class=\"o\">=</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">widget</span>\n        <span class=\"n\">id_</span> <span class=\"o\">=</span> <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">attrs</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">&quot;id&quot;</span><span class=\"p\">)</span> <span class=\"ow\">or</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">auto_id</span>\n        <span class=\"k\">return</span> <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">id_for_label</span><span class=\"p\">(</span><span class=\"n\">id_</span><span class=\"p\">)</span>\n\n    <span class=\"nd\">@cached_property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">initial</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">get_initial_for_field</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">name</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">build_widget_attrs</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">attrs</span><span class=\"p\">,</span> <span class=\"n\">widget</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">):</span>\n        <span class=\"n\">widget</span> <span class=\"o\">=</span> <span class=\"n\">widget</span> <span class=\"ow\">or</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">widget</span>\n        <span class=\"n\">attrs</span> <span class=\"o\">=</span> <span class=\"nb\">dict</span><span class=\"p\">(</span><span class=\"n\">attrs</span><span class=\"p\">)</span>  <span class=\"c1\"># Copy attrs to avoid modifying the argument.</span>\n        <span class=\"k\">if</span> <span class=\"p\">(</span>\n            <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">use_required_attribute</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">initial</span><span class=\"p\">)</span>\n            <span class=\"ow\">and</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">required</span>\n            <span class=\"ow\">and</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">form</span><span class=\"o\">.</span><span class=\"n\">use_required_attribute</span>\n        <span class=\"p\">):</span>\n            <span class=\"c1\"># MultiValueField has require_all_fields: if False, fall back</span>\n            <span class=\"c1\"># on subfields.</span>\n            <span class=\"k\">if</span> <span class=\"p\">(</span>\n                <span class=\"nb\">hasattr</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"p\">,</span> <span class=\"s2\">&quot;require_all_fields&quot;</span><span class=\"p\">)</span>\n                <span class=\"ow\">and</span> <span class=\"ow\">not</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">require_all_fields</span>\n                <span class=\"ow\">and</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">widget</span><span class=\"p\">,</span> <span class=\"n\">MultiWidget</span><span class=\"p\">)</span>\n            <span class=\"p\">):</span>\n                <span class=\"k\">for</span> <span class=\"n\">subfield</span><span class=\"p\">,</span> <span class=\"n\">subwidget</span> <span class=\"ow\">in</span> <span class=\"nb\">zip</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">fields</span><span class=\"p\">,</span> <span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">widgets</span><span class=\"p\">):</span>\n                    <span class=\"n\">subwidget</span><span class=\"o\">.</span><span class=\"n\">attrs</span><span class=\"p\">[</span><span class=\"s2\">&quot;required&quot;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"p\">(</span>\n                        <span class=\"n\">subwidget</span><span class=\"o\">.</span><span class=\"n\">use_required_attribute</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">initial</span><span class=\"p\">)</span>\n                        <span class=\"ow\">and</span> <span class=\"n\">subfield</span><span class=\"o\">.</span><span class=\"n\">required</span>\n                    <span class=\"p\">)</span>\n            <span class=\"k\">else</span><span class=\"p\">:</span>\n                <span class=\"n\">attrs</span><span class=\"p\">[</span><span class=\"s2\">&quot;required&quot;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"kc\">True</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">disabled</span><span class=\"p\">:</span>\n            <span class=\"n\">attrs</span><span class=\"p\">[</span><span class=\"s2\">&quot;disabled&quot;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"kc\">True</span>\n        <span class=\"k\">return</span> <span class=\"n\">attrs</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">widget_type</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"n\">re</span><span class=\"o\">.</span><span class=\"n\">sub</span><span class=\"p\">(</span>\n            <span class=\"sa\">r</span><span class=\"s2\">&quot;widget$|input$&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"vm\">__class__</span><span class=\"o\">.</span><span class=\"vm\">__name__</span><span class=\"o\">.</span><span class=\"n\">lower</span><span class=\"p\">()</span>\n        <span class=\"p\">)</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">use_fieldset</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Return the value of this BoundField widget&#39;s use_fieldset attribute.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">field</span><span class=\"o\">.</span><span class=\"n\">widget</span><span class=\"o\">.</span><span class=\"n\">use_fieldset</span></div>\n\n\n<span class=\"nd\">@html_safe</span>\n<span class=\"k\">class</span> <span class=\"nc\">BoundWidget</span><span class=\"p\">:</span>\n    <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    A container class used for iterating over widgets. This is useful for</span>\n<span class=\"sd\">    widgets that have choices. For example, the following can be used in a</span>\n<span class=\"sd\">    template:</span>\n\n<span class=\"sd\">    {% for radio in myform.beatles %}</span>\n<span class=\"sd\">      &lt;label for=&quot;{{ radio.id_for_label }}&quot;&gt;</span>\n<span class=\"sd\">        {{ radio.choice_label }}</span>\n<span class=\"sd\">        &lt;span class=&quot;radio&quot;&gt;{{ radio.tag }}&lt;/span&gt;</span>\n<span class=\"sd\">      &lt;/label&gt;</span>\n<span class=\"sd\">    {% endfor %}</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">parent_widget</span><span class=\"p\">,</span> <span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"n\">renderer</span><span class=\"p\">):</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">parent_widget</span> <span class=\"o\">=</span> <span class=\"n\">parent_widget</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">data</span> <span class=\"o\">=</span> <span class=\"n\">data</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">renderer</span> <span class=\"o\">=</span> <span class=\"n\">renderer</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__str__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">tag</span><span class=\"p\">(</span><span class=\"n\">wrap_label</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">tag</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">wrap_label</span><span class=\"o\">=</span><span class=\"kc\">False</span><span class=\"p\">):</span>\n        <span class=\"n\">context</span> <span class=\"o\">=</span> <span class=\"p\">{</span><span class=\"s2\">&quot;widget&quot;</span><span class=\"p\">:</span> <span class=\"p\">{</span><span class=\"o\">**</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">,</span> <span class=\"s2\">&quot;wrap_label&quot;</span><span class=\"p\">:</span> <span class=\"n\">wrap_label</span><span class=\"p\">}}</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">parent_widget</span><span class=\"o\">.</span><span class=\"n\">_render</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">template_name</span><span class=\"p\">,</span> <span class=\"n\">context</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">renderer</span><span class=\"p\">)</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">template_name</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"s2\">&quot;template_name&quot;</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s2\">&quot;template_name&quot;</span><span class=\"p\">]</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">parent_widget</span><span class=\"o\">.</span><span class=\"n\">template_name</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">id_for_label</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s2\">&quot;attrs&quot;</span><span class=\"p\">]</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">&quot;id&quot;</span><span class=\"p\">)</span>\n\n    <span class=\"nd\">@property</span>\n    <span class=\"k\">def</span> <span class=\"nf\">choice_label</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">data</span><span class=\"p\">[</span><span class=\"s2\">&quot;label&quot;</span><span class=\"p\">]</span>\n</pre></div>", "current_page_name": "_modules/django/forms/boundfield", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}
