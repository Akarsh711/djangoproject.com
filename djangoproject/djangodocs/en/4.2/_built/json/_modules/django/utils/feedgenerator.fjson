{"parents": [{"link": "../../../", "title": "Module code"}, {"link": "../../", "title": "django"}], "title": "django.utils.feedgenerator", "body": "<h1>Source code for django.utils.feedgenerator</h1><div class=\"highlight\"><pre>\n<span></span><span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">Syndication feed generation library -- used for generating RSS, etc.</span>\n\n<span class=\"sd\">Sample usage:</span>\n\n<span class=\"sd\">&gt;&gt;&gt; from django.utils import feedgenerator</span>\n<span class=\"sd\">&gt;&gt;&gt; feed = feedgenerator.Rss201rev2Feed(</span>\n<span class=\"sd\">...     title=&quot;Poynter E-Media Tidbits&quot;,</span>\n<span class=\"sd\">...     link=&quot;http://www.poynter.org/column.asp?id=31&quot;,</span>\n<span class=\"sd\">...     description=&quot;A group blog by the sharpest minds in online journalism.&quot;,</span>\n<span class=\"sd\">...     language=&quot;en&quot;,</span>\n<span class=\"sd\">... )</span>\n<span class=\"sd\">&gt;&gt;&gt; feed.add_item(</span>\n<span class=\"sd\">...     title=&quot;Hello&quot;,</span>\n<span class=\"sd\">...     link=&quot;http://www.holovaty.com/test/&quot;,</span>\n<span class=\"sd\">...     description=&quot;Testing.&quot;</span>\n<span class=\"sd\">... )</span>\n<span class=\"sd\">&gt;&gt;&gt; with open(&#39;test.rss&#39;, &#39;w&#39;) as fp:</span>\n<span class=\"sd\">...     feed.write(fp, &#39;utf-8&#39;)</span>\n\n<span class=\"sd\">For definitions of the different versions of RSS, see:</span>\n<span class=\"sd\">https://web.archive.org/web/20110718035220/http://diveintomark.org/archives/2004/02/04/incompatible-rss</span>\n<span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"kn\">import</span> <span class=\"nn\">datetime</span>\n<span class=\"kn\">import</span> <span class=\"nn\">email</span>\n<span class=\"kn\">from</span> <span class=\"nn\">io</span> <span class=\"kn\">import</span> <span class=\"n\">StringIO</span>\n<span class=\"kn\">from</span> <span class=\"nn\">urllib.parse</span> <span class=\"kn\">import</span> <span class=\"n\">urlparse</span>\n\n<span class=\"kn\">from</span> <span class=\"nn\">django.utils.encoding</span> <span class=\"kn\">import</span> <span class=\"n\">iri_to_uri</span>\n<span class=\"kn\">from</span> <span class=\"nn\">django.utils.xmlutils</span> <span class=\"kn\">import</span> <span class=\"n\">SimplerXMLGenerator</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">rfc2822_date</span><span class=\"p\">(</span><span class=\"n\">date</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">date</span><span class=\"p\">,</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">datetime</span><span class=\"p\">):</span>\n        <span class=\"n\">date</span> <span class=\"o\">=</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">combine</span><span class=\"p\">(</span><span class=\"n\">date</span><span class=\"p\">,</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">())</span>\n    <span class=\"k\">return</span> <span class=\"n\">email</span><span class=\"o\">.</span><span class=\"n\">utils</span><span class=\"o\">.</span><span class=\"n\">format_datetime</span><span class=\"p\">(</span><span class=\"n\">date</span><span class=\"p\">)</span>\n\n\n<span class=\"k\">def</span> <span class=\"nf\">rfc3339_date</span><span class=\"p\">(</span><span class=\"n\">date</span><span class=\"p\">):</span>\n    <span class=\"k\">if</span> <span class=\"ow\">not</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">date</span><span class=\"p\">,</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">datetime</span><span class=\"p\">):</span>\n        <span class=\"n\">date</span> <span class=\"o\">=</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">combine</span><span class=\"p\">(</span><span class=\"n\">date</span><span class=\"p\">,</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">time</span><span class=\"p\">())</span>\n    <span class=\"k\">return</span> <span class=\"n\">date</span><span class=\"o\">.</span><span class=\"n\">isoformat</span><span class=\"p\">()</span> <span class=\"o\">+</span> <span class=\"p\">(</span><span class=\"s2\">&quot;Z&quot;</span> <span class=\"k\">if</span> <span class=\"n\">date</span><span class=\"o\">.</span><span class=\"n\">utcoffset</span><span class=\"p\">()</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span> <span class=\"k\">else</span> <span class=\"s2\">&quot;&quot;</span><span class=\"p\">)</span>\n\n\n<div class=\"viewcode-block\" id=\"get_tag_uri\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.get_tag_uri\">[docs]</a><span class=\"k\">def</span> <span class=\"nf\">get_tag_uri</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"n\">date</span><span class=\"p\">):</span>\n    <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">    Create a TagURI.</span>\n\n<span class=\"sd\">    See</span>\n<span class=\"sd\">    https://web.archive.org/web/20110514113830/http://diveintomark.org/archives/2004/05/28/howto-atom-id</span>\n<span class=\"sd\">    &quot;&quot;&quot;</span>\n    <span class=\"n\">bits</span> <span class=\"o\">=</span> <span class=\"n\">urlparse</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">)</span>\n    <span class=\"n\">d</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;&quot;</span>\n    <span class=\"k\">if</span> <span class=\"n\">date</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n        <span class=\"n\">d</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;,</span><span class=\"si\">%s</span><span class=\"s2\">&quot;</span> <span class=\"o\">%</span> <span class=\"n\">date</span><span class=\"o\">.</span><span class=\"n\">strftime</span><span class=\"p\">(</span><span class=\"s2\">&quot;%Y-%m-</span><span class=\"si\">%d</span><span class=\"s2\">&quot;</span><span class=\"p\">)</span>\n    <span class=\"k\">return</span> <span class=\"s2\">&quot;tag:</span><span class=\"si\">%s%s</span><span class=\"s2\">:</span><span class=\"si\">%s</span><span class=\"s2\">/</span><span class=\"si\">%s</span><span class=\"s2\">&quot;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">bits</span><span class=\"o\">.</span><span class=\"n\">hostname</span><span class=\"p\">,</span> <span class=\"n\">d</span><span class=\"p\">,</span> <span class=\"n\">bits</span><span class=\"o\">.</span><span class=\"n\">path</span><span class=\"p\">,</span> <span class=\"n\">bits</span><span class=\"o\">.</span><span class=\"n\">fragment</span><span class=\"p\">)</span></div>\n\n\n<div class=\"viewcode-block\" id=\"SyndicationFeed\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.SyndicationFeed\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">SyndicationFeed</span><span class=\"p\">:</span>\n    <span class=\"s2\">&quot;Base class for all syndication feeds. Subclasses should provide write()&quot;</span>\n\n<div class=\"viewcode-block\" id=\"SyndicationFeed.__init__\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.SyndicationFeed.__init__\">[docs]</a>    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span>\n        <span class=\"bp\">self</span><span class=\"p\">,</span>\n        <span class=\"n\">title</span><span class=\"p\">,</span>\n        <span class=\"n\">link</span><span class=\"p\">,</span>\n        <span class=\"n\">description</span><span class=\"p\">,</span>\n        <span class=\"n\">language</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">author_email</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">author_name</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">author_link</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">subtitle</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">categories</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">feed_url</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">feed_copyright</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">feed_guid</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">ttl</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">,</span>\n    <span class=\"p\">):</span>\n        <span class=\"k\">def</span> <span class=\"nf\">to_str</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">):</span>\n            <span class=\"k\">return</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span> <span class=\"k\">if</span> <span class=\"n\">s</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span> <span class=\"k\">else</span> <span class=\"n\">s</span>\n\n        <span class=\"n\">categories</span> <span class=\"o\">=</span> <span class=\"n\">categories</span> <span class=\"ow\">and</span> <span class=\"p\">[</span><span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"p\">)</span> <span class=\"k\">for</span> <span class=\"n\">c</span> <span class=\"ow\">in</span> <span class=\"n\">categories</span><span class=\"p\">]</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span> <span class=\"o\">=</span> <span class=\"p\">{</span>\n            <span class=\"s2\">&quot;title&quot;</span><span class=\"p\">:</span> <span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">title</span><span class=\"p\">),</span>\n            <span class=\"s2\">&quot;link&quot;</span><span class=\"p\">:</span> <span class=\"n\">iri_to_uri</span><span class=\"p\">(</span><span class=\"n\">link</span><span class=\"p\">),</span>\n            <span class=\"s2\">&quot;description&quot;</span><span class=\"p\">:</span> <span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">description</span><span class=\"p\">),</span>\n            <span class=\"s2\">&quot;language&quot;</span><span class=\"p\">:</span> <span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">language</span><span class=\"p\">),</span>\n            <span class=\"s2\">&quot;author_email&quot;</span><span class=\"p\">:</span> <span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">author_email</span><span class=\"p\">),</span>\n            <span class=\"s2\">&quot;author_name&quot;</span><span class=\"p\">:</span> <span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">author_name</span><span class=\"p\">),</span>\n            <span class=\"s2\">&quot;author_link&quot;</span><span class=\"p\">:</span> <span class=\"n\">iri_to_uri</span><span class=\"p\">(</span><span class=\"n\">author_link</span><span class=\"p\">),</span>\n            <span class=\"s2\">&quot;subtitle&quot;</span><span class=\"p\">:</span> <span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">subtitle</span><span class=\"p\">),</span>\n            <span class=\"s2\">&quot;categories&quot;</span><span class=\"p\">:</span> <span class=\"n\">categories</span> <span class=\"ow\">or</span> <span class=\"p\">(),</span>\n            <span class=\"s2\">&quot;feed_url&quot;</span><span class=\"p\">:</span> <span class=\"n\">iri_to_uri</span><span class=\"p\">(</span><span class=\"n\">feed_url</span><span class=\"p\">),</span>\n            <span class=\"s2\">&quot;feed_copyright&quot;</span><span class=\"p\">:</span> <span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">feed_copyright</span><span class=\"p\">),</span>\n            <span class=\"s2\">&quot;id&quot;</span><span class=\"p\">:</span> <span class=\"n\">feed_guid</span> <span class=\"ow\">or</span> <span class=\"n\">link</span><span class=\"p\">,</span>\n            <span class=\"s2\">&quot;ttl&quot;</span><span class=\"p\">:</span> <span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">ttl</span><span class=\"p\">),</span>\n            <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">,</span>\n        <span class=\"p\">}</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">items</span> <span class=\"o\">=</span> <span class=\"p\">[]</span></div>\n\n<div class=\"viewcode-block\" id=\"SyndicationFeed.add_item\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.SyndicationFeed.add_item\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">add_item</span><span class=\"p\">(</span>\n        <span class=\"bp\">self</span><span class=\"p\">,</span>\n        <span class=\"n\">title</span><span class=\"p\">,</span>\n        <span class=\"n\">link</span><span class=\"p\">,</span>\n        <span class=\"n\">description</span><span class=\"p\">,</span>\n        <span class=\"n\">author_email</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">author_name</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">author_link</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">pubdate</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">comments</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">unique_id</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">unique_id_is_permalink</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">categories</span><span class=\"o\">=</span><span class=\"p\">(),</span>\n        <span class=\"n\">item_copyright</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">ttl</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">updateddate</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"n\">enclosures</span><span class=\"o\">=</span><span class=\"kc\">None</span><span class=\"p\">,</span>\n        <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">,</span>\n    <span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Add an item to the feed. All args are expected to be strings except</span>\n<span class=\"sd\">        pubdate and updateddate, which are datetime.datetime objects, and</span>\n<span class=\"sd\">        enclosures, which is an iterable of instances of the Enclosure class.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n\n        <span class=\"k\">def</span> <span class=\"nf\">to_str</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">):</span>\n            <span class=\"k\">return</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">)</span> <span class=\"k\">if</span> <span class=\"n\">s</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span> <span class=\"k\">else</span> <span class=\"n\">s</span>\n\n        <span class=\"n\">categories</span> <span class=\"o\">=</span> <span class=\"n\">categories</span> <span class=\"ow\">and</span> <span class=\"p\">[</span><span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">c</span><span class=\"p\">)</span> <span class=\"k\">for</span> <span class=\"n\">c</span> <span class=\"ow\">in</span> <span class=\"n\">categories</span><span class=\"p\">]</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"o\">.</span><span class=\"n\">append</span><span class=\"p\">(</span>\n            <span class=\"p\">{</span>\n                <span class=\"s2\">&quot;title&quot;</span><span class=\"p\">:</span> <span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">title</span><span class=\"p\">),</span>\n                <span class=\"s2\">&quot;link&quot;</span><span class=\"p\">:</span> <span class=\"n\">iri_to_uri</span><span class=\"p\">(</span><span class=\"n\">link</span><span class=\"p\">),</span>\n                <span class=\"s2\">&quot;description&quot;</span><span class=\"p\">:</span> <span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">description</span><span class=\"p\">),</span>\n                <span class=\"s2\">&quot;author_email&quot;</span><span class=\"p\">:</span> <span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">author_email</span><span class=\"p\">),</span>\n                <span class=\"s2\">&quot;author_name&quot;</span><span class=\"p\">:</span> <span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">author_name</span><span class=\"p\">),</span>\n                <span class=\"s2\">&quot;author_link&quot;</span><span class=\"p\">:</span> <span class=\"n\">iri_to_uri</span><span class=\"p\">(</span><span class=\"n\">author_link</span><span class=\"p\">),</span>\n                <span class=\"s2\">&quot;pubdate&quot;</span><span class=\"p\">:</span> <span class=\"n\">pubdate</span><span class=\"p\">,</span>\n                <span class=\"s2\">&quot;updateddate&quot;</span><span class=\"p\">:</span> <span class=\"n\">updateddate</span><span class=\"p\">,</span>\n                <span class=\"s2\">&quot;comments&quot;</span><span class=\"p\">:</span> <span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">comments</span><span class=\"p\">),</span>\n                <span class=\"s2\">&quot;unique_id&quot;</span><span class=\"p\">:</span> <span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">unique_id</span><span class=\"p\">),</span>\n                <span class=\"s2\">&quot;unique_id_is_permalink&quot;</span><span class=\"p\">:</span> <span class=\"n\">unique_id_is_permalink</span><span class=\"p\">,</span>\n                <span class=\"s2\">&quot;enclosures&quot;</span><span class=\"p\">:</span> <span class=\"n\">enclosures</span> <span class=\"ow\">or</span> <span class=\"p\">(),</span>\n                <span class=\"s2\">&quot;categories&quot;</span><span class=\"p\">:</span> <span class=\"n\">categories</span> <span class=\"ow\">or</span> <span class=\"p\">(),</span>\n                <span class=\"s2\">&quot;item_copyright&quot;</span><span class=\"p\">:</span> <span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">item_copyright</span><span class=\"p\">),</span>\n                <span class=\"s2\">&quot;ttl&quot;</span><span class=\"p\">:</span> <span class=\"n\">to_str</span><span class=\"p\">(</span><span class=\"n\">ttl</span><span class=\"p\">),</span>\n                <span class=\"o\">**</span><span class=\"n\">kwargs</span><span class=\"p\">,</span>\n            <span class=\"p\">}</span>\n        <span class=\"p\">)</span></div>\n\n<div class=\"viewcode-block\" id=\"SyndicationFeed.num_items\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.SyndicationFeed.num_items\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">num_items</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">)</span></div>\n\n<div class=\"viewcode-block\" id=\"SyndicationFeed.root_attributes\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.SyndicationFeed.root_attributes\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">root_attributes</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Return extra attributes to place on the root (i.e. feed/channel) element.</span>\n<span class=\"sd\">        Called from write().</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"k\">return</span> <span class=\"p\">{}</span></div>\n\n<div class=\"viewcode-block\" id=\"SyndicationFeed.add_root_elements\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.SyndicationFeed.add_root_elements\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">add_root_elements</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">handler</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Add elements in the root (i.e. feed/channel) element. Called</span>\n<span class=\"sd\">        from write().</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"k\">pass</span></div>\n\n<div class=\"viewcode-block\" id=\"SyndicationFeed.item_attributes\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.SyndicationFeed.item_attributes\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">item_attributes</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Return extra attributes to place on each item (i.e. item/entry) element.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"k\">return</span> <span class=\"p\">{}</span></div>\n\n<div class=\"viewcode-block\" id=\"SyndicationFeed.add_item_elements\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.SyndicationFeed.add_item_elements\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">add_item_elements</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">handler</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Add elements on each item (i.e. item/entry) element.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"k\">pass</span></div>\n\n<div class=\"viewcode-block\" id=\"SyndicationFeed.write\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.SyndicationFeed.write\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">write</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">outfile</span><span class=\"p\">,</span> <span class=\"n\">encoding</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Output the feed in the given encoding to outfile, which is a file-like</span>\n<span class=\"sd\">        object. Subclasses should override this.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"k\">raise</span> <span class=\"ne\">NotImplementedError</span><span class=\"p\">(</span>\n            <span class=\"s2\">&quot;subclasses of SyndicationFeed must provide a write() method&quot;</span>\n        <span class=\"p\">)</span></div>\n\n<div class=\"viewcode-block\" id=\"SyndicationFeed.writeString\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.SyndicationFeed.writeString\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">writeString</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">encoding</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Return the feed in the given encoding as a string.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"n\">s</span> <span class=\"o\">=</span> <span class=\"n\">StringIO</span><span class=\"p\">()</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">write</span><span class=\"p\">(</span><span class=\"n\">s</span><span class=\"p\">,</span> <span class=\"n\">encoding</span><span class=\"p\">)</span>\n        <span class=\"k\">return</span> <span class=\"n\">s</span><span class=\"o\">.</span><span class=\"n\">getvalue</span><span class=\"p\">()</span></div>\n\n<div class=\"viewcode-block\" id=\"SyndicationFeed.latest_post_date\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.SyndicationFeed.latest_post_date\">[docs]</a>    <span class=\"k\">def</span> <span class=\"nf\">latest_post_date</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"sd\">&quot;&quot;&quot;</span>\n<span class=\"sd\">        Return the latest item&#39;s pubdate or updateddate. If no items</span>\n<span class=\"sd\">        have either of these attributes this return the current UTC date/time.</span>\n<span class=\"sd\">        &quot;&quot;&quot;</span>\n        <span class=\"n\">latest_date</span> <span class=\"o\">=</span> <span class=\"kc\">None</span>\n        <span class=\"n\">date_keys</span> <span class=\"o\">=</span> <span class=\"p\">(</span><span class=\"s2\">&quot;updateddate&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;pubdate&quot;</span><span class=\"p\">)</span>\n\n        <span class=\"k\">for</span> <span class=\"n\">item</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">:</span>\n            <span class=\"k\">for</span> <span class=\"n\">date_key</span> <span class=\"ow\">in</span> <span class=\"n\">date_keys</span><span class=\"p\">:</span>\n                <span class=\"n\">item_date</span> <span class=\"o\">=</span> <span class=\"n\">item</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"n\">date_key</span><span class=\"p\">)</span>\n                <span class=\"k\">if</span> <span class=\"n\">item_date</span><span class=\"p\">:</span>\n                    <span class=\"k\">if</span> <span class=\"n\">latest_date</span> <span class=\"ow\">is</span> <span class=\"kc\">None</span> <span class=\"ow\">or</span> <span class=\"n\">item_date</span> <span class=\"o\">&gt;</span> <span class=\"n\">latest_date</span><span class=\"p\">:</span>\n                        <span class=\"n\">latest_date</span> <span class=\"o\">=</span> <span class=\"n\">item_date</span>\n\n        <span class=\"k\">return</span> <span class=\"n\">latest_date</span> <span class=\"ow\">or</span> <span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">now</span><span class=\"p\">(</span><span class=\"n\">tz</span><span class=\"o\">=</span><span class=\"n\">datetime</span><span class=\"o\">.</span><span class=\"n\">timezone</span><span class=\"o\">.</span><span class=\"n\">utc</span><span class=\"p\">)</span></div></div>\n\n\n<div class=\"viewcode-block\" id=\"Enclosure\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.Enclosure\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">Enclosure</span><span class=\"p\">:</span>\n    <span class=\"sd\">&quot;&quot;&quot;An RSS enclosure&quot;&quot;&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"fm\">__init__</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">url</span><span class=\"p\">,</span> <span class=\"n\">length</span><span class=\"p\">,</span> <span class=\"n\">mime_type</span><span class=\"p\">):</span>\n        <span class=\"s2\">&quot;All args are expected to be strings&quot;</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">length</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">mime_type</span> <span class=\"o\">=</span> <span class=\"n\">length</span><span class=\"p\">,</span> <span class=\"n\">mime_type</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">url</span> <span class=\"o\">=</span> <span class=\"n\">iri_to_uri</span><span class=\"p\">(</span><span class=\"n\">url</span><span class=\"p\">)</span></div>\n\n\n<div class=\"viewcode-block\" id=\"RssFeed\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.RssFeed\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">RssFeed</span><span class=\"p\">(</span><span class=\"n\">SyndicationFeed</span><span class=\"p\">):</span>\n    <span class=\"n\">content_type</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;application/rss+xml; charset=utf-8&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">write</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">outfile</span><span class=\"p\">,</span> <span class=\"n\">encoding</span><span class=\"p\">):</span>\n        <span class=\"n\">handler</span> <span class=\"o\">=</span> <span class=\"n\">SimplerXMLGenerator</span><span class=\"p\">(</span><span class=\"n\">outfile</span><span class=\"p\">,</span> <span class=\"n\">encoding</span><span class=\"p\">,</span> <span class=\"n\">short_empty_elements</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">startDocument</span><span class=\"p\">()</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">startElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;rss&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">rss_attributes</span><span class=\"p\">())</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">startElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;channel&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">root_attributes</span><span class=\"p\">())</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_root_elements</span><span class=\"p\">(</span><span class=\"n\">handler</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">write_items</span><span class=\"p\">(</span><span class=\"n\">handler</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">endChannelElement</span><span class=\"p\">(</span><span class=\"n\">handler</span><span class=\"p\">)</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">endElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;rss&quot;</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">rss_attributes</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">return</span> <span class=\"p\">{</span>\n            <span class=\"s2\">&quot;version&quot;</span><span class=\"p\">:</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">_version</span><span class=\"p\">,</span>\n            <span class=\"s2\">&quot;xmlns:atom&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;http://www.w3.org/2005/Atom&quot;</span><span class=\"p\">,</span>\n        <span class=\"p\">}</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">write_items</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">handler</span><span class=\"p\">):</span>\n        <span class=\"k\">for</span> <span class=\"n\">item</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">startElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;item&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">item_attributes</span><span class=\"p\">(</span><span class=\"n\">item</span><span class=\"p\">))</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_item_elements</span><span class=\"p\">(</span><span class=\"n\">handler</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">)</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">endElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;item&quot;</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">add_root_elements</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">handler</span><span class=\"p\">):</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;title&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;title&quot;</span><span class=\"p\">])</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;link&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;link&quot;</span><span class=\"p\">])</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;description&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;description&quot;</span><span class=\"p\">])</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;feed_url&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span>\n                <span class=\"s2\">&quot;atom:link&quot;</span><span class=\"p\">,</span> <span class=\"kc\">None</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s2\">&quot;rel&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;self&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;href&quot;</span><span class=\"p\">:</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;feed_url&quot;</span><span class=\"p\">]}</span>\n            <span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;language&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;language&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;language&quot;</span><span class=\"p\">])</span>\n        <span class=\"k\">for</span> <span class=\"n\">cat</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;categories&quot;</span><span class=\"p\">]:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;category&quot;</span><span class=\"p\">,</span> <span class=\"n\">cat</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;feed_copyright&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;copyright&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;feed_copyright&quot;</span><span class=\"p\">])</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;lastBuildDate&quot;</span><span class=\"p\">,</span> <span class=\"n\">rfc2822_date</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">latest_post_date</span><span class=\"p\">()))</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;ttl&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;ttl&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;ttl&quot;</span><span class=\"p\">])</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">endChannelElement</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">handler</span><span class=\"p\">):</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">endElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;channel&quot;</span><span class=\"p\">)</span></div>\n\n\n<div class=\"viewcode-block\" id=\"RssUserland091Feed\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.RssUserland091Feed\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">RssUserland091Feed</span><span class=\"p\">(</span><span class=\"n\">RssFeed</span><span class=\"p\">):</span>\n    <span class=\"n\">_version</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;0.91&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">add_item_elements</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">handler</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">):</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;title&quot;</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;title&quot;</span><span class=\"p\">])</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;link&quot;</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;link&quot;</span><span class=\"p\">])</span>\n        <span class=\"k\">if</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;description&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;description&quot;</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;description&quot;</span><span class=\"p\">])</span></div>\n\n\n<div class=\"viewcode-block\" id=\"Rss201rev2Feed\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.Rss201rev2Feed\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">Rss201rev2Feed</span><span class=\"p\">(</span><span class=\"n\">RssFeed</span><span class=\"p\">):</span>\n    <span class=\"c1\"># Spec: https://cyber.harvard.edu/rss/rss.html</span>\n    <span class=\"n\">_version</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;2.0&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">add_item_elements</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">handler</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">):</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;title&quot;</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;title&quot;</span><span class=\"p\">])</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;link&quot;</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;link&quot;</span><span class=\"p\">])</span>\n        <span class=\"k\">if</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;description&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;description&quot;</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;description&quot;</span><span class=\"p\">])</span>\n\n        <span class=\"c1\"># Author information.</span>\n        <span class=\"k\">if</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_name&quot;</span><span class=\"p\">]</span> <span class=\"ow\">and</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_email&quot;</span><span class=\"p\">]:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span>\n                <span class=\"s2\">&quot;author&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;</span><span class=\"si\">%s</span><span class=\"s2\"> (</span><span class=\"si\">%s</span><span class=\"s2\">)&quot;</span> <span class=\"o\">%</span> <span class=\"p\">(</span><span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_email&quot;</span><span class=\"p\">],</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_name&quot;</span><span class=\"p\">])</span>\n            <span class=\"p\">)</span>\n        <span class=\"k\">elif</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_email&quot;</span><span class=\"p\">]:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;author&quot;</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_email&quot;</span><span class=\"p\">])</span>\n        <span class=\"k\">elif</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_name&quot;</span><span class=\"p\">]:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span>\n                <span class=\"s2\">&quot;dc:creator&quot;</span><span class=\"p\">,</span>\n                <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_name&quot;</span><span class=\"p\">],</span>\n                <span class=\"p\">{</span><span class=\"s2\">&quot;xmlns:dc&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;http://purl.org/dc/elements/1.1/&quot;</span><span class=\"p\">},</span>\n            <span class=\"p\">)</span>\n\n        <span class=\"k\">if</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;pubdate&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;pubDate&quot;</span><span class=\"p\">,</span> <span class=\"n\">rfc2822_date</span><span class=\"p\">(</span><span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;pubdate&quot;</span><span class=\"p\">]))</span>\n        <span class=\"k\">if</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;comments&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;comments&quot;</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;comments&quot;</span><span class=\"p\">])</span>\n        <span class=\"k\">if</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;unique_id&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">guid_attrs</span> <span class=\"o\">=</span> <span class=\"p\">{}</span>\n            <span class=\"k\">if</span> <span class=\"nb\">isinstance</span><span class=\"p\">(</span><span class=\"n\">item</span><span class=\"o\">.</span><span class=\"n\">get</span><span class=\"p\">(</span><span class=\"s2\">&quot;unique_id_is_permalink&quot;</span><span class=\"p\">),</span> <span class=\"nb\">bool</span><span class=\"p\">):</span>\n                <span class=\"n\">guid_attrs</span><span class=\"p\">[</span><span class=\"s2\">&quot;isPermaLink&quot;</span><span class=\"p\">]</span> <span class=\"o\">=</span> <span class=\"nb\">str</span><span class=\"p\">(</span><span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;unique_id_is_permalink&quot;</span><span class=\"p\">])</span><span class=\"o\">.</span><span class=\"n\">lower</span><span class=\"p\">()</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;guid&quot;</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;unique_id&quot;</span><span class=\"p\">],</span> <span class=\"n\">guid_attrs</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;ttl&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;ttl&quot;</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;ttl&quot;</span><span class=\"p\">])</span>\n\n        <span class=\"c1\"># Enclosure.</span>\n        <span class=\"k\">if</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;enclosures&quot;</span><span class=\"p\">]:</span>\n            <span class=\"n\">enclosures</span> <span class=\"o\">=</span> <span class=\"nb\">list</span><span class=\"p\">(</span><span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;enclosures&quot;</span><span class=\"p\">])</span>\n            <span class=\"k\">if</span> <span class=\"nb\">len</span><span class=\"p\">(</span><span class=\"n\">enclosures</span><span class=\"p\">)</span> <span class=\"o\">&gt;</span> <span class=\"mi\">1</span><span class=\"p\">:</span>\n                <span class=\"k\">raise</span> <span class=\"ne\">ValueError</span><span class=\"p\">(</span>\n                    <span class=\"s2\">&quot;RSS feed items may only have one enclosure, see &quot;</span>\n                    <span class=\"s2\">&quot;http://www.rssboard.org/rss-profile#element-channel-item-enclosure&quot;</span>\n                <span class=\"p\">)</span>\n            <span class=\"n\">enclosure</span> <span class=\"o\">=</span> <span class=\"n\">enclosures</span><span class=\"p\">[</span><span class=\"mi\">0</span><span class=\"p\">]</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span>\n                <span class=\"s2\">&quot;enclosure&quot;</span><span class=\"p\">,</span>\n                <span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span>\n                <span class=\"p\">{</span>\n                    <span class=\"s2\">&quot;url&quot;</span><span class=\"p\">:</span> <span class=\"n\">enclosure</span><span class=\"o\">.</span><span class=\"n\">url</span><span class=\"p\">,</span>\n                    <span class=\"s2\">&quot;length&quot;</span><span class=\"p\">:</span> <span class=\"n\">enclosure</span><span class=\"o\">.</span><span class=\"n\">length</span><span class=\"p\">,</span>\n                    <span class=\"s2\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"n\">enclosure</span><span class=\"o\">.</span><span class=\"n\">mime_type</span><span class=\"p\">,</span>\n                <span class=\"p\">},</span>\n            <span class=\"p\">)</span>\n\n        <span class=\"c1\"># Categories.</span>\n        <span class=\"k\">for</span> <span class=\"n\">cat</span> <span class=\"ow\">in</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;categories&quot;</span><span class=\"p\">]:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;category&quot;</span><span class=\"p\">,</span> <span class=\"n\">cat</span><span class=\"p\">)</span></div>\n\n\n<div class=\"viewcode-block\" id=\"Atom1Feed\"><a class=\"viewcode-back\" href=\"../../../../ref/utils/#django.utils.feedgenerator.Atom1Feed\">[docs]</a><span class=\"k\">class</span> <span class=\"nc\">Atom1Feed</span><span class=\"p\">(</span><span class=\"n\">SyndicationFeed</span><span class=\"p\">):</span>\n    <span class=\"c1\"># Spec: https://tools.ietf.org/html/rfc4287</span>\n    <span class=\"n\">content_type</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;application/atom+xml; charset=utf-8&quot;</span>\n    <span class=\"n\">ns</span> <span class=\"o\">=</span> <span class=\"s2\">&quot;http://www.w3.org/2005/Atom&quot;</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">write</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">outfile</span><span class=\"p\">,</span> <span class=\"n\">encoding</span><span class=\"p\">):</span>\n        <span class=\"n\">handler</span> <span class=\"o\">=</span> <span class=\"n\">SimplerXMLGenerator</span><span class=\"p\">(</span><span class=\"n\">outfile</span><span class=\"p\">,</span> <span class=\"n\">encoding</span><span class=\"p\">,</span> <span class=\"n\">short_empty_elements</span><span class=\"o\">=</span><span class=\"kc\">True</span><span class=\"p\">)</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">startDocument</span><span class=\"p\">()</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">startElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;feed&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">root_attributes</span><span class=\"p\">())</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_root_elements</span><span class=\"p\">(</span><span class=\"n\">handler</span><span class=\"p\">)</span>\n        <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">write_items</span><span class=\"p\">(</span><span class=\"n\">handler</span><span class=\"p\">)</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">endElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;feed&quot;</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">root_attributes</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">):</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;language&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"p\">{</span><span class=\"s2\">&quot;xmlns&quot;</span><span class=\"p\">:</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">ns</span><span class=\"p\">,</span> <span class=\"s2\">&quot;xml:lang&quot;</span><span class=\"p\">:</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;language&quot;</span><span class=\"p\">]}</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"k\">return</span> <span class=\"p\">{</span><span class=\"s2\">&quot;xmlns&quot;</span><span class=\"p\">:</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">ns</span><span class=\"p\">}</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">add_root_elements</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">handler</span><span class=\"p\">):</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;title&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;title&quot;</span><span class=\"p\">])</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span>\n            <span class=\"s2\">&quot;link&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s2\">&quot;rel&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;alternate&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;href&quot;</span><span class=\"p\">:</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;link&quot;</span><span class=\"p\">]}</span>\n        <span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;feed_url&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span>\n                <span class=\"s2\">&quot;link&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s2\">&quot;rel&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;self&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;href&quot;</span><span class=\"p\">:</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;feed_url&quot;</span><span class=\"p\">]}</span>\n            <span class=\"p\">)</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;id&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;id&quot;</span><span class=\"p\">])</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;updated&quot;</span><span class=\"p\">,</span> <span class=\"n\">rfc3339_date</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">latest_post_date</span><span class=\"p\">()))</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_name&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">startElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;author&quot;</span><span class=\"p\">,</span> <span class=\"p\">{})</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;name&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_name&quot;</span><span class=\"p\">])</span>\n            <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_email&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n                <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;email&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_email&quot;</span><span class=\"p\">])</span>\n            <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_link&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n                <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;uri&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_link&quot;</span><span class=\"p\">])</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">endElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;author&quot;</span><span class=\"p\">)</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;subtitle&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;subtitle&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;subtitle&quot;</span><span class=\"p\">])</span>\n        <span class=\"k\">for</span> <span class=\"n\">cat</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;categories&quot;</span><span class=\"p\">]:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;category&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s2\">&quot;term&quot;</span><span class=\"p\">:</span> <span class=\"n\">cat</span><span class=\"p\">})</span>\n        <span class=\"k\">if</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;feed_copyright&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;rights&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">feed</span><span class=\"p\">[</span><span class=\"s2\">&quot;feed_copyright&quot;</span><span class=\"p\">])</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">write_items</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">handler</span><span class=\"p\">):</span>\n        <span class=\"k\">for</span> <span class=\"n\">item</span> <span class=\"ow\">in</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">items</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">startElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;entry&quot;</span><span class=\"p\">,</span> <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">item_attributes</span><span class=\"p\">(</span><span class=\"n\">item</span><span class=\"p\">))</span>\n            <span class=\"bp\">self</span><span class=\"o\">.</span><span class=\"n\">add_item_elements</span><span class=\"p\">(</span><span class=\"n\">handler</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">)</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">endElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;entry&quot;</span><span class=\"p\">)</span>\n\n    <span class=\"k\">def</span> <span class=\"nf\">add_item_elements</span><span class=\"p\">(</span><span class=\"bp\">self</span><span class=\"p\">,</span> <span class=\"n\">handler</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">):</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;title&quot;</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;title&quot;</span><span class=\"p\">])</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;link&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s2\">&quot;href&quot;</span><span class=\"p\">:</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;link&quot;</span><span class=\"p\">],</span> <span class=\"s2\">&quot;rel&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;alternate&quot;</span><span class=\"p\">})</span>\n\n        <span class=\"k\">if</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;pubdate&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;published&quot;</span><span class=\"p\">,</span> <span class=\"n\">rfc3339_date</span><span class=\"p\">(</span><span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;pubdate&quot;</span><span class=\"p\">]))</span>\n\n        <span class=\"k\">if</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;updateddate&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;updated&quot;</span><span class=\"p\">,</span> <span class=\"n\">rfc3339_date</span><span class=\"p\">(</span><span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;updateddate&quot;</span><span class=\"p\">]))</span>\n\n        <span class=\"c1\"># Author information.</span>\n        <span class=\"k\">if</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_name&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">startElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;author&quot;</span><span class=\"p\">,</span> <span class=\"p\">{})</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;name&quot;</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_name&quot;</span><span class=\"p\">])</span>\n            <span class=\"k\">if</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_email&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n                <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;email&quot;</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_email&quot;</span><span class=\"p\">])</span>\n            <span class=\"k\">if</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_link&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n                <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;uri&quot;</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;author_link&quot;</span><span class=\"p\">])</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">endElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;author&quot;</span><span class=\"p\">)</span>\n\n        <span class=\"c1\"># Unique ID.</span>\n        <span class=\"k\">if</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;unique_id&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">unique_id</span> <span class=\"o\">=</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;unique_id&quot;</span><span class=\"p\">]</span>\n        <span class=\"k\">else</span><span class=\"p\">:</span>\n            <span class=\"n\">unique_id</span> <span class=\"o\">=</span> <span class=\"n\">get_tag_uri</span><span class=\"p\">(</span><span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;link&quot;</span><span class=\"p\">],</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;pubdate&quot;</span><span class=\"p\">])</span>\n        <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;id&quot;</span><span class=\"p\">,</span> <span class=\"n\">unique_id</span><span class=\"p\">)</span>\n\n        <span class=\"c1\"># Summary.</span>\n        <span class=\"k\">if</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;description&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;summary&quot;</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;description&quot;</span><span class=\"p\">],</span> <span class=\"p\">{</span><span class=\"s2\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;html&quot;</span><span class=\"p\">})</span>\n\n        <span class=\"c1\"># Enclosures.</span>\n        <span class=\"k\">for</span> <span class=\"n\">enclosure</span> <span class=\"ow\">in</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;enclosures&quot;</span><span class=\"p\">]:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span>\n                <span class=\"s2\">&quot;link&quot;</span><span class=\"p\">,</span>\n                <span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span>\n                <span class=\"p\">{</span>\n                    <span class=\"s2\">&quot;rel&quot;</span><span class=\"p\">:</span> <span class=\"s2\">&quot;enclosure&quot;</span><span class=\"p\">,</span>\n                    <span class=\"s2\">&quot;href&quot;</span><span class=\"p\">:</span> <span class=\"n\">enclosure</span><span class=\"o\">.</span><span class=\"n\">url</span><span class=\"p\">,</span>\n                    <span class=\"s2\">&quot;length&quot;</span><span class=\"p\">:</span> <span class=\"n\">enclosure</span><span class=\"o\">.</span><span class=\"n\">length</span><span class=\"p\">,</span>\n                    <span class=\"s2\">&quot;type&quot;</span><span class=\"p\">:</span> <span class=\"n\">enclosure</span><span class=\"o\">.</span><span class=\"n\">mime_type</span><span class=\"p\">,</span>\n                <span class=\"p\">},</span>\n            <span class=\"p\">)</span>\n\n        <span class=\"c1\"># Categories.</span>\n        <span class=\"k\">for</span> <span class=\"n\">cat</span> <span class=\"ow\">in</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;categories&quot;</span><span class=\"p\">]:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;category&quot;</span><span class=\"p\">,</span> <span class=\"s2\">&quot;&quot;</span><span class=\"p\">,</span> <span class=\"p\">{</span><span class=\"s2\">&quot;term&quot;</span><span class=\"p\">:</span> <span class=\"n\">cat</span><span class=\"p\">})</span>\n\n        <span class=\"c1\"># Rights.</span>\n        <span class=\"k\">if</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;item_copyright&quot;</span><span class=\"p\">]</span> <span class=\"ow\">is</span> <span class=\"ow\">not</span> <span class=\"kc\">None</span><span class=\"p\">:</span>\n            <span class=\"n\">handler</span><span class=\"o\">.</span><span class=\"n\">addQuickElement</span><span class=\"p\">(</span><span class=\"s2\">&quot;rights&quot;</span><span class=\"p\">,</span> <span class=\"n\">item</span><span class=\"p\">[</span><span class=\"s2\">&quot;item_copyright&quot;</span><span class=\"p\">])</span></div>\n\n\n<span class=\"c1\"># This isolates the decision of what the system default is, so calling code can</span>\n<span class=\"c1\"># do &quot;feedgenerator.DefaultFeed&quot; instead of &quot;feedgenerator.Rss201rev2Feed&quot;.</span>\n<span class=\"n\">DefaultFeed</span> <span class=\"o\">=</span> <span class=\"n\">Rss201rev2Feed</span>\n</pre></div>", "current_page_name": "_modules/django/utils/feedgenerator", "sidebars": ["localtoc.html", "relations.html", "sourcelink.html", "searchbox.html"], "customsidebar": null, "favicon_url": null, "logo_url": null, "alabaster_version": "0.7.13", "include_console_assets": false}